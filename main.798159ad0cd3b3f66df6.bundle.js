(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{116:function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var React=__webpack_require__(0),utils_1=__webpack_require__(166);__webpack_require__(804);var log=__webpack_require__(16).default("story:base-demo"),BaseDemo=function(_super){function BaseDemo(props){var _this=_super.call(this,props)||this;return _this.onChange=function(model){_this.setState({model:model})},_this.initModel(),_this}return __extends(BaseDemo,_super),BaseDemo.prototype.initModel=function(){var model=utils_1.generateSimpleModel();log("initModel:",model),this.state={model:model}},BaseDemo.prototype.renderDiagram=function(){return null},BaseDemo.prototype.render=function(){return React.createElement("div",{className:"app"},this.renderDiagram())},BaseDemo}(React.Component);exports.BaseDemo=BaseDemo},1171:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var slate_md_serializer_1=__webpack_require__(454);exports.default=new slate_md_serializer_1.default},1172:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(21),themes_1=__webpack_require__(137),themes_2=__webpack_require__(137),themes_3=__webpack_require__(137),themes_4=__webpack_require__(137),themes_5=__webpack_require__(137);exports.ThemeSelectorPlugin=function ThemeSelectorPlugin(){var themeMap=new Map([["default",core_1.defaultTheme],["random-color-square",themes_1.themeRandomColorSquare],["theme1",themes_2.theme1],["theme2",themes_3.theme2],["theme3",themes_4.theme3],["theme4",themes_5.theme4]]);return{getAllThemes:function(props){return themeMap},setTheme:function(props){var model=props.model,controller=props.controller,themeKey=props.themeKey;themeKey;var allTheme=controller.run("getAllThemes",props);if(!allTheme.has(themeKey))throw new Error("setTheme: the theme key is not correct!");var theme=allTheme.get(themeKey),newModel=core_1.ModelModifier.setTheme({model:model,theme:theme});controller.change(newModel)}}}},1173:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.themeRandomColorSquare={name:"default",randomColor:!0,background:"rgb(57,60,65)",highlightColor:"#50C9CE",marginH:60,marginV:20,contentStyle:{lineHeight:"1.5",fontSize:"16px"},linkStyle:{lineRadius:5,lineType:"curve",lineWidth:3},rootTopic:{contentStyle:{fontSize:"36px"},subLinkStyle:{lineType:"curve",lineWidth:3}},primaryTopic:{contentStyle:{fontSize:"24px"},subLinkStyle:{lineType:"curve",lineWidth:3}},normalTopic:{subLinkStyle:{lineType:"curve",lineWidth:3}}}},1174:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.theme1={name:"theme1",randomColor:!1,background:"rgb(250,245,205)",highlightColor:"#50C9CE",marginH:50,marginV:30,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5},rootTopic:{contentStyle:{background:"rgb(221, 170, 68)",color:"#fff",fontSize:"34px",borderRadius:"5px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:2,lineColor:"rgb(221, 170, 68)"}},primaryTopic:{contentStyle:{background:"#e8eaec",borderWidth:"2px",borderStyle:"solid",borderColor:"rgb(221, 170, 68)",borderRadius:"5px",fontSize:"17px",padding:"10px 15px 10px 15px"},subLinkStyle:{lineType:"curve",lineWidth:2,lineColor:"rgb(221, 170, 68)"}},normalTopic:{contentStyle:{background:"#fff",border:"1px solid #e8eaec",borderRadius:"20px",color:"rgb(187, 136, 34)",fontSize:"13px",padding:"4px 10px"},subLinkStyle:{lineType:"round",lineRadius:5,lineWidth:1,lineColor:"rgb(187, 136, 34)"}}}},1175:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.theme2={name:"theme2",randomColor:!1,background:"#f8f8f8",highlightColor:"#50C9CE",marginH:45,marginV:10,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5},rootTopic:{contentStyle:{background:"#50C18A",color:"#fff",fontSize:"34px",borderRadius:"5px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:2,lineColor:"#43a9ff"}},primaryTopic:{contentStyle:{background:"#ffffff",borderWidth:"1px",borderStyle:"solid",borderColor:"rgb(221, 170, 68)",borderRadius:"5px",color:"rgb(103,103,103)",fontSize:"14px",padding:"6px 10px 5px 10px"},subLinkStyle:{lineType:"round",lineRadius:5,lineWidth:2,lineColor:"#43a9ff"}},normalTopic:{contentStyle:{background:"#fff",borderRadius:"5px",color:"rgb(103,103,103)",fontSize:"13px",padding:"3px 9px 4px",boxShadow:"1px 1px 1px #ccc"},subLinkStyle:{lineType:"round",lineRadius:5,lineWidth:1,lineColor:"#43a9ff"}}}},1176:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.theme3={name:"theme3",randomColor:!1,background:"#A9DEF9",highlightColor:"#50C9CE",marginH:50,marginV:20,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5},rootTopic:{contentStyle:{background:"#FF99C8",color:"#fff",fontSize:"34px",borderRadius:"5px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:2,lineColor:"#43a9ff"}},primaryTopic:{contentStyle:{background:"#FCF6BD",borderWidth:"1px",borderStyle:"solid",borderColor:"#E4C1F9",borderRadius:"5px",color:"rgb(103,103,103)",fontSize:"14px",padding:"6px 10px 5px 10px"},subLinkStyle:{lineType:"curve",lineWidth:2,lineColor:"#43a9ff"}},normalTopic:{contentStyle:{background:"#E4FDE1",borderRadius:"5px",color:"rgb(103,103,103)",fontSize:"13px",padding:"3px 9px 4px",boxShadow:"1px 1px 1px #ccc"},subLinkStyle:{lineType:"round",lineRadius:5,lineWidth:1,lineColor:"#43a9ff"}}}},1177:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.theme4={name:"theme3",randomColor:!1,background:"#CCFBFE",highlightColor:"#50C9CE",marginH:50,marginV:20,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5},rootTopic:{contentStyle:{background:"#CD8987",color:"#fff",fontSize:"34px",borderRadius:"5px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:2,lineColor:"#43a9ff"}},primaryTopic:{contentStyle:{background:"#CDACA1",borderWidth:"1px",borderStyle:"solid",borderColor:"#E4C1F9",borderRadius:"5px",color:"rgb(103,103,103)",fontSize:"14px",padding:"6px 10px 5px 10px"},subLinkStyle:{lineType:"line",lineWidth:2,lineColor:"#43a9ff"}},normalTopic:{contentStyle:{background:"#CDCACC",borderRadius:"5px",color:"rgb(103,103,103)",fontSize:"13px",padding:"3px 9px 4px",boxShadow:"1px 1px 1px #ccc"},subLinkStyle:{lineType:"line",lineRadius:5,lineWidth:1,lineColor:"#43a9ff"}}}},1178:function(module,exports,__webpack_require__){"use strict";(function(module){var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var withSourceLoader=__webpack_require__(135).withSource,__STORY__="import * as React from 'react';\nimport { Diagram } from '@blink-mind/renderer-react';\nimport { BaseDemo } from '../common/base-demo';\nimport { MenuItem, MenuDivider } from '@blueprintjs/core';\nimport { storiesOf } from '@storybook/react';\nimport * as marked from 'marked';\n//@ts-ignore\nimport addTopicContextMenuMdEn from './add-topic-context-menu-en.md';\n//@ts-ignore\nimport addTopicContextMenuMdZh from './add-topic-context-menu-zh.md';\n//@ts-ignore\nimport changeDefaultTopicContextMenuMdZh from './change-default-topic-context-menu-zh.md';\n//@ts-ignore\nimport changeDefaultTopicContextMenuMdEn from './change-default-topic-context-menu-en.md';\n\nfunction onClickMyMenu(props) {\n  return function() {\n    const { topicKey, controller, model } = props;\n    alert(`this topic key is ${topicKey}`);\n    const topicStyle = controller.run('getTopicContentStyle', props);\n    alert(`this topic content style is ${JSON.stringify(topicStyle)}`);\n  };\n}\n\nfunction HotKeyPlugin() {\n  return {\n    customizeHotKeys(props, next) {\n      const hotKeysMap = next();\n      hotKeysMap.set('MY_CUSTOM', {\n        label: 'MY_CUSTOM',\n        combo: 'shift + a',\n        onKeyDown: e => {\n          onClickMyMenu(props)();\n        }\n      });\n      return hotKeysMap;\n    }\n  };\n}\n\nfunction AddTopicContextMenuPlugin() {\n  return {\n    customizeTopicContextMenu(props, next) {\n      return (\n        <>\n          {next()}\n          <MenuDivider />\n          <MenuItem\n            icon=\"group-objects\"\n            label=\"Shift + A\"\n            text=\"my customize menu\"\n            onClick={onClickMyMenu(props)}\n          />\n        </>\n      );\n    }\n  };\n}\nconst plugins = [AddTopicContextMenuPlugin(), HotKeyPlugin()];\nexport class AddTopicContextMenuDemo extends BaseDemo {\n  renderDiagram() {\n    return (\n      <Diagram\n        model={this.state.model}\n        onChange={this.onChange}\n        plugins={plugins}\n      />\n    );\n  }\n}\n\nfunction ChangeDefaultTopicContextMenuPlugin() {\n  return {\n    customizeTopicContextMenu(props, next) {\n      let defaultMenus = next();\n      defaultMenus.splice(0, 1);\n      defaultMenus.splice(\n        1,\n        0,\n        <MenuItem\n          icon=\"group-objects\"\n          label=\"Shift + A\"\n          text=\"my customize menu\"\n          onClick={onClickMyMenu(props)}\n        />\n      );\n      return <>{defaultMenus}</>;\n    }\n  };\n}\n\nconst changeDefaultContextMenuPlugins = [\n  ChangeDefaultTopicContextMenuPlugin(),\n  HotKeyPlugin()\n];\nexport class ChangeDefaultTopicContextMenuDemo extends BaseDemo {\n  renderDiagram() {\n    return (\n      <Diagram\n        model={this.state.model}\n        onChange={this.onChange}\n        plugins={changeDefaultContextMenuPlugins}\n      />\n    );\n  }\n}\n\nstoriesOf('customize-topic-context-menu-demo', module)\n  .add('add-topic-context-menu', () => <AddTopicContextMenuDemo />, {\n    notes: {\n      markdown: {\n        en: addTopicContextMenuMdEn,\n        zh: addTopicContextMenuMdZh\n      }\n    }\n  })\n  .add(\n    'change-default-context-menu',\n    () => <ChangeDefaultTopicContextMenuDemo />,\n    {\n      notes: {\n        markdown: {\n          en: changeDefaultTopicContextMenuMdEn,\n          zh: changeDefaultTopicContextMenuMdZh\n        }\n      }\n    }\n  );\n",__ADDS_MAP__={"customize-topic-context-menu-demo--change-default-context-menu":{startLoc:{col:4,line:118},endLoc:{col:5,line:127},startBody:{col:4,line:119},endBody:{col:47,line:119}},"customize-topic-context-menu-demo--add-topic-context-menu":{startLoc:{col:7,line:109},endLoc:{col:3,line:116},startBody:{col:33,line:109},endBody:{col:66,line:109}}},React=__webpack_require__(0),renderer_react_1=__webpack_require__(59),base_demo_1=__webpack_require__(116),core_1=__webpack_require__(23),react_1=__webpack_require__(67),add_topic_context_menu_en_md_1=__webpack_require__(1179),add_topic_context_menu_zh_md_1=__webpack_require__(1180),change_default_topic_context_menu_zh_md_1=__webpack_require__(1181),change_default_topic_context_menu_en_md_1=__webpack_require__(1182);function onClickMyMenu(props){return function(){var topicKey=props.topicKey,controller=props.controller;props.model;alert("this topic key is "+topicKey);var topicStyle=controller.run("getTopicContentStyle",props);alert("this topic content style is "+JSON.stringify(topicStyle))}}function HotKeyPlugin(){return{customizeHotKeys:function(props,next){var hotKeysMap=next();return hotKeysMap.set("MY_CUSTOM",{label:"MY_CUSTOM",combo:"shift + a",onKeyDown:function(e){onClickMyMenu(props)()}}),hotKeysMap}}}var plugins=[function AddTopicContextMenuPlugin(){return{customizeTopicContextMenu:function(props,next){return React.createElement(React.Fragment,null,next(),React.createElement(core_1.MenuDivider,null),React.createElement(core_1.MenuItem,{icon:"group-objects",label:"Shift + A",text:"my customize menu",onClick:onClickMyMenu(props)}))}}}(),HotKeyPlugin()],AddTopicContextMenuDemo=function(_super){function AddTopicContextMenuDemo(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(AddTopicContextMenuDemo,_super),AddTopicContextMenuDemo.prototype.renderDiagram=function(){return React.createElement(renderer_react_1.Diagram,{model:this.state.model,onChange:this.onChange,plugins:plugins})},AddTopicContextMenuDemo}(base_demo_1.BaseDemo);exports.AddTopicContextMenuDemo=AddTopicContextMenuDemo;var changeDefaultContextMenuPlugins=[function ChangeDefaultTopicContextMenuPlugin(){return{customizeTopicContextMenu:function(props,next){var defaultMenus=next();return defaultMenus.splice(0,1),defaultMenus.splice(1,0,React.createElement(core_1.MenuItem,{icon:"group-objects",label:"Shift + A",text:"my customize menu",onClick:onClickMyMenu(props)})),React.createElement(React.Fragment,null,defaultMenus)}}}(),HotKeyPlugin()],ChangeDefaultTopicContextMenuDemo=function(_super){function ChangeDefaultTopicContextMenuDemo(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(ChangeDefaultTopicContextMenuDemo,_super),ChangeDefaultTopicContextMenuDemo.prototype.renderDiagram=function(){return React.createElement(renderer_react_1.Diagram,{model:this.state.model,onChange:this.onChange,plugins:changeDefaultContextMenuPlugins})},ChangeDefaultTopicContextMenuDemo}(base_demo_1.BaseDemo);exports.ChangeDefaultTopicContextMenuDemo=ChangeDefaultTopicContextMenuDemo,react_1.storiesOf("customize-topic-context-menu-demo",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/index.stories.tsx",[],{},"/home/zhou/coding/awehook/blink-mind/stories/customize-topic-context-menu-demo",{})).add("add-topic-context-menu",(function(){return React.createElement(AddTopicContextMenuDemo,null)}),{notes:{markdown:{en:add_topic_context_menu_en_md_1.default,zh:add_topic_context_menu_zh_md_1.default}}}).add("change-default-context-menu",(function(){return React.createElement(ChangeDefaultTopicContextMenuDemo,null)}),{notes:{markdown:{en:change_default_topic_context_menu_en_md_1.default,zh:change_default_topic_context_menu_zh_md_1.default}}})}).call(this,__webpack_require__(69)(module))},1179:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default="### Add topic context menus to default üìßcontext menus by writing a plugin.\n\nThe following example demonstrates adding a menu item. Clicking on the menu pops up the key and style of the current topic.\n\n```jsx\nfunction onClickMyMenu(props) {\n  return function() {\n    const { topicKey, controller, model } = props;\n    alert(`this topic key is ${topicKey}`);\n    const topicStyle = controller.run('getTopicStyle', props);\n    alert(`this topic style is ${JSON.stringify(topicStyle)}`);\n  };\n}\n\nfunction HotKeyPlugin() {\n  return {\n    customizeHotKeys(props, next) {\n      const hotKeysMap = next();\n      hotKeysMap.set('MY_CUSTOM', {\n        label: 'MY_CUSTOM',\n        combo: 'shift + a',\n        onKeyDown: e => {\n          onClickMyMenu(props)();\n        }\n      });\n      return hotKeysMap;\n    }\n  };\n}\n\nfunction AddTopicContextMenuPlugin() {\n  return {\n    customizeTopicContextMenu(props, next) {\n      return (\n        <>\n          {next()}\n          <MenuDivider />\n          <MenuItem\n            icon=\"group-objects\"\n            label=\"Shift + A\"\n            text=\"my customize menu\"\n            onClick={onClickMyMenu(props)}\n          />\n        </>\n      );\n    }\n  };\n}\nconst plugins = [AddTopicContextMenuPlugin(), HotKeyPlugin()];\nexport class AddTopicContextMenuDemo extends BaseDemo {\n  renderDiagram() {\n    return (\n      <Diagram\n        model={this.state.model}\n        onChange={this.onChange}\n        plugins={plugins}\n      />\n    );\n  }\n}\n```\n"},1180:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default="ÈÄöËøáÁºñÂÜôÊèí‰ª∂Âú®Á≥ªÁªüÈªòËÆ§ÁöÑ üìßcontext menu Âü∫Á°Ä‰∏äÂ¢ûÂä†ÂÜÖÂÆπ\n\n‰∏ãÈù¢ÁöÑ‰æãÂ≠êÊºîÁ§∫Â¢ûÂä†‰∏Ä‰∏™ menu È°π, ÁÇπÂáªËøô‰∏™ menu ÂºπÂá∫ÊèêÁ§∫ÂΩìÂâç topic ÁöÑ key Âíå style\n\n```jsx\nfunction onClickMyMenu(props) {\n  return function() {\n    const { topicKey, controller, model } = props;\n    alert(`this topic key is ${topicKey}`);\n    const topicStyle = controller.run('getTopicStyle', props);\n    alert(`this topic style is ${JSON.stringify(topicStyle)}`);\n  };\n}\n\nfunction HotKeyPlugin() {\n  return {\n    customizeHotKeys(props, next) {\n      const hotKeysMap = next();\n      hotKeysMap.set('MY_CUSTOM', {\n        label: 'MY_CUSTOM',\n        combo: 'shift + a',\n        onKeyDown: e => {\n          onClickMyMenu(props)();\n        }\n      });\n      return hotKeysMap;\n    }\n  };\n}\n\nfunction AddTopicContextMenuPlugin() {\n  return {\n    customizeTopicContextMenu(props, next) {\n      return (\n        <>\n          {next()}\n          <MenuDivider />\n          <MenuItem\n            icon=\"group-objects\"\n            label=\"Shift + A\"\n            text=\"my customize menu\"\n            onClick={onClickMyMenu(props)}\n          />\n        </>\n      );\n    }\n  };\n}\nconst plugins = [AddTopicContextMenuPlugin(), HotKeyPlugin()];\nexport class AddTopicContextMenuDemo extends BaseDemo {\n  renderDiagram() {\n    return (\n      <Diagram\n        model={this.state.model}\n        onChange={this.onChange}\n        plugins={plugins}\n      />\n    );\n  }\n}\n```\n"},1181:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='ÈÄöËøáÁºñÂÜôÊèí‰ª∂ÊîπÂèòÁ≥ªÁªüÈªòËÆ§ÁöÑ üìßcontext menuÔºöÂà†Èô§ edit menu È°πÔºåÂú®Á¨¨‰∫å‰∏™‰ΩçÁΩÆÂ¢ûÂä†Ëá™ÂÆö‰πâÈ°π\n\n```jsx\nfunction ChangeDefaultTopicContextMenuPlugin() {\n  return {\n    customizeTopicContextMenu(props, next) {\n      let defaultMenus = next();\n      defaultMenus.splice(0, 1);\n      defaultMenus.splice(\n        1,\n        0,\n        <MenuItem\n          icon="group-objects"\n          label="Shift + A"\n          text="my customize menu"\n          onClick={onClickMyMenu(props)}\n        />\n      );\n      return <>{defaultMenus}</>;\n    }\n  };\n}\n\nconst changeDefaultContextMenuPlugins = [\n  ChangeDefaultTopicContextMenuPlugin(),\n  HotKeyPlugin()\n];\nexport class ChangeDefaultTopicContextMenuDemo extends BaseDemo {\n  renderDiagram() {\n    return (\n      <Diagram\n        model={this.state.model}\n        onChange={this.onChange}\n        plugins={changeDefaultContextMenuPlugins}\n      />\n    );\n  }\n}\n```\n'},1182:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='### change default topic context menu\n\nChange the topic\'s default context menu by writing a plugin:\n\nDelete the edit menu item and add a custom item in the second position.\n\n```jsx\nfunction ChangeDefaultTopicContextMenuPlugin() {\n  return {\n    customizeTopicContextMenu(props, next) {\n      let defaultMenus = next();\n      defaultMenus.splice(0, 1);\n      defaultMenus.splice(\n        1,\n        0,\n        <MenuItem\n          icon="group-objects"\n          label="Shift + A"\n          text="my customize menu"\n          onClick={onClickMyMenu(props)}\n        />\n      );\n      return <>{defaultMenus}</>;\n    }\n  };\n}\n\nconst changeDefaultContextMenuPlugins = [\n  ChangeDefaultTopicContextMenuPlugin(),\n  HotKeyPlugin()\n];\nexport class ChangeDefaultTopicContextMenuDemo extends BaseDemo {\n  renderDiagram() {\n    return (\n      <Diagram\n        model={this.state.model}\n        onChange={this.onChange}\n        plugins={changeDefaultContextMenuPlugins}\n      />\n    );\n  }\n}\n```\n'},1183:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__(40),__webpack_require__(46),__webpack_require__(47),__webpack_require__(44),__webpack_require__(101),__webpack_require__(207),__webpack_require__(160),__webpack_require__(10),__webpack_require__(161),__webpack_require__(151),__webpack_require__(208),__webpack_require__(32),__webpack_require__(48),__webpack_require__(49);var react__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(0),_storybook_react__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(67),_common_base_demo__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(116),_blink_mind_renderer_react__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(59),_blink_mind_plugin_json_serializer__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(230),_blink_mind_plugin_rich_text_editor__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(169),_blink_mind_plugin_rich_text_editor__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(_blink_mind_plugin_rich_text_editor__WEBPACK_IMPORTED_MODULE_19__),styled_components__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(13),_blueprintjs_core__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(139),_blueprintjs_core__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(138),_blueprintjs_core__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(84),_blueprintjs_core__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(85),_utils__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(166),debug__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(16),debug__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(debug__WEBPACK_IMPORTED_MODULE_26__),_json_serializer_en_md__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(498),_json_serializer_zh_md__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(499);function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _templateObject5(){var data=_taggedTemplateLiteral(["\n  width: calc(100% - 18px);\n  height: calc(100% - 36px);\n"]);return _templateObject5=function(){return data},data}function _templateObject4(){var data=_taggedTemplateLiteral(["\n  width: 100%;\n  height: 100%;\n"]);return _templateObject4=function(){return data},data}function _templateObject3(){var data=_taggedTemplateLiteral(["\n  width: 26px;\n  height: 26px;\n  font-size: 26px !important;\n  &:hover {\n    color: #106ba3;\n  }\n"]);return _templateObject3=function(){return data},data}function _templateObject2(){var data=_taggedTemplateLiteral(["\n  padding: 5px;\n  width: 36px;\n  height: 36px;\n  cursor: pointer;\n  display: inline-block;\n"]);return _templateObject2=function(){return data},data}function _templateObject(){var data=_taggedTemplateLiteral(["\n  width: calc(100% - 18px);\n  height: 36px;\n  background: white;\n"]);return _templateObject=function(){return data},data}function _taggedTemplateLiteral(strings,raw){return raw||(raw=strings.slice(0)),Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var log=debug__WEBPACK_IMPORTED_MODULE_26___default()("story:json-serializer"),ToolBar=styled_components__WEBPACK_IMPORTED_MODULE_20__.default.div(_templateObject()),ToolBarItem=styled_components__WEBPACK_IMPORTED_MODULE_20__.default.div(_templateObject2()),Icon=styled_components__WEBPACK_IMPORTED_MODULE_20__.default.div(_templateObject3()),Container=styled_components__WEBPACK_IMPORTED_MODULE_20__.default.div(_templateObject4()),DiagramContainer=styled_components__WEBPACK_IMPORTED_MODULE_20__.default.div(_templateObject5()),plugins=[_blink_mind_plugin_rich_text_editor__WEBPACK_IMPORTED_MODULE_19___default()(),Object(_blink_mind_plugin_json_serializer__WEBPACK_IMPORTED_MODULE_18__.JsonSerializerPlugin)()],_ref=react__WEBPACK_IMPORTED_MODULE_14__.createElement(_blueprintjs_core__WEBPACK_IMPORTED_MODULE_21__.a,null),JsonSerializerDemo=function(_BaseDemo){function JsonSerializerDemo(_props){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,JsonSerializerDemo),_this=function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}(this,_getPrototypeOf(JsonSerializerDemo).call(this,_props)),_defineProperty(_assertThisInitialized(_this),"onClickOpenFile",(function(){var input=document.createElement("input"),controller=_this.diagram.getDiagramProps().controller;input.type="file",input.accept=".json",log("add onchange"),input.addEventListener("change",(function(evt){var file=evt.target.files[0],fr=new FileReader;log("add fr onload"),fr.onload=function(evt){var txt=evt.target.result,obj=JSON.parse(txt);log("OpenFile:",obj);var model=controller.run("deserializeModel",{controller:controller,obj:obj});log("OpenFile:",model),_this.setState({model:model})},fr.readAsText(file)})),input.click()})),_defineProperty(_assertThisInitialized(_this),"onClickExport",(function(){_this.setState({showDialog:!0})})),_defineProperty(_assertThisInitialized(_this),"handleDialogClose",(function(){_this.setState({showDialog:!1})})),_defineProperty(_assertThisInitialized(_this),"onClickExportJson",(function(){var props=_this.diagram.getDiagramProps(),json=props.controller.run("serializeModel",props),jsonStr=JSON.stringify(json),url="data:text/plain,".concat(encodeURIComponent(jsonStr));Object(_utils__WEBPACK_IMPORTED_MODULE_25__.downloadFile)(url,"example.json"),_this.setState({showDialog:!1})})),_defineProperty(_assertThisInitialized(_this),"diagram",void 0),_defineProperty(_assertThisInitialized(_this),"diagramRef",(function(e){_this.diagram=e})),_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(JsonSerializerDemo,_BaseDemo),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(JsonSerializerDemo,[{key:"renderToolbar",value:function renderToolbar(){return react__WEBPACK_IMPORTED_MODULE_14__.createElement(ToolBar,null,react__WEBPACK_IMPORTED_MODULE_14__.createElement(ToolBarItem,{onClick:this.onClickOpenFile},react__WEBPACK_IMPORTED_MODULE_14__.createElement(Icon,{className:Object(_blink_mind_renderer_react__WEBPACK_IMPORTED_MODULE_17__.iconClassName)("openfile")})),react__WEBPACK_IMPORTED_MODULE_14__.createElement(ToolBarItem,{onClick:this.onClickExport},react__WEBPACK_IMPORTED_MODULE_14__.createElement(Icon,{className:Object(_blink_mind_renderer_react__WEBPACK_IMPORTED_MODULE_17__.iconClassName)("export")})))}},{key:"renderDialog",value:function renderDialog(){return react__WEBPACK_IMPORTED_MODULE_14__.createElement(_blueprintjs_core__WEBPACK_IMPORTED_MODULE_22__.a,{onClose:this.handleDialogClose,isOpen:this.state.showDialog,autoFocus:!0,enforceFocus:!0,usePortal:!0,title:"Please select export file format"},react__WEBPACK_IMPORTED_MODULE_14__.createElement(_blueprintjs_core__WEBPACK_IMPORTED_MODULE_23__.a,null,react__WEBPACK_IMPORTED_MODULE_14__.createElement(_blueprintjs_core__WEBPACK_IMPORTED_MODULE_24__.a,{text:"JSON(.json)",onClick:this.onClickExportJson}),_ref))}},{key:"renderDiagram",value:function renderDiagram(){return react__WEBPACK_IMPORTED_MODULE_14__.createElement(Container,null,this.renderToolbar(),this.renderDialog(),react__WEBPACK_IMPORTED_MODULE_14__.createElement(DiagramContainer,null,react__WEBPACK_IMPORTED_MODULE_14__.createElement(_blink_mind_renderer_react__WEBPACK_IMPORTED_MODULE_17__.Diagram,{model:this.state.model,onChange:this.onChange,plugins:plugins,ref:this.diagramRef})))}}]),JsonSerializerDemo}(_common_base_demo__WEBPACK_IMPORTED_MODULE_16__.BaseDemo),_ref2=react__WEBPACK_IMPORTED_MODULE_14__.createElement(JsonSerializerDemo,null);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_15__.storiesOf)("serializer-demo",module).add("json-serializer",(function(){return _ref2}),{notes:{markdown:{en:_json_serializer_en_md__WEBPACK_IMPORTED_MODULE_27__.a,zh:_json_serializer_zh_md__WEBPACK_IMPORTED_MODULE_28__.a}}})}.call(this,__webpack_require__(249)(module))},1184:function(module,exports,__webpack_require__){"use strict";(function(module){var extendStatics,__makeTemplateObject=this&&this.__makeTemplateObject||function(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked},__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var templateObject_1,templateObject_2,templateObject_3,templateObject_4,templateObject_5,withSourceLoader=__webpack_require__(135).withSource,__STORY__="import * as React from 'react';\nimport { storiesOf } from '@storybook/react';\nimport { BaseDemo } from '../common/base-demo';\nimport { Diagram, iconClassName, Icon } from '@blink-mind/renderer-react';\nimport { ThemeSelectorPlugin } from '@blink-mind/plugin-theme-selector';\nimport { Popover, Menu, MenuItem } from '@blueprintjs/core';\nimport styled from 'styled-components';\nimport { DiagramLayoutType } from '@blink-mind/core';\n\nconst ToolBar = styled.div`\n  width: calc(100% - 18px);\n  height: 36px;\n  background: white;\n`;\n\nconst ToolBarItem = styled.div`\n  padding: 5px;\n  width: 36px;\n  height: 36px;\n  cursor: pointer;\n  display: inline-block;\n`;\n\nconst ToolBarIcon = styled.div`\n  width: 26px;\n  height: 26px;\n  font-size: 26px !important;\n  &:hover {\n    color: #106ba3;\n  }\n`;\n\nconst Container = styled.div`\n  width: 100%;\n  height: 100%;\n`;\n\nconst DiagramContainer = styled.div`\n  width: calc(100% - 18px);\n  height: calc(100% - 36px);\n`;\n\nconst plugins = [ThemeSelectorPlugin()];\nclass ThemeSelectorDemo extends BaseDemo {\n  themeIndex = 1;\n  onClickChangeTheme = () => {\n    const props = this.diagram.getDiagramProps();\n    const { controller } = props;\n    let themeKeys = controller.run('getAllThemes', props).keys();\n    themeKeys = Array.from(themeKeys);\n    controller.run('setTheme', {\n      ...props,\n      themeKey: themeKeys[this.themeIndex++ % themeKeys.length]\n    });\n  };\n  onClickSetLayout = layoutDir => e => {\n    const props = this.diagram.getDiagramProps();\n    const { controller } = props;\n    controller.run('setLayoutDir', {\n      ...props,\n      layoutDir\n    });\n  };\n  renderToolbar() {\n    const layoutDirs = [\n      [\n        DiagramLayoutType.LEFT_AND_RIGHT,\n        'Left And Right',\n        'layout-left-and-right'\n      ],\n      [DiagramLayoutType.LEFT_TO_RIGHT, 'Only Right', 'layout-right'],\n      [DiagramLayoutType.RIGHT_TO_LEFT, 'Only Left', 'layout-left']\n    ];\n    return (\n      <ToolBar>\n        <ToolBarItem onClick={this.onClickChangeTheme}>\n          <ToolBarIcon className={iconClassName('theme')} />\n        </ToolBarItem>\n        <ToolBarItem>\n          <Popover enforceFocus={false}>\n            <ToolBarIcon className={iconClassName('layout-left-and-right')} />\n            <Menu>\n              {layoutDirs.map(dir => (\n                <MenuItem\n                  key={dir[1]}\n                  icon={Icon(dir[2])}\n                  text={dir[1]}\n                  onClick={this.onClickSetLayout(dir[0])}\n                />\n              ))}\n            </Menu>\n          </Popover>\n        </ToolBarItem>\n      </ToolBar>\n    );\n  }\n  diagram: Diagram;\n  diagramRef = e => {\n    this.diagram = e;\n  };\n  renderDiagram() {\n    return (\n      <Container>\n        {this.renderToolbar()}\n        <DiagramContainer>\n          <Diagram\n            model={this.state.model}\n            onChange={this.onChange}\n            plugins={plugins}\n            ref={this.diagramRef}\n          />\n        </DiagramContainer>\n      </Container>\n    );\n  }\n}\n\nstoriesOf('theme-selector-demo', module).add(\n  'theme-selector',\n  () => <ThemeSelectorDemo />,\n  {}\n);\n",__ADDS_MAP__={"theme-selector-demo--theme-selector":{startLoc:{col:2,line:119},endLoc:{col:4,line:121},startBody:{col:2,line:120},endBody:{col:29,line:120}}},React=__webpack_require__(0),react_1=__webpack_require__(67),base_demo_1=__webpack_require__(116),renderer_react_1=__webpack_require__(59),plugin_theme_selector_1=__webpack_require__(304),core_1=__webpack_require__(23),styled_components_1=__webpack_require__(13),core_2=__webpack_require__(21),ToolBar=styled_components_1.default.div.withConfig({displayName:"ToolBar",componentId:"sc-ibs0o7"})(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  width: calc(100% - 18px);\n  height: 36px;\n  background: white;\n"],["\n  width: calc(100% - 18px);\n  height: 36px;\n  background: white;\n"]))),ToolBarItem=styled_components_1.default.div.withConfig({displayName:"ToolBarItem",componentId:"sc-haqcxg"})(templateObject_2||(templateObject_2=__makeTemplateObject(["\n  padding: 5px;\n  width: 36px;\n  height: 36px;\n  cursor: pointer;\n  display: inline-block;\n"],["\n  padding: 5px;\n  width: 36px;\n  height: 36px;\n  cursor: pointer;\n  display: inline-block;\n"]))),ToolBarIcon=styled_components_1.default.div.withConfig({displayName:"ToolBarIcon",componentId:"sc-1fylgsn"})(templateObject_3||(templateObject_3=__makeTemplateObject(["\n  width: 26px;\n  height: 26px;\n  font-size: 26px !important;\n  &:hover {\n    color: #106ba3;\n  }\n"],["\n  width: 26px;\n  height: 26px;\n  font-size: 26px !important;\n  &:hover {\n    color: #106ba3;\n  }\n"]))),Container=styled_components_1.default.div.withConfig({displayName:"Container",componentId:"sc-138fea4"})(templateObject_4||(templateObject_4=__makeTemplateObject(["\n  width: 100%;\n  height: 100%;\n"],["\n  width: 100%;\n  height: 100%;\n"]))),DiagramContainer=styled_components_1.default.div.withConfig({displayName:"DiagramContainer",componentId:"sc-skrzor"})(templateObject_5||(templateObject_5=__makeTemplateObject(["\n  width: calc(100% - 18px);\n  height: calc(100% - 36px);\n"],["\n  width: calc(100% - 18px);\n  height: calc(100% - 36px);\n"]))),plugins=[plugin_theme_selector_1.ThemeSelectorPlugin()],ThemeSelectorDemo=function(_super){function ThemeSelectorDemo(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.themeIndex=1,_this.onClickChangeTheme=function(){var props=_this.diagram.getDiagramProps(),controller=props.controller,themeKeys=controller.run("getAllThemes",props).keys();themeKeys=Array.from(themeKeys),controller.run("setTheme",__assign(__assign({},props),{themeKey:themeKeys[_this.themeIndex++%themeKeys.length]}))},_this.onClickSetLayout=function(layoutDir){return function(e){var props=_this.diagram.getDiagramProps();props.controller.run("setLayoutDir",__assign(__assign({},props),{layoutDir:layoutDir}))}},_this.diagramRef=function(e){_this.diagram=e},_this}return __extends(ThemeSelectorDemo,_super),ThemeSelectorDemo.prototype.renderToolbar=function(){var _this=this,layoutDirs=[[core_2.DiagramLayoutType.LEFT_AND_RIGHT,"Left And Right","layout-left-and-right"],[core_2.DiagramLayoutType.LEFT_TO_RIGHT,"Only Right","layout-right"],[core_2.DiagramLayoutType.RIGHT_TO_LEFT,"Only Left","layout-left"]];return React.createElement(ToolBar,null,React.createElement(ToolBarItem,{onClick:this.onClickChangeTheme},React.createElement(ToolBarIcon,{className:renderer_react_1.iconClassName("theme")})),React.createElement(ToolBarItem,null,React.createElement(core_1.Popover,{enforceFocus:!1},React.createElement(ToolBarIcon,{className:renderer_react_1.iconClassName("layout-left-and-right")}),React.createElement(core_1.Menu,null,layoutDirs.map((function(dir){return React.createElement(core_1.MenuItem,{key:dir[1],icon:renderer_react_1.Icon(dir[2]),text:dir[1],onClick:_this.onClickSetLayout(dir[0])})}))))))},ThemeSelectorDemo.prototype.renderDiagram=function(){return React.createElement(Container,null,this.renderToolbar(),React.createElement(DiagramContainer,null,React.createElement(renderer_react_1.Diagram,{model:this.state.model,onChange:this.onChange,plugins:plugins,ref:this.diagramRef})))},ThemeSelectorDemo}(base_demo_1.BaseDemo);react_1.storiesOf("theme-selector-demo",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/index.stories.tsx",[],{},"/home/zhou/coding/awehook/blink-mind/stories/theme-selector-demo",{})).add("theme-selector",(function(){return React.createElement(ThemeSelectorDemo,null)}),{})}).call(this,__webpack_require__(69)(module))},1185:function(module,exports,__webpack_require__){"use strict";(function(module){var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var withSourceLoader=__webpack_require__(135).withSource,__STORY__="import * as React from 'react';\nimport { storiesOf } from '@storybook/react';\nimport { BaseDemo } from '../common/base-demo';\nimport { Diagram } from '@blink-mind/renderer-react';\nimport richTextEditorPlugin from '@blink-mind/plugin-rich-text-editor';\n\n// @ts-ignore\nimport simpleTextEditorMdZh from './simple-text-editor-zh.md';\n// @ts-ignore\nimport simpleTextEditorMdEn from './simple-text-editor-en.md';\n// @ts-ignore\nimport richTextEditorMdZh from './plugin-rich-text-editor-zh.md';\n// @ts-ignore\nimport richTextEditorMdEn from './plugin-rich-text-editor-en.md';\n\nexport class SimpleTopicContentEditorDemo extends BaseDemo {\n  renderDiagram() {\n    return <Diagram model={this.state.model} onChange={this.onChange} />;\n  }\n}\n\nconst plugins = [richTextEditorPlugin()];\n\nexport class RichTextEditorPluginDemo extends BaseDemo {\n  renderDiagram() {\n    return (\n      <Diagram\n        model={this.state.model}\n        onChange={this.onChange}\n        plugins={plugins}\n      />\n    );\n  }\n}\n\nstoriesOf('topic-content-editor-demo', module)\n  .add('simple-text-editor', () => <SimpleTopicContentEditorDemo />, {\n    notes: {\n      markdown: {\n        en: simpleTextEditorMdEn,\n        zh: simpleTextEditorMdZh\n      }\n    }\n  })\n  .add('rich-text-editor', () => <RichTextEditorPluginDemo />, {\n    notes: {\n      markdown: {\n        en: richTextEditorMdEn,\n        zh: richTextEditorMdZh\n      }\n    }\n  });\n",__ADDS_MAP__={"topic-content-editor-demo--rich-text-editor":{startLoc:{col:7,line:45},endLoc:{col:3,line:52},startBody:{col:27,line:45},endBody:{col:61,line:45}},"topic-content-editor-demo--simple-text-editor":{startLoc:{col:7,line:37},endLoc:{col:3,line:44},startBody:{col:29,line:37},endBody:{col:67,line:37}}},React=__webpack_require__(0),react_1=__webpack_require__(67),base_demo_1=__webpack_require__(116),renderer_react_1=__webpack_require__(59),plugin_rich_text_editor_1=__webpack_require__(169),simple_text_editor_zh_md_1=__webpack_require__(1186),simple_text_editor_en_md_1=__webpack_require__(1187),plugin_rich_text_editor_zh_md_1=__webpack_require__(1188),plugin_rich_text_editor_en_md_1=__webpack_require__(1189),SimpleTopicContentEditorDemo=function(_super){function SimpleTopicContentEditorDemo(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(SimpleTopicContentEditorDemo,_super),SimpleTopicContentEditorDemo.prototype.renderDiagram=function(){return React.createElement(renderer_react_1.Diagram,{model:this.state.model,onChange:this.onChange})},SimpleTopicContentEditorDemo}(base_demo_1.BaseDemo);exports.SimpleTopicContentEditorDemo=SimpleTopicContentEditorDemo;var plugins=[plugin_rich_text_editor_1.default()],RichTextEditorPluginDemo=function(_super){function RichTextEditorPluginDemo(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(RichTextEditorPluginDemo,_super),RichTextEditorPluginDemo.prototype.renderDiagram=function(){return React.createElement(renderer_react_1.Diagram,{model:this.state.model,onChange:this.onChange,plugins:plugins})},RichTextEditorPluginDemo}(base_demo_1.BaseDemo);exports.RichTextEditorPluginDemo=RichTextEditorPluginDemo,react_1.storiesOf("topic-content-editor-demo",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/index.stories.tsx",[],{},"/home/zhou/coding/awehook/blink-mind/stories/topic-content-editor-demo",{})).add("simple-text-editor",(function(){return React.createElement(SimpleTopicContentEditorDemo,null)}),{notes:{markdown:{en:simple_text_editor_en_md_1.default,zh:simple_text_editor_zh_md_1.default}}}).add("rich-text-editor",(function(){return React.createElement(RichTextEditorPluginDemo,null)}),{notes:{markdown:{en:plugin_rich_text_editor_en_md_1.default,zh:plugin_rich_text_editor_zh_md_1.default}}})}).call(this,__webpack_require__(69)(module))},1186:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default="blink-mind ÈªòËÆ§Êèê‰æõÁöÑ topic editor ÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑÊñáÊú¨ÁºñËæëÂô®,‰∏çÊîØÊåÅÂØåÊñáÊú¨ÁºñËæë„ÄÇ\n"},1187:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default="The topic editor provided by blink-mind by default is a simple text editor that does not support rich text editing.\n"},1188:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default="blink-mind ÈªòËÆ§Êèê‰æõÁöÑ topic editor ÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑÊñáÊú¨ÁºñËæëÂô®,‰∏çÊîØÊåÅÂØåÊñáÊú¨ÁºñËæë„ÄÇ\n\nÂ¶ÇÊûúÊÉ≥Ë¶Å topic ËäÇÁÇπ‰ª•Âèä notes ÁöÑÊñáÊú¨ÁºñËæëÂô®ÊîØÊåÅÂØåÊñáÊú¨ÁºñËæëÔºåÂèØ‰ª•‰ΩøÁî®Ê°ÜÊû∂Êèê‰æõÁöÑ plugin-rich-text-editor.\n\n```jsx\nimport richTextEditorPlugin from '@blink-mind/plugin-rich-text-editor';\nconst plugins = [richTextEditorPlugin()];\n\nexport class RichTextEditorPluginDemo extends BaseDemo {\n  renderDiagram() {\n    return (\n      <Diagram\n        model={this.state.model}\n        onChange={this.onChange}\n        plugins={plugins}\n      />\n    );\n  }\n}\n```\n\nÊ°ÜÊû∂Êèê‰æõÁöÑ plugin-rich-text-editor ÁöÑ‰ª£Á†ÅÂÆûÁé∞Â¶Ç‰∏ãÔºö\n\n```jsx\nimport * as React from 'react';\nimport { TopicContentEditor } from '../components/topic-content-editor';\nimport { TopicDescEditor } from '../components/topic-desc-editor';\nexport default function RichTextEditorPlugin() {\n  return {\n    renderTopicContentEditor(props) {\n      return <TopicContentEditor {...props} />;\n    },\n\n    renderTopicDescEditor(props) {\n      return <TopicDescEditor {...props} />;\n    }\n  };\n}\n```\n\nÂÖ∑‰ΩìÁöÑ‰ª£Á†ÅÂÆûÁé∞Âú®[ËøôÈáå](https://github.com/awehook/blink-mind/tree/master/packages/plugin-rich-text-editor/src/components),\n\nÂ¶ÇÊûúÊàë‰ª¨ÊÉ≥Ëá™ÂÆö‰πâ topic ÁöÑÊñáÊú¨ÁºñËæëÂô®ÔºåÂèØ‰ª•Ëá™Â∑±ÂÜô‰∏Ä‰∏™ plugin, Âú®ÈáåÈù¢ÂÆûÁé∞ renderTopicContentEditor Âíå renderTopicDescEditor ÂáΩÊï∞\n"},1189:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default="The topic editor provided by blink-mind by default is a simple text editor that does not support rich text editing.\n\nIf you want the topic editor and the notes editor to support rich text editing, you can use the plugin-rich-text-editor provided by the framework.\n\n```jsx\nimport richTextEditorPlugin from '@blink-mind/plugin-rich-text-editor';\nconst plugins = [richTextEditorPlugin()];\n\nexport class RichTextEditorPluginDemo extends BaseDemo {\n  renderDiagram() {\n    return (\n      <Diagram\n        model={this.state.model}\n        onChange={this.onChange}\n        plugins={plugins}\n      />\n    );\n  }\n}\n```\n\nThe code provided by the framework for plugin-rich-text-editor is implemented as follows:\n\n```jsx\nimport * as React from 'react';\nimport { TopicContentEditor } from '../components/topic-content-editor';\nimport { TopicDescEditor } from '../components/topic-desc-editor';\nexport default function RichTextEditorPlugin() {\n  return {\n    renderTopicContentEditor(props) {\n      return <TopicContentEditor {...props} />;\n    },\n\n    renderTopicDescEditor(props) {\n      return <TopicDescEditor {...props} />;\n    }\n  };\n}\n```\n\nThe specific code is implemented in [here](https://github.com/awehook/blink-mind/tree/master/packages/plugin-rich-text-editor/src/components),\n\nIf we want to customize the text editor of the topic, we can write a plugin ourselves, and implement the renderTopicContentEditor and renderTopicDescEditor functions in it.\n"},1190:function(module,exports,__webpack_require__){"use strict";(function(module){var extendStatics,__makeTemplateObject=this&&this.__makeTemplateObject||function(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked},__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var templateObject_1,templateObject_2,templateObject_3,templateObject_4,templateObject_5,withSourceLoader=__webpack_require__(135).withSource,__STORY__="import * as React from 'react';\nimport { storiesOf } from '@storybook/react';\nimport { BaseDemo } from '../common/base-demo';\nimport { Diagram, iconClassName } from '@blink-mind/renderer-react';\nimport styled from 'styled-components';\n\nconst ToolBar = styled.div`\n  width: calc(100% - 18px);\n  height: 36px;\n  background: white;\n`;\n\nconst ToolBarItem = styled.div`\n  padding: 5px;\n  width: 36px;\n  height: 36px;\n  cursor: ${props => (props.enable ? 'pointer' : 'not-allowed')};\n  color: ${props => (props.enable ? 'black' : 'grey')};\n  ${props =>\n    props.enable &&\n    `&:hover {\n    color: #106ba3;\n  }`};\n  display: inline-block;\n`;\n\nconst Icon = styled.div`\n  width: 26px;\n  height: 26px;\n  font-size: 26px !important;\n`;\n\nconst Container = styled.div`\n  width: 100%;\n  height: 100%;\n`;\n\nconst DiagramContainer = styled.div`\n  width: calc(100% - 18px);\n  height: calc(100% - 36px);\n`;\n\nclass UndoRedoDemo extends BaseDemo {\n  onClickUndo = () => {\n    const props = this.diagram.getDiagramProps();\n    const { controller } = props;\n    controller.run('undo', props);\n  };\n\n  onClickRedo = () => {\n    const props = this.diagram.getDiagramProps();\n    const { controller } = props;\n    controller.run('redo', props);\n  };\n\n  renderToolbar() {\n    const props = this.diagram.getDiagramProps();\n    const { controller } = props;\n    const canUndo = controller.run('canUndo', props);\n    const canRedo = controller.run('canRedo', props);\n\n    return (\n      <ToolBar>\n        <ToolBarItem onClick={this.onClickUndo} enable={canUndo}>\n          <Icon className={iconClassName('undo')} />\n        </ToolBarItem>\n        <ToolBarItem onClick={this.onClickRedo} enable={canRedo}>\n          <Icon className={iconClassName('redo')} />\n        </ToolBarItem>\n      </ToolBar>\n    );\n  }\n  diagram: Diagram;\n  diagramRef = e => {\n    this.diagram = e;\n    this.setState({});\n  };\n  renderDiagram() {\n    return (\n      <Container>\n        {this.diagram && this.renderToolbar()}\n        <DiagramContainer>\n          <Diagram\n            model={this.state.model}\n            onChange={this.onChange}\n            ref={this.diagramRef}\n          />\n        </DiagramContainer>\n      </Container>\n    );\n  }\n}\n\nstoriesOf('undo-redo-demo', module).add(\n  'undo-redo',\n  () => <UndoRedoDemo />,\n  {}\n);\n",__ADDS_MAP__={"undo-redo-demo--undo-redo":{startLoc:{col:2,line:95},endLoc:{col:4,line:97},startBody:{col:2,line:96},endBody:{col:24,line:96}}},React=__webpack_require__(0),react_1=__webpack_require__(67),base_demo_1=__webpack_require__(116),renderer_react_1=__webpack_require__(59),styled_components_1=__webpack_require__(13),ToolBar=styled_components_1.default.div.withConfig({displayName:"ToolBar",componentId:"sc-1ejnq4o"})(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  width: calc(100% - 18px);\n  height: 36px;\n  background: white;\n"],["\n  width: calc(100% - 18px);\n  height: 36px;\n  background: white;\n"]))),ToolBarItem=styled_components_1.default.div.withConfig({displayName:"ToolBarItem",componentId:"sc-bffgc6"})(templateObject_2||(templateObject_2=__makeTemplateObject(["\n  padding: 5px;\n  width: 36px;\n  height: 36px;\n  cursor: ",";\n  color: ",";\n  ",";\n  display: inline-block;\n"],["\n  padding: 5px;\n  width: 36px;\n  height: 36px;\n  cursor: ",";\n  color: ",";\n  ",";\n  display: inline-block;\n"])),(function(props){return props.enable?"pointer":"not-allowed"}),(function(props){return props.enable?"black":"grey"}),(function(props){return props.enable&&"&:hover {\n    color: #106ba3;\n  }"})),Icon=styled_components_1.default.div.withConfig({displayName:"Icon",componentId:"sc-x0ja3g"})(templateObject_3||(templateObject_3=__makeTemplateObject(["\n  width: 26px;\n  height: 26px;\n  font-size: 26px !important;\n"],["\n  width: 26px;\n  height: 26px;\n  font-size: 26px !important;\n"]))),Container=styled_components_1.default.div.withConfig({displayName:"Container",componentId:"sc-znnk04"})(templateObject_4||(templateObject_4=__makeTemplateObject(["\n  width: 100%;\n  height: 100%;\n"],["\n  width: 100%;\n  height: 100%;\n"]))),DiagramContainer=styled_components_1.default.div.withConfig({displayName:"DiagramContainer",componentId:"sc-1yhveh5"})(templateObject_5||(templateObject_5=__makeTemplateObject(["\n  width: calc(100% - 18px);\n  height: calc(100% - 36px);\n"],["\n  width: calc(100% - 18px);\n  height: calc(100% - 36px);\n"]))),UndoRedoDemo=function(_super){function UndoRedoDemo(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.onClickUndo=function(){var props=_this.diagram.getDiagramProps();props.controller.run("undo",props)},_this.onClickRedo=function(){var props=_this.diagram.getDiagramProps();props.controller.run("redo",props)},_this.diagramRef=function(e){_this.diagram=e,_this.setState({})},_this}return __extends(UndoRedoDemo,_super),UndoRedoDemo.prototype.renderToolbar=function(){var props=this.diagram.getDiagramProps(),controller=props.controller,canUndo=controller.run("canUndo",props),canRedo=controller.run("canRedo",props);return React.createElement(ToolBar,null,React.createElement(ToolBarItem,{onClick:this.onClickUndo,enable:canUndo},React.createElement(Icon,{className:renderer_react_1.iconClassName("undo")})),React.createElement(ToolBarItem,{onClick:this.onClickRedo,enable:canRedo},React.createElement(Icon,{className:renderer_react_1.iconClassName("redo")})))},UndoRedoDemo.prototype.renderDiagram=function(){return React.createElement(Container,null,this.diagram&&this.renderToolbar(),React.createElement(DiagramContainer,null,React.createElement(renderer_react_1.Diagram,{model:this.state.model,onChange:this.onChange,ref:this.diagramRef})))},UndoRedoDemo}(base_demo_1.BaseDemo);react_1.storiesOf("undo-redo-demo",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/index.stories.tsx",[],{},"/home/zhou/coding/awehook/blink-mind/stories/undo-redo-demo",{})).add("undo-redo",(function(){return React.createElement(UndoRedoDemo,null)}),{})}).call(this,__webpack_require__(69)(module))},136:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TopicDirection={LEFT:"L",RIGHT:"R",BOTTOM:"B",MAIN:"M"},function(DiagramLayoutType){DiagramLayoutType[DiagramLayoutType.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",DiagramLayoutType[DiagramLayoutType.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",DiagramLayoutType[DiagramLayoutType.LEFT_AND_RIGHT=2]="LEFT_AND_RIGHT",DiagramLayoutType[DiagramLayoutType.TOP_TO_BOTTOM=3]="TOP_TO_BOTTOM"}(exports.DiagramLayoutType||(exports.DiagramLayoutType={})),exports.TopicVisualLevel={ROOT:0,PRIMARY:1,NORMAL:2},exports.BlockType={CONTENT:"CONTENT",DESC:"DESC"},exports.FocusMode={NORMAL:"NORMAL",EDITING_CONTENT:"EDITING_CONTENT",EDITING_DESC:"EDITING_DESC",SHOW_POPUP:"SHOW_POPUP",DRAGGING:"DRAGGING"},exports.TopicRelationship={ANCESTOR:"ANCESTOR",DESCENDANT:"DESCENDANT",SIBLING:"SIBLING",NONE:"NONE"},exports.OpType={TOGGLE_COLLAPSE:"TOGGLE_COLLAPSE",COLLAPSE_ALL:"COLLAPSE_ALL",EXPAND_ALL:"EXPAND_ALL",ADD_CHILD:"ADD_CHILD",ADD_SIBLING:"ADD_SIBLING",DELETE_TOPIC:"DELETE_TOPIC",FOCUS_TOPIC:"FOCUS_TOPIC",SET_STYLE:"SET_STYLE",SET_TOPIC_CONTENT:"SET_TOPIC_CONTENT",SET_TOPIC_DESC:"SET_TOPIC_DESC",START_EDITING_CONTENT:"START_EDITING_CONTENT",START_EDITING_DESC:"START_EDITING_DESC",DRAG_AND_DROP:"DRAG_AND_DROP",SET_EDITOR_ROOT:"SET_EDITOR_ROOT"}},137:function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(1173)),__export(__webpack_require__(1174)),__export(__webpack_require__(1175)),__export(__webpack_require__(1176)),__export(__webpack_require__(1177))},162:function(module,exports,__webpack_require__){"use strict";var __makeTemplateObject=this&&this.__makeTemplateObject||function(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked},__read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread=this&&this.__spread||function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar};Object.defineProperty(exports,"__esModule",{value:!0});var templateObject_1,templateObject_2,templateObject_3,templateObject_4,templateObject_5,core_1=__webpack_require__(23),select_1=__webpack_require__(1191),React=__webpack_require__(0),styled_components_1=__webpack_require__(13),common_1=__webpack_require__(52);exports.SettingTitle=styled_components_1.default.div.withConfig({displayName:"SettingTitle",componentId:"sc-p6q2j7"})(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  margin-top: 10px;\n  margin-bottom: 5px;\n  font-weight: bold;\n"],["\n  margin-top: 10px;\n  margin-bottom: 5px;\n  font-weight: bold;\n"]))),exports.SettingItem=styled_components_1.default.span.withConfig({displayName:"SettingItem",componentId:"sc-1bynfxb"})(templateObject_2||(templateObject_2=__makeTemplateObject(["\n  margin: 0px 10px 0px 0px;\n"],["\n  margin: 0px 10px 0px 0px;\n"]))),exports.SettingRow=styled_components_1.default(common_1.Flex).withConfig({displayName:"SettingRow",componentId:"sc-1j4wbu6"})(templateObject_3||(templateObject_3=__makeTemplateObject(["\n  margin: 5px 0;\n"],["\n  margin: 5px 0;\n"]))),exports.SettingGroup=function(props){return React.createElement("div",null,props.children,React.createElement(core_1.Divider,{style:{margin:"10px 0"}}))},exports.ColorBar=styled_components_1.default.div.withConfig({displayName:"ColorBar",componentId:"sc-l7vauo"})(templateObject_4||(templateObject_4=__makeTemplateObject(["\n  height: 3px;\n  width: 80%;\n  margin-left: 10%;\n  margin-right: 10%;\n  margin-bottom: 2px;\n  background: ",";\n"],["\n  height: 3px;\n  width: 80%;\n  margin-left: 10%;\n  margin-right: 10%;\n  margin-bottom: 2px;\n  background: ",";\n"])),(function(props){return props.color})),exports.WithBorder=styled_components_1.default.div.withConfig({displayName:"WithBorder",componentId:"sc-106esk7"})(templateObject_5||(templateObject_5=__makeTemplateObject(["\n  border: 1px solid grey;\n  cursor: pointer;\n  font-weight: bold;\n"],["\n  border: 1px solid grey;\n  cursor: pointer;\n  font-weight: bold;\n"]))),exports.renderItem=function(unit){return function(width,_a){var handleClick=_a.handleClick;_a.modifiers,_a.query;return React.createElement(core_1.MenuItem,{text:""+width+unit,key:width,onClick:handleClick})}},exports.PxSelect=select_1.Select.ofType(),exports.borderWidthItems=__spread(Array(7).keys())},166:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(21);exports.generateSimpleModel=function generateSimpleModel(){return core_1.Model.create({rootTopicKey:"root",topics:[{key:"root",blocks:[{type:"CONTENT",data:"MainTopic"}],subKeys:["sub1","sub2"]},{key:"sub1",parentKey:"root",blocks:[{type:"CONTENT",data:"SubTopic1"}],subKeys:["sub1_1","sub1_2"],collapse:!1},{key:"sub1_1",parentKey:"sub1",blocks:[{type:"CONTENT",data:"SubTopic"}],collapse:!1},{key:"sub1_2",parentKey:"sub1",blocks:[{type:"CONTENT",data:"SubTopic"}],collapse:!1},{key:"sub2",subKeys:["sub2_1","sub2_2"],parentKey:"root",blocks:[{type:"CONTENT",data:"SubTopic2"}]},{key:"sub2_1",parentKey:"sub2",blocks:[{type:"CONTENT",data:"SubTopic"}],collapse:!1},{key:"sub2_2",parentKey:"sub2",blocks:[{type:"CONTENT",data:"SubTopic"}],collapse:!1}]})},exports.downloadFile=function downloadFile(url,filename){var link=document.createElement("a");link.href=url,link.download=filename,link.click()}},169:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var plugins_1=__webpack_require__(974);exports.default=plugins_1.default},21:function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0});var controller_1=__webpack_require__(796);exports.Controller=controller_1.Controller;var models_1=__webpack_require__(422);exports.models=models_1.default;var modifiers_1=__webpack_require__(427);exports.ModelModifier=modifiers_1.default,__export(__webpack_require__(136)),__export(__webpack_require__(422)),__export(__webpack_require__(803))},230:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(973))},288:function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var immutable_1=__webpack_require__(3),Block=function(_super){function Block(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Block,_super),Object.defineProperty(Block.prototype,"data",{get:function(){return this.get("data")},enumerable:!0,configurable:!0}),Object.defineProperty(Block.prototype,"type",{get:function(){return this.get("type")},enumerable:!0,configurable:!0}),Block.create=function(obj){return new Block(obj)},Block.createList=function(obj){if(immutable_1.List.isList(obj)||Array.isArray(obj))return immutable_1.List(obj.map(Block.create));throw new Error("Block.createList only accepts Array or List, but you passed it: "+obj)},Block}(immutable_1.Record({type:null,key:null,data:null}));exports.Block=Block},289:function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var immutable_1=__webpack_require__(3),types_1=__webpack_require__(136),block_1=__webpack_require__(288),Topic=function(_super){function Topic(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Topic,_super),Object.defineProperty(Topic.prototype,"key",{get:function(){return this.get("key")},enumerable:!0,configurable:!0}),Object.defineProperty(Topic.prototype,"parentKey",{get:function(){return this.get("parentKey")},enumerable:!0,configurable:!0}),Object.defineProperty(Topic.prototype,"collapse",{get:function(){return this.get("collapse")},enumerable:!0,configurable:!0}),Object.defineProperty(Topic.prototype,"subKeys",{get:function(){return this.get("subKeys")},enumerable:!0,configurable:!0}),Object.defineProperty(Topic.prototype,"blocks",{get:function(){return this.get("blocks")},enumerable:!0,configurable:!0}),Object.defineProperty(Topic.prototype,"relations",{get:function(){return this.get("relations")},enumerable:!0,configurable:!0}),Object.defineProperty(Topic.prototype,"style",{get:function(){return this.get("style")},enumerable:!0,configurable:!0}),Topic.prototype.getBlock=function(type){var index=this.blocks.findIndex((function(b){return b.type===type}));return-1===index?{index:index,block:null}:{index:index,block:this.blocks.get(index)}},Topic.fromJSON=function(obj){var key=obj.key,_a=obj.parentKey,parentKey=void 0===_a?null:_a,blocks=obj.blocks,_b=obj.subKeys,subKeys=void 0===_b?[]:_b,_c=obj.collapse;return new Topic({key:key,parentKey:parentKey,collapse:void 0!==_c&&_c,subKeys:immutable_1.List(subKeys),blocks:block_1.Block.createList(blocks)})},Topic.create=function(_a){var key=_a.key,_b=_a.parentKey,parentKey=void 0===_b?null:_b,_c=_a.content,content=void 0===_c?"":_c,_d=_a.subKeys,subKeys=void 0===_d?[]:_d,_e=_a.collapse,collapse=void 0!==_e&&_e,block=block_1.Block.create({type:types_1.BlockType.CONTENT,data:content,key:null});return new Topic({key:key,parentKey:parentKey,blocks:immutable_1.List([block]),subKeys:immutable_1.List(subKeys),collapse:collapse})},Topic}(immutable_1.Record({key:null,parentKey:null,collapse:!1,subKeys:null,blocks:null,relations:null,style:null}));exports.Topic=Topic},304:function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(1172)),__export(__webpack_require__(137))},38:function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}function center(rect){return[(rect.left+rect.right)/2,(rect.top+rect.bottom)/2]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLinkKey=function getLinkKey(fromKey,toKey){return"link-"+fromKey+"-"+toKey},exports.centerY=function centerY(rect){return(rect.top+rect.bottom)/2},exports.centerX=function centerX(rect){return(rect.left+rect.right)/2},exports.centerPointX=function centerPointX(p1,p2){return(p1.x+p2.x)/2},exports.centerPointY=function centerPointY(p1,p2){return(p1.y+p2.y)/2},exports.center=center,exports.getRelativeRect=function getRelativeRect(el,rel,scale){void 0===scale&&(scale=1);var rect=el.getBoundingClientRect(),relCenter=center(rel.getBoundingClientRect()),elCenter=center(rect);elCenter[0]=(elCenter[0]-relCenter[0])/scale,elCenter[1]=(elCenter[1]-relCenter[1])/scale;var width=rect.width/scale,height=rect.height/scale;return{left:elCenter[0]-width/2,right:elCenter[0]+width/2,top:elCenter[1]-height/2,bottom:elCenter[1]+height/2,width:width,height:height}},exports.getRelativeVector=function getRelativeVector(el,rel){var rect=el.getBoundingClientRect(),relCenter=center(rel.getBoundingClientRect()),elCenter=center(rect);return[elCenter[0]-relCenter[0],elCenter[1]-relCenter[1]]},__export(__webpack_require__(866)),__export(__webpack_require__(867)),__export(__webpack_require__(868))},419:function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0});__webpack_require__(135).withSource,__webpack_require__(135).addSource;var react_1=__webpack_require__(67);localStorage.debug=["node:*","plugin:event","story:*","modifier"].join(","),react_1.configure((function loadStories(){var req=__webpack_require__(790);req.keys().forEach(req)}),module)}).call(this,__webpack_require__(69)(module))},422:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var block_1=__webpack_require__(288);exports.Block=block_1.Block;var config_1=__webpack_require__(423);exports.Config=config_1.Config;var data_1=__webpack_require__(425);exports.Data=data_1.Data;var model_1=__webpack_require__(802);exports.Model=model_1.Model;var modifiers_1=__webpack_require__(427);exports.Modifiers=modifiers_1.default;var topic_1=__webpack_require__(289);exports.Topic=topic_1.Topic,function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(428)),exports.default={Block:block_1.Block,Config:config_1.Config,Model:model_1.Model,Topic:topic_1.Topic,Data:data_1.Data}},423:function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var immutable_1=__webpack_require__(3),theme_1=__webpack_require__(424),defaultConfigRecord={readOnly:!1,allowUndo:!0,layoutDir:__webpack_require__(136).DiagramLayoutType.LEFT_AND_RIGHT,theme:theme_1.defaultTheme},Config=function(_super){function Config(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Config,_super),Object.defineProperty(Config.prototype,"layoutDir",{get:function(){return this.get("layoutDir")},enumerable:!0,configurable:!0}),Object.defineProperty(Config.prototype,"readOnly",{get:function(){return this.get("readOnly")},enumerable:!0,configurable:!0}),Object.defineProperty(Config.prototype,"allowUndo",{get:function(){return this.get("allowUndo")},enumerable:!0,configurable:!0}),Object.defineProperty(Config.prototype,"theme",{get:function(){return this.get("theme")},enumerable:!0,configurable:!0}),Config.fromJSON=function(obj){return new Config(obj)},Config}(immutable_1.Record(defaultConfigRecord));exports.Config=Config},424:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(801))},425:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var immutable_1=__webpack_require__(3),is_plain_object_1=__webpack_require__(301),Data=function(){function Data(){}return Data.create=function(attrs){if(void 0===attrs&&(attrs={}),immutable_1.Map.isMap(attrs))return attrs;if(is_plain_object_1.default(attrs))return Data.fromJSON(attrs);throw new Error("`Data.create` only accepts objects or maps, but you passed it: "+attrs)},Data.fromJSON=function(object){return immutable_1.Map(object)},Data}();exports.Data=Data},426:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createKey=function createKey(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(c){var r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)}))}},427:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var debug_1=__webpack_require__(16),types_1=__webpack_require__(136),utils_1=__webpack_require__(426),block_1=__webpack_require__(288),topic_1=__webpack_require__(289),utils_2=__webpack_require__(428),log=debug_1.default("modifier");function focusTopic(_a){var model=_a.model,topicKey=_a.topicKey,focusMode=_a.focusMode;return log("focus topic"),topicKey!==model.focusKey&&(model=model.set("focusKey",topicKey)),focusMode!==model.focusMode&&(model=model.set("focusMode",focusMode)),model}exports.default={addChild:function addChild(_a){var model=_a.model,topicKey=_a.topicKey;log("addChild:",topicKey);var topic=model.getTopic(topicKey);if(topic){var child_1=topic_1.Topic.create({key:utils_1.createKey(),parentKey:topic.key});return topic=topic.set("collapse",!1).update("subKeys",(function(subKeys){return subKeys.push(child_1.key)})),focusTopic({model:model=model.update("topics",(function(topics){return topics.set(topicKey,topic).set(child_1.key,child_1)})),topicKey:child_1.key,focusMode:types_1.FocusMode.EDITING_CONTENT})}return model},addSibling:function addSibling(_a){var model=_a.model,topicKey=_a.topicKey;if(topicKey===model.rootTopicKey)return model;var topic=model.getTopic(topicKey);if(topic){var pItem=model.getTopic(topic.parentKey),idx_1=pItem.subKeys.indexOf(topicKey),sibling_1=topic_1.Topic.create({key:utils_1.createKey(),parentKey:pItem.key});return focusTopic({model:model=model.update("topics",(function(topics){return topics.set(sibling_1.key,sibling_1)})).updateIn(["topics",pItem.key,"subKeys"],(function(subKeys){return subKeys.insert(idx_1+1,sibling_1.key)})),topicKey:sibling_1.key,focusMode:types_1.FocusMode.EDITING_CONTENT})}return model},toggleCollapse:function toggleCollapse(_a){var model=_a.model,topicKey=_a.topicKey,topic=model.getTopic(topicKey);return topic&&0!==topic.subKeys.size&&(topic=topic.merge({collapse:!topic.collapse}),model=model.updateIn(["topics",topic.key,"collapse"],(function(collapse){return!collapse}))),model},collapseAll:function collapseAll(_a){var model=_a.model;log("collapseAll");var topicKeys=utils_2.getAllSubTopicKeys(model,model.editorRootTopicKey);return log(model),model=model.withMutations((function(m){topicKeys.forEach((function(topicKey){m.setIn(["topics",topicKey,"collapse"],!0)}))})),log(model),model},expandAll:function expandAll(_a){var model=_a.model,topicKeys=utils_2.getAllSubTopicKeys(model,model.editorRootTopicKey);return log(model),model=model.withMutations((function(m){topicKeys.forEach((function(topicKey){m.setIn(["topics",topicKey,"collapse"],!1)}))})),log(model),model},focusTopic:focusTopic,deleteTopic:function deleteTopic(_a){var model=_a.model,topicKey=_a.topicKey;if(topicKey===model.rootTopicKey)return model;var item=model.getTopic(topicKey);return item&&(model=model.withMutations((function(m){m.update("topics",(function(topics){topics=topics.delete(topicKey);var deleteKeys=utils_2.getAllSubTopicKeys(model,topicKey);return topics=topics.withMutations((function(t){deleteKeys.forEach((function(dKey){t.delete(dKey)}))}))})),m.updateIn(["topics",item.parentKey,"subKeys"],(function(subKeys){return subKeys.delete(subKeys.indexOf(topicKey))})),m.focusKey===topicKey&&m.set("focusKey",null).set("focusMode",null)}))),model},setContent:function setContent(_a){var model=_a.model,topicKey=_a.topicKey,data=_a.data,topic=model.getTopic(topicKey);if(topic){var _b=topic.getBlock(types_1.BlockType.CONTENT),index=_b.index;return _b.block.data!==data&&(model=model.updateIn(["topics",topicKey,"blocks",index,"data"],(function(dt){return data}))),focusTopic({model:model,topicKey:topicKey,focusMode:types_1.FocusMode.EDITING_CONTENT})}return model},setDesc:function setDesc(_a){var model=_a.model,topicKey=_a.topicKey,data=_a.data,topic=model.getTopic(topicKey);if(topic){var _b=topic.getBlock(types_1.BlockType.DESC),index=_b.index,block=_b.block;return-1===index?model=model.updateIn(["topics",topicKey,"blocks"],(function(blocks){return blocks.push(block_1.Block.create({type:types_1.BlockType.DESC,data:data}))})):block.data!==data&&(model=model.updateIn(["topics",topicKey,"blocks",index,"data"],(function(dt){return data}))),focusTopic({model:model,topicKey:topicKey,focusMode:types_1.FocusMode.EDITING_DESC})}return model},setStyle:function setStyle(_a){var model=_a.model,topicKey=_a.topicKey,style=_a.style,topic=model.getTopic(topicKey);return topic&&style!==topic.style&&(model=model.updateIn(["topics",topicKey,"style"],(function(s){return style}))),model},setTheme:function setTheme(_a){var model=_a.model,theme=_a.theme;return model=model.setIn(["config","theme"],theme)},setLayoutDir:function setLayoutDir(_a){var model=_a.model,layoutDir=_a.layoutDir;return model.config.layoutDir===layoutDir?model:model=model.setIn(["config","layoutDir"],layoutDir)},setEditorRootTopicKey:function setEditorRootTopicKey(_a){var model=_a.model,topicKey=_a.topicKey;return model.editorRootTopicKey!==topicKey&&(model=model.set("editorRootTopicKey",topicKey)),model.getTopic(topicKey).collapse&&(model=model.setIn(["topics",topicKey,"collapse"],!1)),model},setZoomFactor:function setZoomFactor(_a){var model=_a.model,zoomFactor=_a.zoomFactor;return model.editorRootTopicKey!==zoomFactor&&(model=model.set("zoomFactor",zoomFactor)),model}}},428:function(module,exports,__webpack_require__){"use strict";var __read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread=this&&this.__spread||function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar};Object.defineProperty(exports,"__esModule",{value:!0});var types_1=__webpack_require__(136);exports.getAllSubTopicKeys=function getAllSubTopicKeys(model,topicKey){var item=model.getTopic(topicKey),res=[];if(item.subKeys.size>0){var subKeys=item.subKeys.toArray();res.push.apply(res,__spread(subKeys)),res=subKeys.reduce((function(acc,key){return acc.push.apply(acc,__spread(getAllSubTopicKeys(model,key))),acc}),res)}return res},exports.getRelationship=function getRelationship(model,srcKey,dstKey){var srcTopic=model.getTopic(srcKey),dstTopic=model.getTopic(dstKey);if(srcTopic&&dstTopic){if(srcTopic.parentKey==dstTopic.parentKey)return types_1.TopicRelationship.SIBLING;for(var pTopic=srcTopic;pTopic.parentKey;){if(pTopic.parentKey===dstTopic.key)return types_1.TopicRelationship.DESCENDANT;pTopic=model.getParentTopic(pTopic.key)}for(pTopic=dstTopic;pTopic.parentKey;){if(pTopic.parentKey===srcTopic.key)return types_1.TopicRelationship.ANCESTOR;pTopic=model.getParentTopic(pTopic.key)}}return types_1.TopicRelationship.NONE}},429:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=__webpack_require__.p+"65183b90d1d130cc390e2d60e8c66eca.eot"},443:function(module,exports,__webpack_require__){"use strict";var extendStatics,__makeTemplateObject=this&&this.__makeTemplateObject||function(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked},__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var templateObject_1,debug_1=__webpack_require__(16),React=__webpack_require__(0),slate_plain_serializer_1=__webpack_require__(168),slate_react_1=__webpack_require__(53),styled_components_1=__webpack_require__(13),log=debug_1.default("node:text-editor"),Content=styled_components_1.default.div.withConfig({displayName:"Content",componentId:"sc-lucu9z"})(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  padding: 6px;\n  background-color: ",";\n  cursor: ",";\n  min-width: 50px;\n"],["\n  padding: 6px;\n  background-color: ",";\n  cursor: ",";\n  min-width: 50px;\n"])),(function(props){return props.readOnly?null:"white"}),(function(props){return props.readOnly?"pointer":"text"})),SimpleTextEditor=function(_super){function SimpleTextEditor(props){var _this=_super.call(this,props)||this;return _this.state={content:null},_this.onMouseDown=function(e){e.stopPropagation()},_this.onMouseMove=function(e){},_this._handleClick=function(event){!_this.root.contains(event.target)&&_this.onClickOutSide(event)},_this.rootRef=function(saveRef){return function(ref){saveRef(ref),_this.root=ref}},_this.initState(),_this}return __extends(SimpleTextEditor,_super),SimpleTextEditor.prototype.onChange=function(_a){var value=_a.value;log("onChange",value),this.setState({content:value})},SimpleTextEditor.prototype.componentDidMount=function(){this.props.readOnly||document.addEventListener("click",this._handleClick)},SimpleTextEditor.prototype.componentWillUnmount=function(){this.props.readOnly||document.removeEventListener("click",this._handleClick)},SimpleTextEditor.prototype.onClickOutSide=function(e){},SimpleTextEditor.prototype.getCustomizeProps=function(){return null},SimpleTextEditor.prototype.getContent=function(){var content=this.getCustomizeProps().block.data;return null==content?null:("string"==typeof content&&(content=slate_plain_serializer_1.default.deserialize(content)),content)},SimpleTextEditor.prototype.initState=function(){var content=this.getContent();this.state={content:content}},SimpleTextEditor.prototype.render=function(){var _a=this.props,topicKey=_a.topicKey,saveRef=_a.saveRef,_b=this.getCustomizeProps(),readOnly=_b.readOnly,refKeyPrefix=_b.refKeyPrefix,placeholder=_b.placeholder,style=_b.style;log(readOnly);var key=refKeyPrefix+"-"+topicKey,content=readOnly?this.getContent():this.state.content,onMouseDown=this.onMouseDown,onMouseMove=this.onMouseMove,editorProps={value:content,readOnly:readOnly,onChange:this.onChange.bind(this),placeholder:placeholder,style:style},contentProps={key:key,readOnly:readOnly,ref:this.rootRef(saveRef(key)),onMouseDown:onMouseDown,onMouseMove:onMouseMove};return React.createElement(Content,__assign({},contentProps),React.createElement(slate_react_1.Editor,__assign({},editorProps,{autoFocus:!0})))},SimpleTextEditor}(React.PureComponent);exports.SimpleTextEditor=SimpleTextEditor},498:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a="## Model serialization and deserialization\n\nThe framework provides the plugin plugin-json-serializer to implement serialization and deserialization of json.\n\n### Serializer\n\nPlugin-json-serializer implements the middleware function: serializeModel\n\nThe outer layer can call controller.run('serializeModel', props) to serialize model to json.\n\n```js\nconst props = this.diagram.getDiagramProps();\nconst { controller } = props;\nconst json = controller.run('serializeModel', props);\nconst jsonStr = JSON.stringify(json);\n```\n\n### Deserializer\n\nPlugin-json-serializer implements the middleware function: deserializeModel\n\nThe outer layer can call controller.run('deserializeModel', props) to deserialize json to model.\n\n```js\nlet obj = JSON.parse(txt);\nlet model = controller.run('deserializeModel', { controller, obj });\n```\n"},499:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a="## Â∫èÂàóÂåñ Model\n\nÊ°ÜÊû∂Êèê‰æõ‰∫ÜÈªòËÆ§ÁöÑÊèí‰ª∂ plugin-json-serializer Êù•ÂÆûÁé∞ json ÁöÑÂ∫èÂàóÂåñÂíåÂèçÂ∫èÂàóÂåñ.\n\n### Â∫èÂàóÂåñ\n\nplugin-json-serializer ÂÆûÁé∞‰∫Ü serializeModel ÁöÑÊñπÊ≥ï\n\nÂú®Â§ñÂ±ÇÂèØ‰ª•ÈÄöËøá controller.run('serializeModel', props) Êù•Â∞Ü model Â∫èÂàóÂåñ‰∏∫ json.\n\n```js\nconst props = this.diagram.getDiagramProps();\nconst { controller } = props;\nconst json = controller.run('serializeModel', props);\nconst jsonStr = JSON.stringify(json);\n```\n\n### ÂèçÂ∫èÂàóÂåñ\n\nplugin-json-serializer ÂÆûÁé∞‰∫Ü deserializeModel ÁöÑÊñπÊ≥ï\n\nÂú®Â§ñÂ±ÇÂèØ‰ª•ÈÄöËøá controller.run('deserializeModel', props) Êù•Â∞Ü json ÂèçÂ∫èÂàóÂåñ‰∏∫ model.\n\n```js\nlet obj = JSON.parse(txt);\nlet model = controller.run('deserializeModel', { controller, obj });\n```\n"},501:function(module,exports,__webpack_require__){__webpack_require__(502),__webpack_require__(613),module.exports=__webpack_require__(614)},52:function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(808)),__export(__webpack_require__(809)),__export(__webpack_require__(810)),__export(__webpack_require__(811))},523:function(module,exports){},59:function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(807)),__export(__webpack_require__(38))},614:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67),_storybook_theming__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(486),_storybook_addon_notes__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(488);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.addParameters)({options:{theme:_storybook_theming__WEBPACK_IMPORTED_MODULE_1__.themes.dark}}),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.addDecorator)(_storybook_addon_notes__WEBPACK_IMPORTED_MODULE_2__.withNotes),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)((function loadStories(){__webpack_require__(419)}),module)}.call(this,__webpack_require__(249)(module))},790:function(module,exports,__webpack_require__){var map={"./app/index.stories.jsx":791,"./customize-topic-context-menu-demo/index.stories.tsx":1178,"./index.stories.tsx":419,"./serialize-demo/index.stories.jsx":1183,"./theme-selector-demo/index.stories.tsx":1184,"./topic-content-editor-demo/index.stories.tsx":1185,"./undo-redo-demo/index.stories.tsx":1190};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=790},791:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__(40),__webpack_require__(46),__webpack_require__(47),__webpack_require__(100),__webpack_require__(36),__webpack_require__(81),__webpack_require__(44),__webpack_require__(101),__webpack_require__(207),__webpack_require__(160),__webpack_require__(10),__webpack_require__(161),__webpack_require__(354),__webpack_require__(792),__webpack_require__(151),__webpack_require__(43),__webpack_require__(208),__webpack_require__(32),__webpack_require__(48),__webpack_require__(37),__webpack_require__(49);var react__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(0),_storybook_react__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(67),_common__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(96),_blink_mind_renderer_react__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(59),_blink_mind_plugin_json_serializer__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(230),_blink_mind_plugin_rich_text_editor__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(169),_blink_mind_plugin_rich_text_editor__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(_blink_mind_plugin_rich_text_editor__WEBPACK_IMPORTED_MODULE_26__),_blink_mind_plugin_theme_selector__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(304),styled_components__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(13),_blueprintjs_core__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(139),_blueprintjs_core__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(138),_blueprintjs_core__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(84),_blueprintjs_core__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(85),_utils__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(166),debug__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(16);function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _templateObject3(){var data=_taggedTemplateLiteral(["\n  height: 36px;\n  display: flex;\n  align-items: center;\n"]);return _templateObject3=function(){return data},data}function _templateObject2(){var data=_taggedTemplateLiteral(["\n  width: calc(100% - 18px);\n  height: calc(100% - 36px);\n"]);return _templateObject2=function(){return data},data}function _templateObject(){var data=_taggedTemplateLiteral(["\n  width: 100%;\n  height: 100%;\n"]);return _templateObject=function(){return data},data}function _taggedTemplateLiteral(strings,raw){return raw||(raw=strings.slice(0)),Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var log=__webpack_require__.n(debug__WEBPACK_IMPORTED_MODULE_34__)()("story:app"),Container=styled_components__WEBPACK_IMPORTED_MODULE_28__.default.div(_templateObject()),DiagramContainer=styled_components__WEBPACK_IMPORTED_MODULE_28__.default.div(_templateObject2()),plugins=(styled_components__WEBPACK_IMPORTED_MODULE_28__.default.span(_templateObject3()),[_blink_mind_plugin_rich_text_editor__WEBPACK_IMPORTED_MODULE_26___default()(),Object(_blink_mind_plugin_json_serializer__WEBPACK_IMPORTED_MODULE_25__.JsonSerializerPlugin)(),Object(_blink_mind_plugin_theme_selector__WEBPACK_IMPORTED_MODULE_27__.ThemeSelectorPlugin)()]),_ref=react__WEBPACK_IMPORTED_MODULE_21__.createElement(_blueprintjs_core__WEBPACK_IMPORTED_MODULE_29__.a,null),AppDemo=function(_BaseDemo){function AppDemo(_props){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AppDemo),_this=function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}(this,_getPrototypeOf(AppDemo).call(this,_props)),_defineProperty(_assertThisInitialized(_this),"themeIndex",1),_defineProperty(_assertThisInitialized(_this),"onClickChangeTheme",(function(){var props=_this.diagram.getDiagramProps(),controller=props.controller,themeKeys=controller.run("getAllThemes",props).keys();themeKeys=Array.from(themeKeys),controller.run("setTheme",function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}({},props,{themeKey:themeKeys[_this.themeIndex++%themeKeys.length]}))})),_defineProperty(_assertThisInitialized(_this),"onClickOpenFile",(function(){var input=document.createElement("input"),controller=_this.diagram.getDiagramProps().controller;input.type="file",input.accept=".json,.blinkmind,.bm",log("add onchange"),input.addEventListener("change",(function(evt){var file=evt.target.files[0],fr=new FileReader;log("add fr onload"),fr.onload=function(evt){var txt=evt.target.result,obj=JSON.parse(txt);log("OpenFile:",obj);var model=controller.run("deserializeModel",{controller:controller,obj:obj});log("OpenFile:",model),_this.setState({model:model})},fr.readAsText(file)})),input.click()})),_defineProperty(_assertThisInitialized(_this),"onClickExport",(function(){_this.setState({showDialog:!0})})),_defineProperty(_assertThisInitialized(_this),"handleDialogClose",(function(){_this.setState({showDialog:!1})})),_defineProperty(_assertThisInitialized(_this),"onClickExportJson",(function(){var props=_this.diagram.getDiagramProps(),json=props.controller.run("serializeModel",props),jsonStr=JSON.stringify(json),url="data:text/plain,".concat(encodeURIComponent(jsonStr));Object(_utils__WEBPACK_IMPORTED_MODULE_33__.downloadFile)(url,"example.json"),_this.setState({showDialog:!1})})),_defineProperty(_assertThisInitialized(_this),"diagram",void 0),_defineProperty(_assertThisInitialized(_this),"diagramRef",(function(e){_this.diagram=e})),_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(AppDemo,_BaseDemo),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(AppDemo,[{key:"renderToolbar",value:function renderToolbar(){return react__WEBPACK_IMPORTED_MODULE_21__.createElement(_common__WEBPACK_IMPORTED_MODULE_23__.ToolBar,null,react__WEBPACK_IMPORTED_MODULE_21__.createElement(_common__WEBPACK_IMPORTED_MODULE_23__.ToolBarItem,{onClick:this.onClickOpenFile},react__WEBPACK_IMPORTED_MODULE_21__.createElement(_common__WEBPACK_IMPORTED_MODULE_23__.Icon,{className:Object(_blink_mind_renderer_react__WEBPACK_IMPORTED_MODULE_24__.iconClassName)("openfile")})),react__WEBPACK_IMPORTED_MODULE_21__.createElement(_common__WEBPACK_IMPORTED_MODULE_23__.ToolBarItem,{onClick:this.onClickExport},react__WEBPACK_IMPORTED_MODULE_21__.createElement(_common__WEBPACK_IMPORTED_MODULE_23__.Icon,{className:Object(_blink_mind_renderer_react__WEBPACK_IMPORTED_MODULE_24__.iconClassName)("export")})),react__WEBPACK_IMPORTED_MODULE_21__.createElement(_common__WEBPACK_IMPORTED_MODULE_23__.ToolBarItem,{onClick:this.onClickChangeTheme},react__WEBPACK_IMPORTED_MODULE_21__.createElement(_common__WEBPACK_IMPORTED_MODULE_23__.Icon,{className:Object(_blink_mind_renderer_react__WEBPACK_IMPORTED_MODULE_24__.iconClassName)("theme")})))}},{key:"renderDialog",value:function renderDialog(){return react__WEBPACK_IMPORTED_MODULE_21__.createElement(_blueprintjs_core__WEBPACK_IMPORTED_MODULE_30__.a,{onClose:this.handleDialogClose,isOpen:this.state.showDialog,autoFocus:!0,enforceFocus:!0,usePortal:!0,title:"Please select export file format"},react__WEBPACK_IMPORTED_MODULE_21__.createElement(_blueprintjs_core__WEBPACK_IMPORTED_MODULE_31__.a,null,react__WEBPACK_IMPORTED_MODULE_21__.createElement(_blueprintjs_core__WEBPACK_IMPORTED_MODULE_32__.a,{text:"JSON(.json)",onClick:this.onClickExportJson}),_ref))}},{key:"renderDiagram",value:function renderDiagram(){return react__WEBPACK_IMPORTED_MODULE_21__.createElement(Container,null,this.renderToolbar(),this.renderDialog(),react__WEBPACK_IMPORTED_MODULE_21__.createElement(DiagramContainer,null,react__WEBPACK_IMPORTED_MODULE_21__.createElement(_blink_mind_renderer_react__WEBPACK_IMPORTED_MODULE_24__.Diagram,{model:this.state.model,onChange:this.onChange,plugins:plugins,ref:this.diagramRef})))}}]),AppDemo}(_common__WEBPACK_IMPORTED_MODULE_23__.BaseDemo),_ref2=react__WEBPACK_IMPORTED_MODULE_21__.createElement(AppDemo,null);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_22__.storiesOf)("app",module).add("app",(function(){return _ref2}))}.call(this,__webpack_require__(249)(module))},793:function(module,exports,__webpack_require__){"use strict";var __makeTemplateObject=this&&this.__makeTemplateObject||function(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked};Object.defineProperty(exports,"__esModule",{value:!0});var templateObject_1,templateObject_2,templateObject_3,styled_components_1=__webpack_require__(13);exports.ToolBar=styled_components_1.default.div.withConfig({displayName:"ToolBar",componentId:"sc-l0d99g"})(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  width: calc(100% - 18px);\n  height: 36px;\n  background: white;\n  display: flex;\n"],["\n  width: calc(100% - 18px);\n  height: 36px;\n  background: white;\n  display: flex;\n"]))),exports.ToolBarItem=styled_components_1.default.div.withConfig({displayName:"ToolBarItem",componentId:"sc-11x9oli"})(templateObject_2||(templateObject_2=__makeTemplateObject(["\n  padding: 5px;\n  width: 36px;\n  height: 36px;\n  cursor: pointer;\n  display: inline-block;\n"],["\n  padding: 5px;\n  width: 36px;\n  height: 36px;\n  cursor: pointer;\n  display: inline-block;\n"]))),exports.Icon=styled_components_1.default.div.withConfig({displayName:"Icon",componentId:"sc-1e0ftww"})(templateObject_3||(templateObject_3=__makeTemplateObject(["\n  width: 26px;\n  height: 26px;\n  font-size: 26px !important;\n  &:hover {\n    color: #106ba3;\n  }\n"],["\n  width: 26px;\n  height: 26px;\n  font-size: 26px !important;\n  &:hover {\n    color: #106ba3;\n  }\n"])))},796:function(module,exports,__webpack_require__){"use strict";var __values=this&&this.__values||function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread=this&&this.__spread||function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar};Object.defineProperty(exports,"__esModule",{value:!0});var debug_1=__webpack_require__(16),memoize_one_1=__webpack_require__(165),tiny_warning_1=__webpack_require__(799),core_1=__webpack_require__(800);debug_1.default("core:controller");function compose(middleware){var e_1,_a;if(!Array.isArray(middleware))throw new TypeError("Middleware stack must be an array!");try{for(var middleware_1=__values(middleware),middleware_1_1=middleware_1.next();!middleware_1_1.done;middleware_1_1=middleware_1.next()){if("function"!=typeof middleware_1_1.value)throw new TypeError("Middleware must be composed of functions!")}}catch(e_1_1){e_1={error:e_1_1}}finally{try{middleware_1_1&&!middleware_1_1.done&&(_a=middleware_1.return)&&_a.call(middleware_1)}finally{if(e_1)throw e_1.error}}return function(context,next){var index=-1;return function dispatch(i){if(i<=index)throw new Error("next() called multiple times");index=i;var fn=middleware[i];i===middleware.length&&(fn=next);if(!fn)return null;try{return fn(context,dispatch.bind(null,i+1))}catch(err){throw err}}(0)}}var Controller=function(){function Controller(options){void 0===options&&(options={});var _a=options.diagram,diagram=void 0===_a?this:_a,_b=options.plugins,plugins=void 0===_b?[]:_b,onChange=options.onChange,readOnly=options.readOnly;this.diagram=diagram,this.readOnly=readOnly,this.onChange=onChange,this.middleware=new Map,function registerPlugin(controller,plugin){if(Array.isArray(plugin))plugin.forEach((function(p){return registerPlugin(controller,p)}));else if(null!=plugin)for(var key in plugin){var fn=plugin[key];controller.middleware[key]=controller.middleware[key]||[],controller.middleware[key].push(fn)}}(this,core_1.CorePlugin({plugins:plugins}))}return Controller.prototype.run=function(key){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];var middleware=this.middleware,fns=middleware[key]||[];tiny_warning_1.default(0!==fns.length,"the middleware function "+key+" is not found!");var composedFn=memoize_one_1.default(compose)(fns);return composedFn.apply(void 0,__spread(args))},Controller.prototype.change=function(model){this.onChange(model)},Controller}();exports.Controller=Controller},800:function(module,exports,__webpack_require__){"use strict";var __read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread=this&&this.__spread||function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CorePlugin=function CorePlugin(options){void 0===options&&(options={});var _a=options.plugins;return __spread(void 0===_a?[]:_a)}},801:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultTheme={name:"default",randomColor:!0,background:"rgb(57,60,65)",highlightColor:"#50C9CE",marginH:60,marginV:20,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5,lineType:"curve",lineWidth:3},rootTopic:{contentStyle:{fontSize:"34px",borderRadius:"35px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:3,lineColor:"rgb(113, 203, 45)"}},primaryTopic:{contentStyle:{borderWidth:"1px",borderStyle:"solid",borderRadius:"20px",fontSize:"17px",padding:"10px 15px 10px 15px"},subLinkStyle:{lineType:"curve",lineWidth:3,lineColor:"rgb(113, 203, 45)"}},normalTopic:{contentStyle:{border:"1px solid #e8eaec",borderRadius:"20px",fontSize:"17px",padding:"4px 10px"},subLinkStyle:{lineType:"curve",lineWidth:3,lineColor:"white"}}}},802:function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var immutable_1=__webpack_require__(3),is_plain_object_1=__webpack_require__(301),types_1=__webpack_require__(136),utils_1=__webpack_require__(426),config_1=__webpack_require__(423),data_1=__webpack_require__(425),topic_1=__webpack_require__(289),defaultModelRecord={topics:immutable_1.Map(),data:null,config:null,rootTopicKey:null,editorRootTopicKey:null,focusKey:null,focusMode:null,formatVersion:null,zoomFactor:1},Model=function(_super){function Model(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Model,_super),Model.isModel=function(obj){return obj instanceof Model},Model.create=function(attrs){if(void 0===attrs&&(attrs=null),null==attrs)return Model.createEmpty();if(Model.isModel(attrs))return attrs;if(is_plain_object_1.default(attrs))return Model.fromJSON(attrs);throw new Error("`Value.create` only accepts objects or values, but you passed it: "+attrs)},Model.createEmpty=function(){var model=new Model,rootTopic=topic_1.Topic.create({key:utils_1.createKey()});return model.update("topics",(function(topics){return topics.set(rootTopic.key,rootTopic)})).set("rootTopicKey",rootTopic.key)},Model.fromJSON=function(object){var model=new Model,_a=object.data,data=void 0===_a?{}:_a,_b=object.topics,topics=void 0===_b?[]:_b,_c=object.config,config=void 0===_c?{}:_c,rootTopicKey=object.rootTopicKey,editorRootTopicKey=object.editorRootTopicKey;return void 0===editorRootTopicKey&&(editorRootTopicKey=rootTopicKey),model=(model=model.merge({rootTopicKey:rootTopicKey,editorRootTopicKey:editorRootTopicKey})).withMutations((function(model){topics.forEach((function(topic){model.update("topics",(function(topics){return topics.set(topic.key,topic_1.Topic.fromJSON(topic))}))})),model.set("config",config_1.Config.fromJSON(config)),model.set("data",data_1.Data.fromJSON(data))}))},Model.prototype.toJS=function(){return{rootTopicKey:this.rootTopicKey,topics:Object.values(this.topics.toJS()),config:this.config,data:this.data,zoomFactor:this.zoomFactor}},Object.defineProperty(Model.prototype,"topics",{get:function(){return this.get("topics")},enumerable:!0,configurable:!0}),Object.defineProperty(Model.prototype,"config",{get:function(){return this.get("config")},enumerable:!0,configurable:!0}),Object.defineProperty(Model.prototype,"formatVersion",{get:function(){return this.get("formatVersion")},enumerable:!0,configurable:!0}),Object.defineProperty(Model.prototype,"rootTopicKey",{get:function(){return this.get("rootTopicKey")},enumerable:!0,configurable:!0}),Object.defineProperty(Model.prototype,"editorRootTopicKey",{get:function(){return this.get("editorRootTopicKey")},enumerable:!0,configurable:!0}),Object.defineProperty(Model.prototype,"focusKey",{get:function(){return this.get("focusKey")},enumerable:!0,configurable:!0}),Object.defineProperty(Model.prototype,"focusMode",{get:function(){return this.get("focusMode")},enumerable:!0,configurable:!0}),Object.defineProperty(Model.prototype,"editingContentKey",{get:function(){return this.focusMode===types_1.FocusMode.EDITING_CONTENT?this.focusKey:null},enumerable:!0,configurable:!0}),Object.defineProperty(Model.prototype,"editingDescKey",{get:function(){return this.focusMode===types_1.FocusMode.EDITING_DESC?this.focusKey:null},enumerable:!0,configurable:!0}),Model.prototype.getTopic=function(key){return this.topics.get(key)},Model.prototype.getParentTopic=function(key){var topic=this.getTopic(key);return topic.parentKey?this.getTopic(topic.parentKey):null},Model.prototype.getTopicVisualLevel=function(key){for(var topic=this.getTopic(key),level=0;topic&&topic.key!==this.editorRootTopicKey;)level++,topic=this.getParentTopic(topic.key);return level},Object.defineProperty(Model.prototype,"rootTopic",{get:function(){return this.getTopic(this.rootTopicKey)},enumerable:!0,configurable:!0}),Object.defineProperty(Model.prototype,"zoomFactor",{get:function(){return this.get("zoomFactor")},enumerable:!0,configurable:!0}),Model}(immutable_1.Record(defaultModelRecord));exports.Model=Model},803:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(424))},804:function(module,exports,__webpack_require__){var content=__webpack_require__(805);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0,insertInto:void 0};__webpack_require__(213)(content,options);content.locals&&(module.exports=content.locals)},805:function(module,exports,__webpack_require__){(module.exports=__webpack_require__(212)(!1)).push([module.i,".app {\n  width: calc(100vw - 10px);\n  height: calc(100vh - 20px);\n}\n",""])},807:function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(52)),__export(__webpack_require__(812))},808:function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var BaseWidget=function(_super){function BaseWidget(props){return _super.call(this,props)||this}return __extends(BaseWidget,_super),BaseWidget.prototype.operation=function(opType,arg){this.props.controller.run("operation",__assign({opType:opType},arg))},BaseWidget.prototype.run=function(name,arg){this.props.controller.run(name,arg)},Object.defineProperty(BaseWidget.prototype,"topic",{get:function(){return this.props.model.getTopic(this.props.topicKey)},enumerable:!0,configurable:!0}),BaseWidget}(__webpack_require__(0).PureComponent);exports.BaseWidget=BaseWidget},809:function(module,exports,__webpack_require__){"use strict";var extendStatics,__makeTemplateObject=this&&this.__makeTemplateObject||function(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked},__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var templateObject_1,templateObject_2,React=__webpack_require__(0),resize_observer_polyfill_1=__webpack_require__(218),styled_components_1=__webpack_require__(13),log=__webpack_require__(16).default("node:drag-scroll-widget"),DragScrollView=styled_components_1.default.div.withConfig({displayName:"DragScrollView",componentId:"sc-imj7op"})(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: scroll;\n"],["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: scroll;\n"]))),DragScrollContent=styled_components_1.default.div.withConfig({displayName:"DragScrollContent",componentId:"sc-5yqbdv"})(templateObject_2||(templateObject_2=__makeTemplateObject(["\n  position: relative;\n  width: max-content;\n"],["\n  position: relative;\n  width: max-content;\n"]))),DragScrollWidget=function(_super){function DragScrollWidget(props){var _this=_super.call(this,props)||this;return _this.contentResizeCallback=function(entries,observer){if(_this.oldContentRect){var widgetStyle={width:_this.content.clientWidth+2*_this.viewBox.clientWidth,height:_this.content.clientHeight+2*_this.viewBox.clientHeight};_this.bigView.style.width=widgetStyle.width+"px",_this.bigView.style.height=widgetStyle.height+"px"}_this.oldContentRect=entries[0].contentRect},_this.contentResizeObserver=new resize_observer_polyfill_1.default(_this.contentResizeCallback),_this.contentRef=function(ref){ref&&(_this.content=ref,_this.contentResizeObserver.observe(_this.content))},_this.viewBoxRef=function(ref){ref&&(_this.viewBox=ref,_this.props.enableMouseWheel||(log("addEventListener onwheel"),_this.viewBox.addEventListener("wheel",(function(e){log("onwheel"),(e.ctrlKey||e.altKey)&&e.preventDefault()}),{passive:!1})),_this.setViewBoxScroll(_this.viewBox.clientWidth,_this.viewBox.clientHeight))},_this.bigViewRef=function(ref){ref&&(_this.bigView=ref)},_this.setWidgetStyle=function(){_this.content&&_this.viewBox&&_this.bigView&&(_this.bigView.style.width=2*(_this.content.clientWidth+_this.viewBox.clientWidth)+"px",_this.bigView.style.height=2*(_this.content.clientHeight+_this.viewBox.clientHeight)+"px",_this.content.style.left=_this.viewBox.clientWidth+"px",_this.content.style.top=_this.viewBox.clientHeight+"px")},_this.setViewBoxScroll=function(left,top){log("setViewBoxScroll "+left+" "+top),_this.viewBox&&(_this.viewBox.scrollLeft=left,_this.viewBox.scrollTop=top)},_this.setViewBoxScrollDelta=function(deltaLeft,deltaTop){log("setViewBoxScrollDelta "+deltaLeft+" "+deltaTop),_this.viewBox&&(_this.viewBox.scrollLeft+=deltaLeft,_this.viewBox.scrollTop+=deltaTop)},_this.onMouseDown=function(e){var _a=_this.props,mouseKey=_a.mouseKey,needKeyPressed=_a.needKeyPressed,canDragFunc=_a.canDragFunc;if((!canDragFunc||canDragFunc())&&(0===e.button&&"left"===mouseKey||2===e.button&&"right"===mouseKey)){if(needKeyPressed&&!e.ctrlKey)return;_this._lastCoordX=_this.viewBox.scrollLeft+e.nativeEvent.clientX,_this._lastCoordY=_this.viewBox.scrollTop+e.nativeEvent.clientY,window.addEventListener("mousemove",_this.onMouseMove),window.addEventListener("mouseup",_this.onMouseUp)}},_this.onMouseUp=function(e){window.removeEventListener("mousemove",_this.onMouseMove),window.removeEventListener("mouseup",_this.onMouseUp)},_this.onMouseMove=function(e){_this.viewBox.scrollLeft=_this._lastCoordX-e.clientX,_this.viewBox.scrollTop=_this._lastCoordY-e.clientY},_this.handleContextMenu=function(e){e.preventDefault()},_this.state={widgetStyle:{width:"10000px",height:"10000px"}},_this}return __extends(DragScrollWidget,_super),DragScrollWidget.prototype.componentDidMount=function(){this.setWidgetStyle(),document.addEventListener("contextmenu",this.handleContextMenu)},DragScrollWidget.prototype.componentWillUnmount=function(){document.removeEventListener("contextmenu",this.handleContextMenu)},DragScrollWidget.prototype.setZoomFactor=function(zoomFactor){this.bigView.style.transform="scale("+zoomFactor+")",this.bigView.style.transformOrigin="50% 50%"},DragScrollWidget.prototype.render=function(){var style=__assign({},this.state.widgetStyle);return React.createElement(DragScrollView,{ref:this.viewBoxRef,onMouseDown:this.onMouseDown},React.createElement("div",{style:style,ref:this.bigViewRef},React.createElement(DragScrollContent,{ref:this.contentRef,style:this.state.contentStyle},this.props.children(this.setViewBoxScroll,this.setViewBoxScrollDelta))))},DragScrollWidget.defaultProps={mouseKey:"left",needKeyPressed:!1},DragScrollWidget}(React.Component);exports.DragScrollWidget=DragScrollWidget},810:function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__values=this&&this.__values||function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0});var SaveRef=function(_super){function SaveRef(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.getRef=function(name){return _this[name]},_this.saveRef=function(name){return function(node){node&&(_this[name]=node,_this.fireListener(name,node))}},_this.observers=new Map,_this.fireListener=function(name,ref){var e_1,_a;if(_this.observers.has(name)){var listeners=_this.observers.get(name);try{for(var listeners_1=__values(listeners),listeners_1_1=listeners_1.next();!listeners_1_1.done;listeners_1_1=listeners_1.next()){(0,listeners_1_1.value)(name,ref)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{listeners_1_1&&!listeners_1_1.done&&(_a=listeners_1.return)&&_a.call(listeners_1)}finally{if(e_1)throw e_1.error}}}},_this.registerRefListener=function(name,listener){_this.observers.has(name)?_this.observers.get(name).push(listener):_this.observers.set(name,[listener])},_this}return __extends(SaveRef,_super),SaveRef.prototype.render=function(){return this.props.children(this.saveRef,this.getRef,this.registerRefListener.bind(this))},SaveRef}(__webpack_require__(0).Component);exports.SaveRef=SaveRef},811:function(module,exports,__webpack_require__){"use strict";var __makeTemplateObject=this&&this.__makeTemplateObject||function(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked};Object.defineProperty(exports,"__esModule",{value:!0});var templateObject_1,templateObject_2,templateObject_3,templateObject_4,templateObject_5,templateObject_6,templateObject_7,styled_components_1=__webpack_require__(13);exports.Flex=styled_components_1.default.div.withConfig({displayName:"Flex",componentId:"sc-p7fpi6"})(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  display: flex;\n  align-items: ",";\n"],["\n  display: flex;\n  align-items: ",";\n"])),(function(props){return props.alignItems})),exports.Margin=styled_components_1.default.div.withConfig({displayName:"Margin",componentId:"sc-lr2fsj"})(templateObject_2||(templateObject_2=__makeTemplateObject(["\n  margin: ",";\n"],["\n  margin: ",";\n"])),(function(props){return props.margin})),exports.ShowMenuIcon=styled_components_1.default.a.withConfig({displayName:"ShowMenuIcon",componentId:"sc-u26ar1"})(templateObject_3||(templateObject_3=__makeTemplateObject(["\n  font-size: 20px !important;\n"],["\n  font-size: 20px !important;\n"]))),exports.IconBg=styled_components_1.default.div.withConfig({displayName:"IconBg",componentId:"sc-m0pql9"})(templateObject_4||(templateObject_4=__makeTemplateObject(["\n  padding: 5px;\n  cursor: pointer;\n"],["\n  padding: 5px;\n  cursor: pointer;\n"]))),exports.Btn=styled_components_1.default.div.withConfig({displayName:"Btn",componentId:"sc-1ftfena"})(templateObject_5||(templateObject_5=__makeTemplateObject(["\n  cursor: pointer;\n  &:hover {\n    color: #1ea7fd;\n  }\n"],["\n  cursor: pointer;\n  &:hover {\n    color: #1ea7fd;\n  }\n"]))),exports.CloseIcon=styled_components_1.default(exports.Btn).withConfig({displayName:"CloseIcon",componentId:"sc-1llbg66"})(templateObject_6||(templateObject_6=__makeTemplateObject(["\n  position: absolute;\n  right: 5px;\n  top: 5px;\n"],["\n  position: absolute;\n  right: 5px;\n  top: 5px;\n"]))),exports.Title=styled_components_1.default.div.withConfig({displayName:"Title",componentId:"sc-hkydtp"})(templateObject_7||(templateObject_7=__makeTemplateObject(["\n  height: 16px;\n"],["\n  height: 16px;\n"])))},812:function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(21);__webpack_require__(813);var core_2=__webpack_require__(23);__webpack_require__(830);var debug_1=__webpack_require__(16),memoize_one_1=__webpack_require__(165),React=__webpack_require__(0),plugins_1=__webpack_require__(832);__webpack_require__(971);debug_1.default("node:Diagram");var Diagram=function(_super){function Diagram(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.resolveController=memoize_one_1.default((function(plugins,commands,TheDefaultPlugin){void 0===plugins&&(plugins=[]);var defaultPlugin=TheDefaultPlugin();_this.controller=new core_1.Controller({plugins:[plugins,defaultPlugin],commands:commands,construct:!1,onChange:_this.props.onChange}),_this.controller.run("onConstruct")})),_this}return __extends(Diagram,_super),Diagram.prototype.getDiagramProps=function(){return this.diagramProps},Diagram.prototype.renderHotkeys=function(){var hotKeys=this.diagramProps.controller.run("customizeHotKeys",this.diagramProps);if(null===hotKeys)return null;if(!(hotKeys instanceof Map))throw new TypeError("customizeHotKeys must return a Map");var children=[];return hotKeys.forEach((function(v,k){children.push(React.createElement(core_2.Hotkey,__assign({key:k},v,{global:!0})))})),React.createElement(core_2.Hotkeys,null,children)},Diagram.prototype.render=function(){var _a=this.props,commands=_a.commands,plugins=_a.plugins,model=_a.model;return this.resolveController(plugins,commands,plugins_1.DefaultPlugin),this.diagramProps=__assign(__assign({},this.props),{controller:this.controller,model:model,diagram:this}),this.controller.run("renderDiagram",this.diagramProps)},Diagram=__decorate([core_2.HotkeysTarget],Diagram)}(React.Component);exports.Diagram=Diagram},813:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(814)},814:function(module,exports,__webpack_require__){var content=__webpack_require__(815);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0,insertInto:void 0};__webpack_require__(213)(content,options);content.locals&&(module.exports=content.locals)},815:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(212)(!1);var getUrl=__webpack_require__(816),___CSS_LOADER_URL___0___=getUrl(__webpack_require__(429)),___CSS_LOADER_URL___1___=getUrl(__webpack_require__(429)+"#iefix"),___CSS_LOADER_URL___2___=getUrl(__webpack_require__(817)),___CSS_LOADER_URL___3___=getUrl(__webpack_require__(818)),___CSS_LOADER_URL___4___=getUrl(__webpack_require__(819)+"#iconfont");exports.push([module.i,'@font-face {font-family: "iconfont";\n  src: url('+___CSS_LOADER_URL___0___+"); /* IE9 */\n  src: url("+___CSS_LOADER_URL___1___+") format('embedded-opentype'), \n  url('data:application/x-font-woff2;charset=utf-8;base64,d09GMgABAAAAAA60AAsAAAAAHgwAAA5mAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHEIGVgCGdAqoZKBKATYCJANwCzoABCAFhG0HgkQb8BgR1bTjQfZVgd1Mfg9p8RAvKmNbOFArtB3/PXPCQUz+lnz+ac7+vkxk8mZixCF1qBkVh+5i1bVMUoe2yHapw8J2OWeZsNXkSyVCkDqSSdVhxekutEDFWMuKSBoggID25bJ9a47BR5ir8i3NV59PNuXJZTObvS+S5jRKYXEgHDB0ogRX3Z/1898ABHKA55t7tbkiqdZhxq7CDIWZU7lcPlzu0vY+388ov4xpx6xAVci+CvWhBEkB1ZebJGHGRk4IO6HkjJ7B2GxH7KOwHm2YMsB1bw4EAEVvDAfJyJrrBAs5hEowbPWqouVgK17IW4oJ2FqlZlm5guyEAqxsh6wNwP/ltydfYSxhARkUDMS8TxZm5iM9hu/eYsS4iCWJH2/44wCGywEMgOEA5ICsr7aBJILJ8HBJqG6MHN8CGAqSfBpDjMZ0MUvMFkuK9YsNjk2PzY8tixXEqmK/ftb92aef/fLFnm9SvnsrfiCGmNrs7E1p/e6H4ARDAzD87Ef/Z94kADJQcDBCDyvkMEEFA1iYYQGBBgooYQODBPDQQgc7EpEENUCUwFAeAIiTdiYBMUQnQAbE1CIoEDsBHBDTMRhBTWDQg5rBYAW1gEEOaoMK0CQwqED7gcEAOhgMLOh0qPBF50MF6DIwENACMGhAq8CgAP0VJ0AJfNbNYJP0UzAwoL/gBCQAX+w5ATzwTT8GLWh/MOhAB4DBDpoMhkTQFHAk4cBTMA5qAIADy0wCkA8oOwHVlxB5bSCyEwBgNEWGlUEHAQtZU0K9EiDUJFUBSW8Z1SZSg14cnUMchPLquEOUPD8wwZCoduj5AWWSGGlySjVKrZ2Tw82HBivnlalEYhgNvFpu6W0n6kDQNBQXK3il9H+F9levol9cBVlDCvJJz22h+165L0qIR/I2A2KEW1V9JVnfeC1RVdsyiJOFr6bomlqSGK7hqn2tTiY2U94rkRL96519lQe6Mg1v3RqgOtidVUJiEU+U0/giEDxSlTeDOJNwvigBcffEm6nWHCgOxqG+Y7zG6RcjPqvbFyKeoMUV9DaLZoF6iNMIB444MM60O+Rmhu78zT5VoyKvKDTTuim/0NBbkG9tp6gg4It6LIVrbt1dgcIifPigeFYhg6zfwe4CCs6SUUVqBkf23ljNEeozAk5GZwFW+q7hG6VERe2cmJz1V8dzEANTFIN4aiwuaSB/5kr/ksak8YU8wVyBztjeljKekC9glvn93qCb9wY9IasmEBD96wJN1tAYy5Nbt9zd3a7OTmdXlwDn+zSD1ErNqUS3c39nxpvd/Q/dyvadNQciIatXFP3e6OpX1znOW4flXPcqYWG8LveCxna6gmfqzILTX3/WWq4ZEKRUpslf7Soz1SaGP9xsU4Yj602IwmUXe52r8YwNFBzCZwfZeyr0s1fMGXxeJ1+cveZm07fKnMK455p38vKkLROcKwlFw1HUtXtv9PYcH0Q8NzmONB4j+276OnqJR5LB+TrQmmoHtZCAV9i4c+V4p0uoixNoMFjL+SIutza4QKA63xusqbWmhc7Wm6b5i1aTwWGBd8mEPFEfFgyEqw/nUW+QEI+1KGR1d4/rCwCiyWnK97u4OiO02NRiA/RFSqqqgJ4sZzQyF6HYRjhHVlS/3iJeplkr14BXaLCmDa9WXWQ4asCKNBsL7fC/K0Zc3sPV4UhDUy3xSM4CL94FEohdM53+6nADp9lCei3h00Iei3S7KwOFri5nZ+dia8J5sldBeO+7Q1081uhlhjJNwxAhkqI5KDX54Soo8JpdDDqB2JzY6fQfphO8h5ur7eZwvc1kan79xa0umq/JmtjtPv7eeK4hG3vrJunuzqfhiPcub/NyKkJwmcINvqZaT03j7D4qVGorlt7Sfkq9wSAh1Ov3AxzxKBFHHKIZYoCjiCnEbRHKWE1BwlAnmHRxcA/HGMN1xbRBrdcPD52+UIgQ3zolHiWiiEMgF45PxBTqtgplrKYQYTgnsB8taOKmgJmEvVjKhXxKig8PLgVXHvUMdUmb9DA8lyZMcx9EEY9Etevh1kIwCPsE/bi6yAZGcIoCIykqbfHJVOdI0cFokmtI7fkUIbDFDTl8LpHwsoMTKw5XunIPDhPP8lWgHEXDnK8B8uLKSwc0k0YOmlIj/kaqVCVGQ6tNFrJNYwNknA81sszp4S6cysTMC3HjyUqnT0Scxq9pCPBXGjg3DioL+bOucdYeIzG1ibxREcAIUrs5O4NBysMPqR7SmrmdhPDeamCaFOdorpDNhFpOQ1aMLxDuwqHxZTE4H2EcGPHd9yXCwq+Tp89kLj3Q/n3lT8hN0xq0YkQciVtbNtHU/difSiH96enfUgpjoyUNfVtxazS6MhdP5uQooCAPP5n1acnVQScSDZKlVVKttaa1Km759O/bR5yRtbweVeH6nzIzw/ZUe7iyUm6jipcyZaxqe3/7jqy5GqCnQ3uPKLbu72ysL1S1MkRt6YAJHf4RhpL115Ol5LaSDes23Oeh6+vXv3muD2iUrN9YKpGYz+OPyrwm9xOPKf6tFNF//w99mUHc0PHUU716RVqHHGX++NXlr4qFbIKzU/jRzBa259bV5D8ssuSAMwyDgE64DLkIkjb9uVv0gekBfdvw8L0fb6xodenbSI9qY6PoffN9918Hd1YYCg1Lmuer24xtbGJcDc+nnO+cL8Iq/tP5ZlPF3rI/Di2oyKG5xWQ+WbBhw4LYTQAxw/xlxbNoaUnGpOxanXvE/G6t/WczbXtEPW+euGvuXDsrF9mpt0e+XBn+7pzWPnfuLoVN7YTsL/0dpg7/3YlZ/zxZULDdnmDfXiD8O2xp5D2b5wq1c8Vjew9xn+nBa689MPFA5b70tW7Kg360xOh3xu37GWn0/lLUPK3hl5trrZoZ5ipRXKkyz9AgYdiBSbIoqGSSaPJ11FJUfdl4WR2lUWMUQqT4kukS6qKiSSid0jK7dExqdOJdJlkQav0oWyKRL0JdPTLHSdqZPdwMx6sWFb/rYIWnBNbxbvGi5P7JVVuK2xyqWh+V40rFlireZ1HFJY4taM3iLlmpih9BX1pz4kQN1X2PYj8RhDBuIdm5bydVVet2LBESVVW1kXuZ+7MktVC6v2DLdSlcXwbnhSm6IET6acNSpCbp8aSIsF2eupHmfSuw21lBlTF0KNF3dGSoBFU4spZxs2vsoIEZs/tNT0nRG95rmz79gw/6oxRpLSKLx+ONYQrp3pm+E51OKSpJcVEQRZfIWWW80dfpBCBURvWCFF6HoUOjUjQSHw2TkDRkGOfDhC4dMrOOTgkJ25K3JyDhheTykFM7rzq7/+ZNnZpyP4OknRfKGW5Wm1D+atcZ+fff78zsMd7PBeeOSaElGvFPCqQkKf/Tfrgy4IprgfWrx5/NKvwoo2TExtHr2s0vJm46F3QPQkJ58gve+fbkbZtw60jv22e2dfLc9NY4iIi3TO0ZmPbEwJ5+pxoMKYijoHjsmvyffxa7r3EIVOzyaSF/kf21g/r2xOeGcTePtn76gjl1/j/My+PrmPZ2Bu46KmE9SR8+eWP83NGz/beftPcVD840zJmgXOn5lMnKeP3dqO9Gx7/4k6x5gj9Ok3RfHOt17IvelH2uLX/ovb2P3el951jvvV9gzMusmy1TH+cP0OPqMsXWxarp8+XOSYpPlkzjWtgy5dY57AHVnG3KMraFm7bkG7ZCOX863av6OHdAYU3JWMGUMTMNqckyi3z6aoWXNc+exh1nyw3/iRxgF29VlLPHuWmzObVXsXoa7x7dz/xo+bGgIN6YuJ39EhJaW6M/0JiaUFDQT7syRUwXz71z/1pLG9Y8UI32DfGZVKbaIbXGj0oWLHcdo++wV80O0132itiS8dGBQCcnN/2QdLUHfS4n8rGioUdsGTUM6HFKoOFfP/THDrzzaOIf/dQR5r3xJox6/qLuG4NT+77WafiG2o7TeXXsGxWqARfnaUt139DB++h1um8I/UZXqpt7cRSn5evma0uMhWeSp5z8bOC08hvF7pKyrMGKebd4Lbdiz1xdqf5rQ6nuOm0ZTL/Wl2rn7XFZ/D1uzdNiBFM2mbK0vBO1IBNk5nj+zF1yHmRnV/2R/cfu1OyUHjARjC/bs3Xh1MohE4vyq1J7QDbIzv6rKjU7tcd2bnwaID6VOc30AuKtvsKkA/EWCWZWiEwHI1a851lmfMU1Zj+TVnGR+ZPZFBblnrZJACYo68aAeJeTmaFV/WnZDZ8prRDF+8mtDokRGZcJ72aGIdxpVDKAYJC2y8w7zGOo+M6TjAFf15HUttRXdFGOWbqNVF4UToeUyXljc3XTfllwTxQn3O2rmUP88amzq7M4yEZh8oNeAgrrEb/XN6fwOfZ1D9Gzvv1+AE28yuEH7ZABaHHTy8DLCf5mUTMbywlmK8pQlFHpJTJYyUCePlxU4IwTlVhpIjXM3cocIzJGigQM9TkQCb0vUUarRWTofQN5+q+oYPEvKuljRMrVhUXOwFatrggkgxa7s/AKowkDvEqH34Ptg6SyU5Y/A2XfLJqyrnffQQTysUA+2JbZCEPYidvB1iAEFIlwD4pLx5y2VWV0C5YKu8HK4wiQODlaE3bONT0FRebdbNX4+veA1Qskarntd81ngGR+6kKjVBuAOxKNbjsr5uzAajHhhoiuJagj3BIOQtCBhKRPtAcUVnIWbclWRR5nTEk5ea3bRzRsiXcQH4cjGZIpVBqdYDBZbA6Xl6GEjJkyZ8maLXuJJeWol8lA4yTLA8zi3co8VQEzTPqocaYgMtA8wtH4AGsNgw0yFBE1zOCUkHihMASZctUso54QIm8UFpCK5NUL0CSFPk87H5P4a6l1kf0u+GiXxaLK+aCnERnyAhPEHuafsoMOLoM8Y89FABNDn+suyFvHE9Cel9nhsegg9jPfTf7htZm2KdCfU9lP4zEOBgA=') format('woff2'),\n  url("+___CSS_LOADER_URL___2___+") format('woff'),\n  url("+___CSS_LOADER_URL___3___+") format('truetype'), \n  url("+___CSS_LOADER_URL___4___+') format(\'svg\'); /* iOS 4.1- */\n}\n\n.iconfont {\n  font-family: "iconfont" !important;\n  font-size: 16px;\n  font-style: normal;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.bm-redo:before {\n  content: "\\e65e";\n}\n\n.bm-save:before {\n  content: "\\e600";\n}\n\n.bm-saveas:before {\n  content: "\\e7e5";\n}\n\n.bm-close:before {\n  content: "\\e616";\n}\n\n.bm-undo:before {\n  content: "\\e682";\n}\n\n.bm-center:before {\n  content: "\\e6f6";\n}\n\n.bm-newfile:before {\n  content: "\\e61b";\n}\n\n.bm-delete-node:before {\n  content: "\\e628";\n}\n\n.bm-export:before {\n  content: "\\efc7";\n}\n\n.bm-collapse:before {\n  content: "\\e609";\n}\n\n.bm-expand:before {\n  content: "\\e60a";\n}\n\n.bm-root:before {\n  content: "\\e993";\n}\n\n.bm-color-picker:before {\n  content: "\\e665";\n}\n\n.bm-plus:before {\n  content: "\\ed21";\n}\n\n.bm-minus:before {\n  content: "\\ed22";\n}\n\n.bm-add-sibling:before {\n  content: "\\e614";\n}\n\n.bm-add-child:before {\n  content: "\\e621";\n}\n\n.bm-notes:before {\n  content: "\\e7f5";\n}\n\n.bm-openfile:before {\n  content: "\\e60f";\n}\n\n.bm-theme:before {\n  content: "\\e618";\n}\n\n.bm-layout-left-and-right:before {\n  content: "\\e63d";\n}\n\n.bm-edit:before {\n  content: "\\e64e";\n}\n\n.bm-show-menu:before {\n  content: "\\e615";\n}\n\n.bm-import:before {\n  content: "\\e7d6";\n}\n\n.bm-layout-left:before {\n  content: "\\ed23";\n}\n\n.bm-layout-right:before {\n  content: "\\ed24";\n}\n\n.bm-layout-down:before {\n  content: "\\ed25";\n}\n\n',""])},817:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=__webpack_require__.p+"e7f226b17a3723f7347135fa42cacce5.woff"},818:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=__webpack_require__.p+"557cc7d7f97173b32338ec7032dad6cb.ttf"},819:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=__webpack_require__.p+"e5e3a9c2d88cea7f54c93efffd28b7eb.svg"},832:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var plugin_simple_text_editor_1=__webpack_require__(833),drag_and_drop_1=__webpack_require__(865),event_1=__webpack_require__(870),hotkey_1=__webpack_require__(871),layout_1=__webpack_require__(872),operation_1=__webpack_require__(873),react_1=__webpack_require__(874),style_1=__webpack_require__(969);exports.DefaultPlugin=function DefaultPlugin(){return[react_1.ReactPlugin(),layout_1.LayoutPlugin(),operation_1.OperationPlugin(),style_1.StylePlugin(),event_1.EventPlugin(),hotkey_1.HotKeyPlugin(),drag_and_drop_1.DragAndDrop(),plugin_simple_text_editor_1.default()]}},833:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var plugins_1=__webpack_require__(834);exports.default=plugins_1.default},834:function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(21),React=__webpack_require__(0),slate_plain_serializer_1=__webpack_require__(168),topic_content_editor_1=__webpack_require__(861),topic_desc_editor_1=__webpack_require__(864);exports.default=function SimpleTextEditorPlugin(){return{getTopicTitle:function(props){var model=props.model,controller=props.controller,topicKey=props.topicKey,block=model.getTopic(topicKey).getBlock(core_1.BlockType.CONTENT).block;return controller.run("serializeBlockData",__assign(__assign({},props),{block:block}))},renderTopicContentEditor:function(props){return React.createElement(topic_content_editor_1.TopicContentEditor,__assign({},props))},renderTopicDescEditor:function(props){return React.createElement(topic_desc_editor_1.TopicDescEditor,__assign({},props))},isBlockEmpty:function(props,next){var block=props.block,controller=props.controller;return block.type===core_1.BlockType.CONTENT||block.type===core_1.BlockType.DESC?null==block.data||""===controller.run("serializeBlockData",props):next()},serializeBlockData:function(props,next){var block=props.block;return block.type===core_1.BlockType.CONTENT||block.type===core_1.BlockType.DESC?"string"==typeof block.data?block.data:slate_plain_serializer_1.default.serialize(block.data):next()},serializeBlock:function(props,next){var block=props.block,controller=props.controller;return block.type===core_1.BlockType.CONTENT||block.type===core_1.BlockType.DESC?{type:block.type,data:controller.run("serializeBlockData",props)}:next()},deserializeBlock:function(props,next){return next()}}}},861:function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(21),simple_text_editor_1=__webpack_require__(443),TopicContentEditor=(__webpack_require__(16).default("node:topic-content-editor"),function(_super){function TopicContentEditor(props){return _super.call(this,props)||this}return __extends(TopicContentEditor,_super),TopicContentEditor.prototype.getCustomizeProps=function(){var _a=this.props,model=_a.model,topicKey=_a.topicKey,readOnly=_a.readOnly;return{block:model.getTopic(topicKey).getBlock(core_1.BlockType.CONTENT).block,readOnly:readOnly,refKeyPrefix:"content-editor",placeholder:"new",style:{whiteSpace:"pre"}}},TopicContentEditor.prototype.onClickOutSide=function(e){var _a=this.props,model=_a.model,topicKey=_a.topicKey;if(!(model.editingContentKey!==topicKey)){var controller=this.props.controller;controller.run("operation",__assign(__assign({},this.props),{opType:core_1.OpType.SET_TOPIC_CONTENT,data:this.state.content})),controller.run("operation",__assign(__assign({},this.props),{opType:core_1.OpType.FOCUS_TOPIC,focusMode:core_1.FocusMode.NORMAL}))}},TopicContentEditor}(simple_text_editor_1.SimpleTextEditor));exports.TopicContentEditor=TopicContentEditor},864:function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(21),simple_text_editor_1=__webpack_require__(443),log=__webpack_require__(16).default("node:topic-desc-editor"),TopicDescEditor=function(_super){function TopicDescEditor(props){var _this=_super.call(this,props)||this;return log("constructor"),_this}return __extends(TopicDescEditor,_super),TopicDescEditor.prototype.initState=function(){_super.prototype.initState.call(this);var _a=this.props,controller=_a.controller,key="topic-desc-data-"+_a.topicKey,value=this.state.content;controller.run("setTempValue",{key:key,value:value})},TopicDescEditor.prototype.getCustomizeProps=function(){var _a=this.props,model=_a.model,topicKey=_a.topicKey;return{block:model.getTopic(topicKey).getBlock(core_1.BlockType.DESC).block,readOnly:model.editingDescKey!==topicKey,refKeyPrefix:"desc-editor",placeholder:"write topic notes here"}},TopicDescEditor.prototype.onChange=function(_a){var value=_a.value;log("onChange");var _b=this.props,controller=_b.controller,topicKey=_b.topicKey;if(!(_b.model.editingDescKey!==topicKey)){var key="topic-desc-data-"+topicKey;controller.run("setTempValue",{key:key,value:value}),this.setState({content:value})}},TopicDescEditor}(simple_text_editor_1.SimpleTextEditor);exports.TopicDescEditor=TopicDescEditor},865:function(module,exports,__webpack_require__){"use strict";var __makeTemplateObject=this&&this.__makeTemplateObject||function(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked},__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var templateObject_1,core_1=__webpack_require__(21),debug_1=__webpack_require__(16),React=__webpack_require__(0),styled_components_1=__webpack_require__(13),utils_1=__webpack_require__(38),topic_drop_effect_1=__webpack_require__(869),log=debug_1.default("plugin:drag-and-drop"),DropArea=styled_components_1.default.div.withConfig({displayName:"DropArea",componentId:"sc-1cii8a2"})(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  height: ",";\n  width: 100%;\n  margin: 5px 0px;\n"],["\n  height: ",";\n  width: 100%;\n  margin: 5px 0px;\n"])),(function(props){return props.height+"px"}));exports.DragAndDrop=function DragAndDrop(){var dragTargetKey=null,dragTargetDir=null;return{renderTopicDropArea:function(props){var topicKey=props.topicKey,dropDir=props.dropDir,saveRef=props.saveRef,controller=props.controller,model=props.model,eventHandlers={onDragEnter:function(ev){log("onDragEnter",topicKey,dropDir),controller.run("handleTopicDragEnter",__assign(__assign({},props),{ev:ev,dropDir:dropDir}))},onDragLeave:function(ev){log("onDragLeave",topicKey,dropDir),controller.run("handleTopicDragLeave",__assign(__assign({},props),{ev:ev,dropDir:dropDir}))},onDragOver:function(ev){ev.preventDefault()},onDrop:function(ev){log("onDrop",topicKey,dropDir),controller.run("handleTopicDrop",__assign(__assign({},props),{ev:ev,dropDir:dropDir}))}};return React.createElement(DropArea,__assign({height:model.config.theme.marginV/2,ref:saveRef("dropArea-"+dropDir+"-"+topicKey)},eventHandlers))},renderDragAndDropEffect:function(props){log("renderDragAndDropEffect");var saveRef=props.saveRef;return React.createElement(topic_drop_effect_1.TopicDropEffect,__assign({ref:saveRef(utils_1.RefKey.DROP_EFFECT_KEY)},props))},getDragTargetProps:function(props){return{key:dragTargetKey,dropDir:dragTargetDir}},handleTopicDragStart:function(props){var controller=props.controller;props.ev.stopPropagation(),controller.run("operation",__assign(__assign({},props),{opType:core_1.OpType.FOCUS_TOPIC,focusMode:core_1.FocusMode.DRAGGING}))},canDrop:function(props){var srcKey=props.srcKey,dstKey=props.dstKey,model=props.model,dropDir=props.dropDir;return srcKey!==model.editorRootTopicKey&&srcKey!==dstKey&&core_1.getRelationship(model,srcKey,dstKey)!==core_1.TopicRelationship.ANCESTOR&&((dstKey!==model.editorRootTopicKey||"in"===dropDir)&&(model.getTopic(srcKey).parentKey!==dstKey||"in"!==dropDir))},handleTopicDragEnter:function(props){var dropDir=props.dropDir,topicKey=props.topicKey,controller=props.controller,model=props.model;props.ev;log("handleTopicDragEnter:",topicKey,dropDir),controller.run("canDrop",__assign(__assign({},props),{srcKey:model.focusKey,dstKey:topicKey}))&&(dragTargetKey=topicKey,dragTargetDir=dropDir,controller.change(model))},handleTopicDragLeave:function(props){var controller=props.controller,model=props.model,topicKey=props.topicKey,dropDir=props.dropDir,getRef=props.getRef,relatedTarget=props.ev.nativeEvent.relatedTarget;log("handleTopicDragLeave:",topicKey,dropDir);var content=getRef(utils_1.contentRefKey(topicKey));content==relatedTarget||content.contains(relatedTarget)||(dragTargetKey=null,dragTargetDir=null,controller.change(model))},handleTopicDrop:function(props){log("handleTopicDrop");var controller=props.controller,topicKey=props.topicKey,model=props.model;props=__assign(__assign({},props),{srcKey:model.focusKey,dstKey:topicKey}),dragTargetKey=null,dragTargetDir=null,controller.run("canDrop",props)&&controller.run("operation",__assign(__assign({},props),{opType:core_1.OpType.DRAG_AND_DROP}))}}}},866:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var React=__webpack_require__(0);function iconClassName(name){return"icon iconfont bm-"+name}exports.IconName={SHOW_MENU:"show-menu",CLOSE:"close",COLOR_PICKER:"color-picker",NOTES:"notes",PLUS:"plus",MINUS:"minus",COLLAPSE_ALL:"collapse",EXPAND_ALL:"expand",CENTER:"center"},exports.iconClassName=iconClassName,exports.Icon=function Icon(iconName){return React.createElement("span",{className:iconClassName(iconName)})}},867:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.contentRefKey=function contentRefKey(key){return"content-"+key},exports.topicWidgetRefKey=function topicWidgetRefKey(key){return"topic-widget-"+key},exports.topicRefKey=function topicRefKey(key){return"topic-"+key},exports.linksRefKey=function linksRefKey(key){return"links-"+key},exports.linksSvgRefKey=function linksSvgRefKey(key){return"links-svg-"+key},exports.collapseRefKey=function collapseRefKey(key){return"collapse-"+key},exports.RefKey={DIAGRAM_ROOT_KEY:"DIAGRAM-ROOT",DRAG_SCROLL_WIDGET_KEY:"DragScrollWidget",SVG_HIGHLIGHT_KEY:"svg-highlight",FOCUS_HIGHLIGHT_KEY:"focus-highlight",DROP_EFFECT_KEY:"drop-effect"},exports.EventKey={CENTER_ROOT_TOPIC:"CENTER_ROOT_TOPIC"}},868:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cancelEvent=function(e){e.stopPropagation()}},869:function(module,exports,__webpack_require__){"use strict";var extendStatics,__makeTemplateObject=this&&this.__makeTemplateObject||function(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked},__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var templateObject_1,debug_1=__webpack_require__(16),React=__webpack_require__(0),styled_components_1=__webpack_require__(13),common_1=__webpack_require__(52),utils_1=__webpack_require__(38),log=debug_1.default("node:topic-drop-effect"),DropEffectSvg=styled_components_1.default.svg.withConfig({displayName:"DropEffectSvg",componentId:"sc-1ptthlf"})(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"],["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"]))),TopicDropEffect=function(_super){function TopicDropEffect(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.state={content:null},_this}return __extends(TopicDropEffect,_super),TopicDropEffect.prototype.layout=function(){var props=this.props,_a=this.props,getRef=_a.getRef,model=_a.model,zoomFactor=_a.zoomFactor,targetProps=_a.controller.run("getDragTargetProps",props),key=targetProps.key,dropDir=targetProps.dropDir;if(log("layout",dropDir),null!==key){var content=getRef("in"===dropDir?utils_1.contentRefKey(key):"dropArea-"+dropDir+"-"+key),svg=getRef("svg-drop-effect"),bigView=getRef(utils_1.RefKey.DRAG_SCROLL_WIDGET_KEY).bigView,contentRect=utils_1.getRelativeRect(content,bigView,zoomFactor),svgRect=utils_1.getRelativeRect(svg,bigView,zoomFactor),x=contentRect.left-svgRect.left-3,y=contentRect.top-svgRect.top-3,width=contentRect.width+6,height=contentRect.height+6;this.setState({content:React.createElement("g",null,React.createElement("rect",{x:x,y:y,width:width,height:height,fill:"none",stroke:model.config.theme.highlightColor,strokeDasharray:"5,5",strokeWidth:2}))})}else this.setState({content:null})},TopicDropEffect.prototype.render=function(){var saveRef=this.props.saveRef;return React.createElement(DropEffectSvg,{ref:saveRef("svg-drop-effect")},this.state.content)},TopicDropEffect}(common_1.BaseWidget);exports.TopicDropEffect=TopicDropEffect},870:function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(21),log=__webpack_require__(16).default("plugin:event");exports.EventPlugin=function EventPlugin(){var eventListeners={};return{handleTopicClick:function(props){log("handleTopicClick");var controller=props.controller,model=props.model,topicKey=props.topicKey;log(model.zoomFactor),null===model.editingDescKey&&model.editingContentKey!==topicKey&&(model.focusKey===topicKey&&model.focusMode===core_1.FocusMode.EDITING_CONTENT||controller.run("operation",__assign(__assign({},props),{opType:core_1.OpType.FOCUS_TOPIC,focusMode:core_1.FocusMode.NORMAL})))},handleTopicDoubleClick:function(props){var controller=props.controller;null===props.model.editingDescKey&&controller.run("operation",__assign(__assign({},props),{opType:core_1.OpType.FOCUS_TOPIC,focusMode:core_1.FocusMode.EDITING_CONTENT}))},handleTopicContextMenu:function(props){props.controller.run("operation",__assign(__assign({},props),{opType:core_1.OpType.FOCUS_TOPIC,focusMode:core_1.FocusMode.SHOW_POPUP}))},handleActiveModalClose:function(props){var controller=props.controller,activeModalProps=controller.run("getActiveModalProps",props);return null==activeModalProps?null:"edit-desc"===activeModalProps.name?function(){controller.run("operation",__assign(__assign({},props),{focusMode:core_1.FocusMode.NORMAL,opType:core_1.OpType.FOCUS_TOPIC}))}:void 0},addEventListener:function(props){var key=props.key,listener=props.listener,once=props.once,controller=props.controller;function only(){listener(),controller.run("removeEventListener",{key:key,listener:listener})}eventListeners[key]||(eventListeners[key]=[]),once?(only.origin=listener,eventListeners[key].push(only)):eventListeners[key].push(listener)},removeEventListener:function(props){var key=props.key,listener=props.listener;props.controller;eventListeners[key]&&(eventListeners[key]=eventListeners[key].filter((function(fn){return fn!==listener&&fn.origin!==listener})))},fireEvent:function(props){var key=props.key;eventListeners[key]&&eventListeners[key].forEach((function(fn){return fn()}))}}}},871:function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(21);exports.HotKeyName={ADD_CHILD:"ADD_CHILD",ADD_SIBLING:"ADD_SIBLING",DELETE_TOPIC:"DELETE_TOPIC",EDIT_CONTENT:"EDIT_CONTENT",EDIT_NOTES:"EDIT_NOTES",SET_EDITOR_ROOT:"SET_EDITOR_ROOT"},exports.HotKeyPlugin=function HotKeyPlugin(){return{customizeHotKeys:function(props){var handleKeyDown=function(opType){return function(e){!function op(opType,props){var topicKey=props.topicKey,model=props.model,controller=props.controller;void 0===topicKey&&(props=__assign(__assign({},props),{topicKey:model.focusKey})),controller.run("operation",__assign(__assign({},props),{opType:opType}))}(opType,props)}};return new Map([[exports.HotKeyName.ADD_CHILD,{label:"add child",combo:"tab",onKeyDown:handleKeyDown(core_1.OpType.ADD_CHILD)}],[exports.HotKeyName.ADD_SIBLING,{label:"add sibling",combo:"enter",onKeyDown:handleKeyDown(core_1.OpType.ADD_SIBLING)}],[exports.HotKeyName.DELETE_TOPIC,{label:"delete topic",combo:"del",onKeyDown:handleKeyDown(core_1.OpType.DELETE_TOPIC)}],[exports.HotKeyName.EDIT_CONTENT,{label:"edit content",combo:"space",onKeyDown:handleKeyDown(core_1.OpType.START_EDITING_CONTENT)}],[exports.HotKeyName.EDIT_NOTES,{label:"edit notes",combo:"alt + d",onKeyDown:handleKeyDown(core_1.OpType.START_EDITING_DESC)}],[exports.HotKeyName.SET_EDITOR_ROOT,{label:"set editor root",combo:"alt + shift + f",onKeyDown:handleKeyDown(core_1.OpType.SET_EDITOR_ROOT)}]])}}}},872:function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__values=this&&this.__values||function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(21),utils_1=__webpack_require__(38);exports.LayoutPlugin=function LayoutPlugin(){return{getPartTopics:function(_a){var layout=_a.layout,model=_a.model,topicKey=_a.topicKey,topic=model.getTopic(topicKey),subTopicCount=topic.subKeys.size,topics=topic.subKeys.toArray();switch(layout){case core_1.DiagramLayoutType.LEFT_TO_RIGHT:return{R:topics};case core_1.DiagramLayoutType.RIGHT_TO_LEFT:return{L:topics};case core_1.DiagramLayoutType.LEFT_AND_RIGHT:return{L:topics.slice(Math.ceil(subTopicCount/2),subTopicCount),R:topics.slice(0,Math.ceil(subTopicCount/2))};case core_1.DiagramLayoutType.TOP_TO_BOTTOM:return{B:topics}}},createSubTopics:function(props){var model=props.model,topicKey=props.topicKey,controller=props.controller,topics=props.topics,saveRef=props.saveRef,topic=model.getTopic(topicKey);if(0===topics.size||topic.collapse)return null;var subTopics=[];return topics.forEach((function(tKey){var topicProps=__assign(__assign({},props),{topicKey:tKey,key:tKey,ref:saveRef(utils_1.topicWidgetRefKey(tKey))});subTopics.push(controller.run("renderTopicWidget",topicProps))})),{subTopics:subTopics}},layout:function(props){var getRef=props.getRef,model=props.model,links=getRef(utils_1.linksRefKey(model.editorRootTopicKey)),highlight=getRef(utils_1.RefKey.FOCUS_HIGHLIGHT_KEY),dropEffect=getRef(utils_1.RefKey.DROP_EFFECT_KEY);links&&links.layout(),highlight&&highlight.layout(),dropEffect&&dropEffect.layout(),function layoutTopic(topic){var e_1,_a;if(topic.key!==model.editorRootTopicKey){var topicWidget=getRef(utils_1.topicWidgetRefKey(topic.key));topicWidget&&topicWidget.layoutLinks()}try{for(var _b=__values(topic.subKeys),_c=_b.next();!_c.done;_c=_b.next()){var subKey=_c.value;layoutTopic(model.getTopic(subKey))}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}}(model.getTopic(model.editorRootTopicKey))},setLayoutDir:function(props){var layoutDir=props.layoutDir,model=props.model;props.controller.change(core_1.ModelModifier.setLayoutDir({model:model,layoutDir:layoutDir}))},getRelativeRect:function(props){var element=props.element,controller=props.controller,getRef=props.getRef,zoomFactor=controller.run("getZoomFactor",props),bigView=getRef(utils_1.RefKey.DRAG_SCROLL_WIDGET_KEY).bigView;return utils_1.getRelativeRect(element,bigView,zoomFactor)},getRelativeRectFromViewPort:function(props){var element=props.element,controller=props.controller,getRef=props.getRef,zoomFactor=controller.run("getZoomFactor",props),viewBox=getRef(utils_1.RefKey.DRAG_SCROLL_WIDGET_KEY).viewBox;return utils_1.getRelativeRect(element,viewBox,zoomFactor)},getRelativeVectorFromViewPort:function(props){var element=props.element,controller=props.controller,getRef=props.getRef,viewBox=(controller.run("getZoomFactor",props),getRef(utils_1.RefKey.DRAG_SCROLL_WIDGET_KEY).viewBox);return utils_1.getRelativeVector(element,viewBox)},addZoomFactorChangeEventListener:function(props){props.controller.run("addTempValueChangeListener",__assign({key:"ZoomFactor"},props))},removeZoomFactorChangeEventListener:function(props){props.controller.run("removeTempValueChangeListener",__assign({key:"ZoomFactor"},props))},setZoomFactor:function(props){var controller=props.controller,zoomFactor=props.zoomFactor;return controller.run("setTempValue",{key:"ZoomFactor",value:zoomFactor})},getZoomFactor:function(props){return props.controller.run("getTempValue",{key:"ZoomFactor"})||1}}}},873:function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(21),debug_1=__webpack_require__(16),immutable_1=__webpack_require__(3),log=debug_1.default("plugin:operation");exports.OperationPlugin=function OperationPlugin(){var OpMap=new Map([[core_1.OpType.TOGGLE_COLLAPSE,core_1.ModelModifier.toggleCollapse],[core_1.OpType.COLLAPSE_ALL,core_1.ModelModifier.collapseAll],[core_1.OpType.EXPAND_ALL,core_1.ModelModifier.expandAll],[core_1.OpType.ADD_CHILD,core_1.ModelModifier.addChild],[core_1.OpType.ADD_SIBLING,core_1.ModelModifier.addSibling],[core_1.OpType.DELETE_TOPIC,core_1.ModelModifier.deleteTopic],[core_1.OpType.FOCUS_TOPIC,core_1.ModelModifier.focusTopic],[core_1.OpType.SET_STYLE,core_1.ModelModifier.setStyle],[core_1.OpType.SET_TOPIC_CONTENT,core_1.ModelModifier.setContent],[core_1.OpType.SET_TOPIC_DESC,core_1.ModelModifier.setDesc],[core_1.OpType.START_EDITING_CONTENT,function(_a){var model=_a.model,topicKey=_a.topicKey;return core_1.ModelModifier.focusTopic({model:model,topicKey:topicKey,focusMode:core_1.FocusMode.EDITING_CONTENT})}],[core_1.OpType.START_EDITING_DESC,function(_a){var model=_a.model,topicKey=_a.topicKey,desc=model.getTopic(topicKey).getBlock(core_1.BlockType.DESC);return null!=desc.block&&null!=desc.block.data||(model=core_1.ModelModifier.setDesc({model:model,topicKey:topicKey,data:""})),core_1.ModelModifier.focusTopic({model:model,topicKey:topicKey,focusMode:core_1.FocusMode.EDITING_DESC})}],[core_1.OpType.DRAG_AND_DROP,function dragAndDrop(props){var srcKey=props.srcKey,dstKey=props.dstKey,dropDir=props.dropDir,model=props.model,srcTopic=model.getTopic(srcKey),dstTopic=model.getTopic(dstKey),srcParentKey=srcTopic.parentKey,srcParentSubKeys=model.getTopic(srcParentKey).subKeys,srcIndex=srcParentSubKeys.indexOf(srcKey);if(srcParentSubKeys=srcParentSubKeys.delete(srcIndex),"in"===dropDir){var dstSubKeys_1=dstTopic.subKeys;dstSubKeys_1=dstSubKeys_1.push(srcKey),model=model.withMutations((function(m){m.setIn(["topics",srcParentKey,"subKeys"],srcParentSubKeys).setIn(["topics",srcKey,"parentKey"],dstKey).setIn(["topics",dstKey,"subKeys"],dstSubKeys_1).setIn(["topics",dstKey,"collapse"],!1)}))}else{var dstParentKey_1=dstTopic.parentKey,dstParentSubKeys_1=model.getTopic(dstParentKey_1).subKeys,dstIndex=dstParentSubKeys_1.indexOf(dstKey);if(srcParentKey===dstParentKey_1){var newDstParentSubKeys_1=immutable_1.List();dstParentSubKeys_1.forEach((function(key){key!==srcKey&&(newDstParentSubKeys_1=key===dstKey?"prev"===dropDir?newDstParentSubKeys_1.push(srcKey).push(key):newDstParentSubKeys_1.push(key).push(srcKey):newDstParentSubKeys_1.push(key))})),model=model.withMutations((function(m){m.setIn(["topics",dstParentKey_1,"subKeys"],newDstParentSubKeys_1)}))}else"prev"===dropDir?dstParentSubKeys_1=dstParentSubKeys_1.insert(dstIndex,srcKey):"next"===dropDir&&(dstParentSubKeys_1=dstParentSubKeys_1.insert(dstIndex+1,srcKey)),model=model.withMutations((function(m){m.setIn(["topics",srcParentKey,"subKeys"],srcParentSubKeys).setIn(["topics",srcKey,"parentKey"],dstParentKey_1).setIn(["topics",dstParentKey_1,"subKeys"],dstParentSubKeys_1).setIn(["topics",dstParentKey_1,"collapse"],!1)}))}return model}],[core_1.OpType.SET_EDITOR_ROOT,core_1.ModelModifier.setEditorRootTopicKey]]),undoStack=immutable_1.Stack(),redoStack=immutable_1.Stack();return{getAllowUndo:function(props){var model=props.model,opType=props.opType;if(opType)switch(opType){case core_1.OpType.FOCUS_TOPIC:case core_1.OpType.START_EDITING_CONTENT:case core_1.OpType.START_EDITING_DESC:return!1}switch(model.focusMode){case"EDITING_DESC":case"EDITING_CONTENT":return!1}return model.config.allowUndo},getUndoRedoStack:function(){return{undoStack:undoStack,redoStack:redoStack}},setUndoStack:function(props){log("setUndoStack",props.undoStack),undoStack=props.undoStack},setRedoStack:function(props){log("setRedoStack",props.redoStack),redoStack=props.redoStack},canUndo:function(props){var controller=props.controller,undoStack=controller.run("getUndoRedoStack",props).undoStack,allowUndo=controller.run("getAllowUndo",props);return undoStack.size>0&&allowUndo},canRedo:function(props){var controller=props.controller,redoStack=controller.run("getUndoRedoStack",props).redoStack,allowUndo=controller.run("getAllowUndo",props);return redoStack.size>0&&allowUndo},undo:function(props){var controller=props.controller,model=props.model;if(controller.run("getAllowUndo",props)){var _a=controller.run("getUndoRedoStack",props),undoStack=_a.undoStack,redoStack=_a.redoStack,newModel=undoStack.peek();newModel&&(controller.run("setUndoStack",__assign(__assign({},props),{undoStack:undoStack.shift()})),controller.run("setRedoStack",__assign(__assign({},props),{redoStack:redoStack.push(model)})),log(newModel),controller.change(newModel))}},redo:function(props){var controller=props.controller,model=props.model;if(controller.run("getAllowUndo",props)){var _a=controller.run("getUndoRedoStack",props),undoStack=_a.undoStack,redoStack=_a.redoStack,newModel=redoStack.peek();newModel&&(controller.run("setUndoStack",__assign(__assign({},props),{undoStack:undoStack.push(model)})),controller.run("setRedoStack",__assign(__assign({},props),{redoStack:redoStack.shift()})),controller.change(newModel))}},beforeOperation:function(props){},operation:function(props){var newModel,opType=props.opType,controller=props.controller,model=props.model,opArray=props.opArray;if(log("operation:",opType||opArray),log("model:",model),controller.run("beforeOperation",props),null!=opType&&null!=opArray)throw new Error("operation: opType and opArray conflict!");if(controller.run("getAllowUndo",props)){var undoStack_1=controller.run("getUndoRedoStack",props).undoStack;controller.run("setUndoStack",__assign(__assign({},props),{undoStack:undoStack_1.push(model)}))}if(null!=opArray){if(!Array.isArray(opArray))throw new Error("operation: the type of opArray must be array!");newModel=opArray.reduce((function(acc,cur){var opType=cur.opType;if(!OpMap.has(opType))throw new Error("opType:"+opType+" not exist!");return OpMap.get(opType)(__assign(__assign({controller:controller},cur),{model:acc}))}),model)}else{if(!OpMap.has(opType))throw new Error("opType:"+opType+" not exist!");newModel=OpMap.get(opType)(props)}log("newModel:",newModel),controller.change(newModel),controller.run("afterOperation",props)},afterOperation:function(props){}}}},874:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var rendering_1=__webpack_require__(875),utils_1=__webpack_require__(968);exports.ReactPlugin=function ReactPlugin(options){return void 0===options&&(options={}),[rendering_1.RenderingPlugin(),utils_1.UtilsPlugin()]}},875:function(module,exports,__webpack_require__){"use strict";var __makeTemplateObject=this&&this.__makeTemplateObject||function(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked},__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var templateObject_1,core_1=__webpack_require__(21),debug_1=__webpack_require__(16),React=__webpack_require__(0),styled_components_1=__webpack_require__(13),common_1=__webpack_require__(52),utils_1=__webpack_require__(38),editor_root_breadcrumbs_1=__webpack_require__(876),mind_drag_scroll_widget_1=__webpack_require__(877),modals_1=__webpack_require__(878),root_sublinks_1=__webpack_require__(879),root_widget_1=__webpack_require__(880),style_editor_1=__webpack_require__(881),topic_collapse_icon_1=__webpack_require__(956),topic_content_1=__webpack_require__(957),topic_content_widget_1=__webpack_require__(958),topic_context_menu_1=__webpack_require__(959),topic_desc_1=__webpack_require__(960),topic_highlight_1=__webpack_require__(961),topic_sub_links_1=__webpack_require__(962),topic_widget_1=__webpack_require__(963),view_port_util_1=__webpack_require__(964),context_menus_1=__webpack_require__(966),theme_1=__webpack_require__(967),log=debug_1.default("plugin:rendering");exports.RenderingPlugin=function RenderingPlugin(){var DiagramRoot=styled_components_1.default.div.withConfig({displayName:"DiagramRoot",componentId:"sc-1p6jkrx"})(templateObject_1||(templateObject_1=__makeTemplateObject(["\n    width: 100%;\n    height: 100%;\n    background: ",";\n    position: relative;\n  "],["\n    width: 100%;\n    height: 100%;\n    background: ",";\n    position: relative;\n  "])),(function(props){return props.theme.background}));return{renderDiagram:function(props){var model=props.model,controller=props.controller;return React.createElement(common_1.SaveRef,null,(function(saveRef,getRef){var widgetProps=__assign(__assign({},props),{saveRef:saveRef,getRef:getRef});return log("renderDiagram",model),React.createElement(theme_1.default,{theme:model.config.theme},React.createElement(DiagramRoot,{ref:saveRef(utils_1.RefKey.DIAGRAM_ROOT_KEY)},React.createElement(mind_drag_scroll_widget_1.MindDragScrollWidget,__assign({},widgetProps)),controller.run("renderDiagramCustomize",widgetProps)))}))},renderDiagramCustomize:function(props){var controller=props.controller,model=props.model;return[controller.run("renderEditorRootBreadcrumbs",__assign(__assign({},props),{topicKey:model.focusKey})),controller.run("renderStyleEditor",__assign(__assign({},props),{topicKey:model.focusKey})),controller.run("renderModals",__assign(__assign({},props),{topicKey:model.focusKey})),controller.run("renderViewPortViewer",props)]},renderEditorRootBreadcrumbs:function(props){return React.createElement(editor_root_breadcrumbs_1.EditorRootBreadcrumbs,__assign({key:"EditorRootBreadcrumbs"},props))},renderModals:function(props){return React.createElement(modals_1.Modals,__assign({key:"modals"},props))},renderModal:function(props){return null},getActiveModalProps:function(props){return null},renderDoc:function(_a){return _a.children},renderRootWidget:function(props){return React.createElement(root_widget_1.RootWidget,__assign({},props))},renderTopicWidget:function(props){return React.createElement(topic_widget_1.TopicWidget,__assign({},props))},renderTopicContent:function(props){return React.createElement(topic_content_widget_1.TopicContentWidget,__assign({},props))},renderTopicContextMenu:function(props){return React.createElement(topic_context_menu_1.TopicContextMenu,__assign({},props))},customizeTopicContextMenu:context_menus_1.customizeTopicContextMenu,renderTopicCollapseIcon:function(props){return React.createElement(topic_collapse_icon_1.TopicCollapseIcon,__assign({},props))},renderTopicBlocks:function(props){var model=props.model,topicKey=props.topicKey,controller=props.controller,blocks=model.getTopic(topicKey).blocks,res=[],i=0;return blocks.forEach((function(block){var b=controller.run("renderTopicBlock",__assign(__assign({},props),{block:block,blockKey:"block-"+i}));b&&(res.push(React.createElement(React.Fragment,{key:"block-"+i},b)),i++)})),res},renderTopicBlock:function(props){var controller=props.controller,block=props.block;props.topicKey,props.model;switch(block.type){case core_1.BlockType.CONTENT:return controller.run("renderTopicBlockContent",props);case core_1.BlockType.DESC:return controller.run("renderTopicBlockDesc",props)}return null},renderTopicBlockContent:function(props){return React.createElement(topic_content_1.TopicContent,__assign({},props))},renderTopicBlockDesc:function(props){return React.createElement(topic_desc_1.TopicDesc,__assign({},props))},renderSubLinks:function(props){var saveRef=props.saveRef,topicKey=props.topicKey,topic=props.model.getTopic(topicKey);return 0===topic.subKeys.size||topic.collapse?null:React.createElement(topic_sub_links_1.TopicSubLinks,__assign({ref:saveRef(utils_1.linksRefKey(topicKey))},props))},renderRootSubLinks:function(props){var saveRef=props.saveRef,topicKey=props.topicKey;return 0===props.model.getTopic(topicKey).subKeys.size?null:React.createElement(root_sublinks_1.RootSubLinks,__assign({ref:saveRef(utils_1.linksRefKey(topicKey))},props))},renderFocusItemHighlight:function(props){var saveRef=props.saveRef;return React.createElement(topic_highlight_1.TopicHighlight,__assign({ref:saveRef(utils_1.RefKey.FOCUS_HIGHLIGHT_KEY)},props))},renderRootWidgetOtherChildren:function(props){var controller=props.controller,zoomFactor=controller.run("getZoomFactor",props);return props=__assign(__assign({},props),{zoomFactor:zoomFactor}),React.createElement(React.Fragment,null,controller.run("renderRootSubLinks",props),controller.run("renderFocusItemHighlight",props),controller.run("renderDragAndDropEffect",props))},renderStyleEditor:function(props){return React.createElement(style_editor_1.StyleEditor,__assign({key:"style-editor"},props))},renderViewPortViewer:function(props){return React.createElement(view_port_util_1.ViewPortViewer,__assign({key:"view-port-viewer"},props))}}}},876:function(module,exports,__webpack_require__){"use strict";var extendStatics,__makeTemplateObject=this&&this.__makeTemplateObject||function(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked},__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__rest=this&&this.__rest||function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};Object.defineProperty(exports,"__esModule",{value:!0});var templateObject_1,templateObject_2,templateObject_3,core_1=__webpack_require__(21),core_2=__webpack_require__(23),React=__webpack_require__(0),styled_components_1=__webpack_require__(13),common_1=__webpack_require__(52),EditorRootBreadcrumbsRoot=styled_components_1.default.div.withConfig({displayName:"EditorRootBreadcrumbsRoot",componentId:"sc-cxlbo0"})(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  position: absolute;\n  width: 20%;\n  padding: 0 5px;\n  background: white;\n  left: 30px;\n  top: 20px;\n  border-radius: 2px;\n  z-index: 4;\n"],["\n  position: absolute;\n  width: 20%;\n  padding: 0 5px;\n  background: white;\n  left: 30px;\n  top: 20px;\n  border-radius: 2px;\n  z-index: 4;\n"]))),TooltipContent=styled_components_1.default.div.withConfig({displayName:"TooltipContent",componentId:"sc-rcbs5z"})(templateObject_2||(templateObject_2=__makeTemplateObject(["\n  max-width: 600px;\n"],["\n  max-width: 600px;\n"]))),BreadcrumbTitle=styled_components_1.default.span.withConfig({displayName:"BreadcrumbTitle",componentId:"sc-1ejsek6"})(templateObject_3||(templateObject_3=__makeTemplateObject([""],[""]))),EditorRootBreadcrumbs=function(_super){function EditorRootBreadcrumbs(props){var _this=_super.call(this,props)||this;return _this.setEditorRootTopicKey=function(topicKey){return function(){var _a=_this.props,model=_a.model,controller=_a.controller;model.editorRootTopicKey!==topicKey&&controller.change(core_1.ModelModifier.setEditorRootTopicKey({model:model,topicKey:topicKey}))}},_this.breadcrumbRenderer=function(props){var text=props.text,breadProps=__rest(props,["text"]),needTooltip=text.length>8,title=needTooltip?text.substr(0,8)+"...":text,tooltipProps={content:React.createElement(TooltipContent,null,text),position:core_2.PopoverPosition.BOTTOM_RIGHT},breadcrumb=React.createElement(core_2.Breadcrumb,__assign({},breadProps),React.createElement(BreadcrumbTitle,null,title));return needTooltip?React.createElement(core_2.Tooltip,__assign({},tooltipProps),breadcrumb):breadcrumb},_this.state={show:!1},_this}return __extends(EditorRootBreadcrumbs,_super),EditorRootBreadcrumbs.prototype.render=function(){var props=this.props,model=props.model,controller=props.controller,editingRootKey=model.editorRootTopicKey;if(editingRootKey===model.rootTopicKey)return null;for(var items=[],topic=model.getTopic(editingRootKey);null!=topic;){var title=controller.run("getTopicTitle",__assign(__assign({},props),{topicKey:topic.key}));items.unshift({text:title,onClick:this.setEditorRootTopicKey(topic.key)}),topic=model.getTopic(topic.parentKey)}var breadcrumbProps={items:items,breadcrumbRenderer:this.breadcrumbRenderer};return React.createElement(EditorRootBreadcrumbsRoot,null,React.createElement(core_2.Breadcrumbs,__assign({},breadcrumbProps)))},EditorRootBreadcrumbs}(common_1.BaseWidget);exports.EditorRootBreadcrumbs=EditorRootBreadcrumbs},877:function(module,exports,__webpack_require__){"use strict";var extendStatics,__makeTemplateObject=this&&this.__makeTemplateObject||function(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked},__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var templateObject_1,templateObject_2,React=__webpack_require__(0),styled_components_1=__webpack_require__(13),common_1=__webpack_require__(52),utils_1=__webpack_require__(38),NodeLayer=styled_components_1.default.div.withConfig({displayName:"NodeLayer",componentId:"sc-10k9w9g"})(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  padding: 5px;\n"],["\n  position: relative;\n  display: flex;\n  align-items: center;\n  padding: 5px;\n"]))),DIV=styled_components_1.default.div.withConfig({displayName:"DIV",componentId:"sc-1foqqg0"})(templateObject_2||(templateObject_2=__makeTemplateObject(["\n  width: 100%;\n  height: 100%;\n  background: ",";\n"],["\n  width: 100%;\n  height: 100%;\n  background: ",";\n"])),(function(props){return props.theme.background})),MindDragScrollWidget=function(_super){function MindDragScrollWidget(props){var _this=_super.call(this,props)||this;return _this.setZoomFactor=function(zoomFactor){_this.dragScrollWidget.setZoomFactor(zoomFactor)},_this.onWheel=function(e){if(e.altKey||e.ctrlKey){var controller=_this.props.controller,zoomFactor=controller.run("getZoomFactor",_this.props);(zoomFactor-=e.nativeEvent.deltaY>0?.1:-.1)<.5&&(zoomFactor=.5),zoomFactor>4&&(zoomFactor=4),controller.run("setZoomFactor",__assign(__assign({},_this.props),{zoomFactor:zoomFactor}))}},_this}return __extends(MindDragScrollWidget,_super),MindDragScrollWidget.prototype.componentDidMount=function(){var _a=this.props,getRef=_a.getRef,model=_a.model;_a.controller.run("addZoomFactorChangeEventListener",__assign(__assign({},this.props),{listener:this.setZoomFactor}));var rootTopic=getRef(utils_1.topicRefKey(model.editorRootTopicKey)),nodeLayer=getRef("node-layer"),rootTopicRect=rootTopic.getBoundingClientRect(),nodeLayerRect=nodeLayer.getBoundingClientRect();this.dragScrollWidget.setViewBoxScrollDelta(0,rootTopicRect.top-nodeLayerRect.top-this.dragScrollWidget.viewBox.getBoundingClientRect().height/2+rootTopicRect.height),this.layout()},MindDragScrollWidget.prototype.componentWillUnmount=function(){this.props.controller.run("removeZoomFactorChangeEventListener",__assign(__assign({},this.props),{listener:this.setZoomFactor}))},Object.defineProperty(MindDragScrollWidget.prototype,"dragScrollWidget",{get:function(){return this.props.getRef(utils_1.RefKey.DRAG_SCROLL_WIDGET_KEY)},enumerable:!0,configurable:!0}),MindDragScrollWidget.prototype.componentDidUpdate=function(){this.props.controller.run("fireEvent",__assign(__assign({},this.props),{key:utils_1.EventKey.CENTER_ROOT_TOPIC})),this.layout()},MindDragScrollWidget.prototype.layout=function(){this.props.controller.run("layout",this.props)},MindDragScrollWidget.prototype.render=function(){var _this=this,_a=this.props,saveRef=_a.saveRef,model=_a.model,controller=_a.controller,nodeKey=model.editorRootTopicKey;return React.createElement(DIV,{onWheel:this.onWheel},React.createElement(common_1.DragScrollWidget,__assign({},this.state,{enableMouseWheel:!1,zoomFactor:model.zoomFactor,ref:saveRef(utils_1.RefKey.DRAG_SCROLL_WIDGET_KEY)}),(function(setViewBoxScroll,setViewBoxScrollDelta){var rootWidgetProps=__assign(__assign({},_this.props),{topicKey:nodeKey,setViewBoxScroll:setViewBoxScroll,setViewBoxScrollDelta:setViewBoxScrollDelta});return React.createElement(NodeLayer,{ref:saveRef("node-layer")},controller.run("renderRootWidget",rootWidgetProps))})))},MindDragScrollWidget}(React.Component);exports.MindDragScrollWidget=MindDragScrollWidget},878:function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(23),React=__webpack_require__(0),Modals=function(_super){function Modals(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.handleClose=function(){var handleActiveModalClose=_this.props.controller.run("handleActiveModalClose",_this.props);handleActiveModalClose&&handleActiveModalClose()},_this}return __extends(Modals,_super),Modals.prototype.render=function(){var controller=this.props.controller,activeModal=controller.run("renderModal",this.props),activeModalProps=controller.run("getActiveModalProps",this.props);return React.createElement(core_1.Dialog,{onClose:this.handleClose,isOpen:null!==activeModal,autoFocus:!0,enforceFocus:!0,usePortal:!0,title:activeModalProps&&activeModalProps.title,style:activeModalProps&&activeModalProps.style},React.createElement("div",{className:core_1.Classes.DIALOG_BODY,style:{minHeight:0}},activeModal))},Modals}(__webpack_require__(52).BaseWidget);exports.Modals=Modals},879:function(module,exports,__webpack_require__){"use strict";var extendStatics,__makeTemplateObject=this&&this.__makeTemplateObject||function(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked},__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var templateObject_1,React=__webpack_require__(0),styled_components_1=__webpack_require__(13),common_1=__webpack_require__(52),utils_1=__webpack_require__(38),debug_1=__webpack_require__(16),utils_2=__webpack_require__(38),RootLinksSvg=styled_components_1.default.svg.withConfig({displayName:"RootLinksSvg",componentId:"sc-1j5kekp"})(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"],["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"]))),RootSubLinks=(debug_1.default("node:topic-sub-links"),function(_super){function RootSubLinks(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.state={curves:[]},_this}return __extends(RootSubLinks,_super),RootSubLinks.prototype.layout=function(){var p1,p2,props=this.props,model=props.model,getRef=props.getRef,topicKey=props.topicKey,zoomFactor=props.zoomFactor,controller=props.controller,topic=model.getTopic(topicKey),content=getRef(utils_2.contentRefKey(topicKey)),svg=getRef(utils_2.linksSvgRefKey(topicKey)),bigView=getRef(utils_1.RefKey.DRAG_SCROLL_WIDGET_KEY).bigView,contentRect=utils_1.getRelativeRect(content,bigView,zoomFactor),svgRect=utils_1.getRelativeRect(svg,bigView,zoomFactor);p1={x:utils_1.centerX(contentRect)-svgRect.left,y:utils_1.centerY(contentRect)-svgRect.top};var curves=[];topic.subKeys.forEach((function(key){var curve,linkStyle=controller.run("getLinkStyle",__assign(__assign({},props),{topicKey:key})),lineType=linkStyle.lineType,subTopicContent=getRef(utils_2.contentRefKey(key)),rect=utils_1.getRelativeRect(subTopicContent,bigView,zoomFactor);if(p2={x:(p2=rect.left>contentRect.right?{x:rect.left,y:utils_1.centerY(rect)}:{x:rect.right,y:utils_1.centerY(rect)}).x-svgRect.left,y:p2.y-svgRect.top},"curve"===lineType)curve="M "+p1.x+" "+p1.y+" C "+p1.x+" "+utils_1.centerPointY(p1,p2)+" "+utils_1.centerPointX(p1,p2)+" "+p2.y+" "+p2.x+" "+p2.y;else if("line"===lineType)curve="M "+p1.x+" "+p1.y+" L "+p2.x+" "+p2.y;else if("round"===lineType){var vDir=p2.y>p1.y?1:-1,hDir=p2.x>p1.x?1:-1,radius=linkStyle.lineRadius;if(null==radius)throw new Error("link line type is round, but lineRadius is not provided!");curve=p2.y===p1.y?"M "+p1.x+" "+p1.y+" H "+p2.x:"M "+p1.x+" "+p1.y+"  V "+(p2.y-vDir*radius)+" A "+radius+" "+radius+" 0 0 "+(vDir*hDir==1?0:1)+" "+(p1.x+radius*hDir)+" "+p2.y+" H "+p2.x}curves.push(React.createElement("path",{key:"link-"+key,d:curve,strokeWidth:linkStyle.lineWidth,stroke:linkStyle.lineColor,fill:"none"}))})),this.setState({curves:curves})},RootSubLinks.prototype.render=function(){var _a=this.props,topicKey=_a.topicKey,saveRef=_a.saveRef;return React.createElement(RootLinksSvg,{ref:saveRef(utils_2.linksSvgRefKey(topicKey))},React.createElement("g",null,this.state.curves))},RootSubLinks}(common_1.BaseWidget));exports.RootSubLinks=RootSubLinks},880:function(module,exports,__webpack_require__){"use strict";var extendStatics,__makeTemplateObject=this&&this.__makeTemplateObject||function(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked},__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var templateObject_1,templateObject_2,core_1=__webpack_require__(21),debug_1=__webpack_require__(16),React=__webpack_require__(0),styled_components_1=__webpack_require__(13),utils_1=__webpack_require__(38),log=debug_1.default("RootNode"),LayerPart=styled_components_1.default.div.withConfig({displayName:"LayerPart",componentId:"sc-fnmzj9"})(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  display: flex;\n  position: relative;\n\n  align-items: ",";\n  flex-direction: column;\n\n  padding: ",";\n"],["\n  display: flex;\n  position: relative;\n\n  align-items: ",";\n  flex-direction: column;\n\n  padding: ",";\n"])),(function(props){return props.topicDirection===core_1.TopicDirection.LEFT?"flex-end":"flex-start"}),(function(props){return props.topicDirection===core_1.TopicDirection.LEFT?"15px 60px 15px 0px":"15px 0px 15px 60px"})),Topic=styled_components_1.default.div.withConfig({displayName:"Topic",componentId:"sc-ybya3t"})(templateObject_2||(templateObject_2=__makeTemplateObject(["\n  display: flex;\n  position: relative;\n  align-items: center;\n  z-index: 3;\n"],["\n  display: flex;\n  position: relative;\n  align-items: center;\n  z-index: 3;\n"]))),RootWidget=function(_super){function RootWidget(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(RootWidget,_super),RootWidget.prototype.renderPartTopics=function(topics,dir){var _a=this.props,controller=_a.controller,saveRef=_a.saveRef,res=controller.run("createSubTopics",__assign(__assign({},this.props),{dir:dir,isRoot:!0,topics:topics}));if(!res)return null;var subTopics=res.subTopics,cxName="bm-layer-"+(dir===core_1.TopicDirection.LEFT?"left":"right");return React.createElement(LayerPart,{topicDirection:dir,ref:saveRef(cxName)},subTopics)},RootWidget.prototype.render=function(){log("render");var props=this.props,model=props.model,topicKey=props.topicKey,saveRef=props.saveRef,controller=props.controller,topicStyle=(props.dir,controller.run("getTopicContentStyle",props)),config=model.config,topicContent=controller.run("renderTopicContent",__assign(__assign({},props),{topicStyle:topicStyle,dir:core_1.TopicDirection.MAIN})),partTopics=controller.run("getPartTopics",{layout:config.layoutDir,model:model,topicKey:topicKey}),rootTopic=React.createElement(Topic,{ref:saveRef(utils_1.topicRefKey(topicKey))},topicContent),children=controller.run("renderRootWidgetOtherChildren",props);switch(config.layoutDir){case core_1.DiagramLayoutType.LEFT_AND_RIGHT:return React.createElement(React.Fragment,null,this.renderPartTopics(partTopics.L,"L"),rootTopic,this.renderPartTopics(partTopics.R,"R"),children);case core_1.DiagramLayoutType.LEFT_TO_RIGHT:return React.createElement(React.Fragment,null,rootTopic,this.renderPartTopics(partTopics.R,"R"),children);case core_1.DiagramLayoutType.RIGHT_TO_LEFT:return React.createElement(React.Fragment,null,this.renderPartTopics(partTopics.L,"L"),rootTopic,children);case core_1.DiagramLayoutType.TOP_TO_BOTTOM:return React.createElement(React.Fragment,null,rootTopic,this.renderPartTopics(partTopics.B,"B"),children)}return null},RootWidget}(React.Component);exports.RootWidget=RootWidget},881:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(882))},882:function(module,exports,__webpack_require__){"use strict";var extendStatics,__makeTemplateObject=this&&this.__makeTemplateObject||function(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked},__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var templateObject_1,templateObject_2,core_1=__webpack_require__(21),core_2=__webpack_require__(23),debug_1=__webpack_require__(16),React=__webpack_require__(0),react_color_1=__webpack_require__(214),styled_components_1=__webpack_require__(13),common_1=__webpack_require__(52),utils_1=__webpack_require__(38),border_style_editor_1=__webpack_require__(952),clear_all_custom_style_1=__webpack_require__(953),components_1=__webpack_require__(162),link_style_editor_1=__webpack_require__(954),text_style_editor_1=__webpack_require__(955),log=debug_1.default("node:style-editor"),StyleEditorRoot=styled_components_1.default.div.withConfig({displayName:"StyleEditorRoot",componentId:"sc-lf9afa"})(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  position: absolute;\n  background: white;\n  right: 30px;\n  top: 20px;\n  border-radius: 2px;\n  z-index: 4;\n"],["\n  position: absolute;\n  background: white;\n  right: 30px;\n  top: 20px;\n  border-radius: 2px;\n  z-index: 4;\n"]))),PopRoot=styled_components_1.default.div.withConfig({displayName:"PopRoot",componentId:"sc-o8x0vq"})(templateObject_2||(templateObject_2=__makeTemplateObject(["\n  padding: 10px;\n"],["\n  padding: 10px;\n"]))),StyleEditor=function(_super){function StyleEditor(props){var _this=_super.call(this,props)||this;return _this.setShowPanel=function(showPanel){return function(){_this.setState({showPanel:showPanel})}},_this.setTopicContentStyle=function(style){var props=_this.props;props.controller.run("setTopicContentStyle",__assign(__assign({},props),{style:style}))},_this.handleBackgroundColorChange=function(color){_this.setTopicContentStyle({background:color.hex})},_this.handleClearStyle=function(){_this.topic.style&&(_this.operation(core_1.OpType.SET_STYLE,__assign(__assign({},_this.props),{style:null})),_this.setState({}))},_this.handleCopyStyle=function(){var props=_this.props,controller=props.controller;_this.copiedStyle=controller.run("getTopicStyle",props),log(_this.copiedStyle)},_this.handlePasteStyle=function(){_this.copiedStyle&&(_this.operation(core_1.OpType.SET_STYLE,__assign(__assign({},_this.props),{style:JSON.stringify(_this.copiedStyle)})),_this.setState({}))},_this.state={showPanel:!1},_this}return __extends(StyleEditor,_super),StyleEditor.prototype.render=function(){var props=this.props,controller=props.controller;if(!props.model.focusKey)return null;var topicStyle=controller.run("getTopicContentStyle",props);if(!this.state.showPanel)return React.createElement(StyleEditorRoot,null,React.createElement(common_1.IconBg,{onClick:this.setShowPanel(!0)},React.createElement(common_1.ShowMenuIcon,{className:utils_1.iconClassName(utils_1.IconName.SHOW_MENU)})));var setStyle=this.setTopicContentStyle;return React.createElement(StyleEditorRoot,null,React.createElement(common_1.Title,null,React.createElement(common_1.CloseIcon,{className:utils_1.iconClassName(utils_1.IconName.CLOSE),onClick:this.setShowPanel(!1)})),React.createElement(PopRoot,null,border_style_editor_1.BorderStyleEditor(__assign(__assign({},props),{topicStyle:topicStyle,setStyle:setStyle})),text_style_editor_1.TextStyleEditor(__assign(__assign({},props),{topicStyle:topicStyle,setStyle:setStyle})),React.createElement(components_1.SettingGroup,null,React.createElement(components_1.SettingTitle,null,"Background"),React.createElement("div",null,React.createElement(components_1.SettingItem,null,React.createElement(core_2.Popover,null,React.createElement(components_1.WithBorder,null,React.createElement("div",{className:utils_1.iconClassName(utils_1.IconName.COLOR_PICKER)}),React.createElement(components_1.ColorBar,{color:topicStyle.background})),React.createElement("div",null,React.createElement(react_color_1.SketchPicker,{color:topicStyle.background,onChangeComplete:this.handleBackgroundColorChange})))))),link_style_editor_1.LinkStyleEditor(props),React.createElement(components_1.SettingGroup,null,React.createElement(components_1.SettingItem,null,React.createElement(core_2.Button,{onClick:this.handleClearStyle},"Clear Topic Style")),React.createElement(components_1.SettingItem,null,React.createElement(core_2.Button,{onClick:this.handleCopyStyle},"Copy Style")),React.createElement(components_1.SettingItem,null,React.createElement(core_2.Button,{onClick:this.handlePasteStyle},"Paste Style"))),clear_all_custom_style_1.ClearAllCustomStyle(props)))},StyleEditor}(common_1.BaseWidget);exports.StyleEditor=StyleEditor},952:function(module,exports,__webpack_require__){"use strict";var __read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread=this&&this.__spread||function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(23),React=__webpack_require__(0),react_color_1=__webpack_require__(214),utils_1=__webpack_require__(38),components_1=__webpack_require__(162),core_2=__webpack_require__(23),borderWidthItems=__spread(Array(7).keys()),borderRadiusItems=[0,5,10,15,20,25,30,35],borderStyleItems=["none","solid","dotted","dashed","double"];exports.BorderStyleEditor=function BorderStyleEditor(props){var topicStyle=props.topicStyle,setStyle=props.setStyle;return React.createElement(components_1.SettingGroup,null,React.createElement(components_1.SettingTitle,null,"Border"),React.createElement("div",null,React.createElement(components_1.SettingItem,null,React.createElement(components_1.PxSelect,{items:borderWidthItems,itemRenderer:components_1.renderItem("px"),filterable:!1,onItemSelect:function(value){setStyle({borderWidth:value+"px"})}},React.createElement(core_2.Button,{text:"width: "+(topicStyle.borderWidth?topicStyle.borderWidth:"0px")}))),React.createElement(components_1.SettingItem,null,React.createElement(components_1.PxSelect,{items:borderStyleItems,itemRenderer:components_1.renderItem(""),filterable:!1,onItemSelect:function(value){setStyle({borderStyle:value})}},React.createElement(core_2.Button,{text:"style: "+(topicStyle.borderStyle?topicStyle.borderStyle:"none")}))),React.createElement(components_1.SettingItem,null,React.createElement(components_1.PxSelect,{items:borderRadiusItems,itemRenderer:components_1.renderItem("px"),filterable:!1,onItemSelect:function(value){setStyle({borderRadius:value+"px"})}},React.createElement(core_2.Button,{text:"radius: "+topicStyle.borderRadius}))),React.createElement(components_1.SettingItem,null,React.createElement(core_1.Popover,null,React.createElement(components_1.WithBorder,null,React.createElement("div",{className:utils_1.iconClassName(utils_1.IconName.COLOR_PICKER)}),React.createElement(components_1.ColorBar,{color:topicStyle.borderColor})),React.createElement("div",null,React.createElement(react_color_1.SketchPicker,{color:topicStyle.borderColor,onChangeComplete:function(color){setStyle({borderColor:color.hex})}}))))))}},953:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(23),React=__webpack_require__(0),components_1=__webpack_require__(162);exports.ClearAllCustomStyle=function ClearAllCustomStyle(props){var controller=props.controller;return React.createElement(components_1.SettingGroup,null,React.createElement(components_1.SettingItem,null,React.createElement(core_1.Button,{onClick:function(e){controller.run("clearAllCustomStyle",props)}},"Clear All Custom Styles")))}},954:function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(23),React=__webpack_require__(0),react_color_1=__webpack_require__(214),common_1=__webpack_require__(52),utils_1=__webpack_require__(38),components_1=__webpack_require__(162),lineTypes=["curve","round","line"],renderLineTypeItem=function(lineType,_a){var handleClick=_a.handleClick;_a.modifiers,_a.query;return React.createElement(core_1.MenuItem,{text:""+lineType,key:lineType,onClick:handleClick})};exports.LinkStyleEditor=function LinkStyleEditor(props){var controller=props.controller,linkStyle=controller.run("getLinkStyle",props),subLinkStyle=controller.run("getSubLinkStyle",props);return React.createElement(components_1.SettingGroup,null,React.createElement(components_1.SettingTitle,null,"Link"),React.createElement(components_1.SettingRow,{alignItems:"center"},React.createElement(common_1.Margin,{margin:"0 5px 0 0"},"LinkToParent: "),React.createElement(components_1.SettingItem,null,React.createElement(components_1.PxSelect,{items:components_1.borderWidthItems,itemRenderer:components_1.renderItem("px"),filterable:!1,onItemSelect:function(value){controller.run("setLinkStyle",__assign(__assign({},props),{linkStyle:{lineWidth:value+"px"}}))}},React.createElement(core_1.Button,{text:"width: "+(linkStyle?linkStyle.lineWidth+"px":"0px")}))),React.createElement(components_1.SettingItem,null,React.createElement(components_1.PxSelect,{items:lineTypes,itemRenderer:renderLineTypeItem,filterable:!1,onItemSelect:function(value){controller.run("setLinkStyle",__assign(__assign({},props),{linkStyle:{lineType:value}}))}},React.createElement(core_1.Button,{text:"lineType: "+linkStyle.lineType}))),React.createElement(components_1.SettingItem,null,React.createElement(core_1.Popover,null,React.createElement(components_1.WithBorder,null,React.createElement("div",{className:utils_1.iconClassName(utils_1.IconName.COLOR_PICKER)}),React.createElement(components_1.ColorBar,{color:linkStyle.lineColor})),React.createElement("div",null,React.createElement(react_color_1.SketchPicker,{color:linkStyle.lineColor,onChangeComplete:function(color){controller.run("setLinkStyle",__assign(__assign({},props),{linkStyle:{lineColor:color.hex}}))}}))))),React.createElement(components_1.SettingRow,{alignItems:"center"},React.createElement(common_1.Margin,{margin:"0 5px 0 0"},"SubLinks: "),React.createElement(components_1.SettingItem,null,React.createElement(components_1.PxSelect,{items:components_1.borderWidthItems,itemRenderer:components_1.renderItem("px"),filterable:!1,onItemSelect:function(value){controller.run("setSubLinkStyle",__assign(__assign({},props),{subLinkStyle:{lineWidth:value+"px"}}))}},React.createElement(core_1.Button,{text:"width: "+(subLinkStyle?subLinkStyle.lineWidth+"px":"0px")}))),React.createElement(components_1.SettingItem,null,React.createElement(components_1.PxSelect,{items:lineTypes,itemRenderer:renderLineTypeItem,filterable:!1,onItemSelect:function(value){controller.run("setSubLinkStyle",__assign(__assign({},props),{subLinkStyle:{lineType:value}}))}},React.createElement(core_1.Button,{text:"lineType: "+subLinkStyle.lineType}))),React.createElement(components_1.SettingItem,null,React.createElement(core_1.Popover,null,React.createElement(components_1.WithBorder,null,React.createElement("div",{className:utils_1.iconClassName(utils_1.IconName.COLOR_PICKER)}),React.createElement(components_1.ColorBar,{color:subLinkStyle.lineColor})),React.createElement("div",null,React.createElement(react_color_1.SketchPicker,{color:subLinkStyle.lineColor,onChangeComplete:function(color){controller.run("setSubLinkStyle",__assign(__assign({},props),{subLinkStyle:{lineColor:color.hex}}))}}))))))}},955:function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(23),React=__webpack_require__(0),react_color_1=__webpack_require__(214),common_1=__webpack_require__(52),utils_1=__webpack_require__(38),components_1=__webpack_require__(162);exports.TextStyleEditor=function TextStyleEditor(props){var topicStyle=props.topicStyle,setStyle=props.setStyle,fontSizeNumInputProps={min:12,max:100,value:parseInt(topicStyle.fontSize),style:{width:50},onValueChange:function(value){setStyle({fontSize:value})}},lineHeightInputProps={style:{width:50},value:topicStyle.lineHeight||"",onChange:function(e){setStyle({lineHeight:e.target.value})}};return React.createElement(components_1.SettingGroup,null,React.createElement(components_1.SettingTitle,null,"Text Editor"),React.createElement(common_1.Flex,null,React.createElement(components_1.SettingItem,null,React.createElement(common_1.Flex,{alignItems:"center"},React.createElement(common_1.Margin,{margin:"0 5px 0 0"},"FontSize: "),React.createElement(core_1.NumericInput,__assign({},fontSizeNumInputProps)))),React.createElement(components_1.SettingItem,null,React.createElement(common_1.Flex,{alignItems:"center"},React.createElement(common_1.Margin,{margin:"0 5px 0 0"},"LineHeight: "),React.createElement(core_1.InputGroup,__assign({},lineHeightInputProps)))),React.createElement(components_1.SettingItem,null,React.createElement(core_1.Popover,null,React.createElement(components_1.WithBorder,null,React.createElement("div",{className:utils_1.iconClassName(utils_1.IconName.COLOR_PICKER)}),React.createElement(components_1.ColorBar,{color:topicStyle.color})),React.createElement("div",null,React.createElement(react_color_1.SketchPicker,{color:topicStyle.color,onChangeComplete:function(color){setStyle({color:color.hex})}}))))))}},956:function(module,exports,__webpack_require__){"use strict";var __makeTemplateObject=this&&this.__makeTemplateObject||function(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked};Object.defineProperty(exports,"__esModule",{value:!0});var templateObject_1,templateObject_2,templateObject_3,core_1=__webpack_require__(21),classnames_1=__webpack_require__(4),React=__webpack_require__(0),styled_components_1=__webpack_require__(13),utils_1=__webpack_require__(38),Icon=styled_components_1.default.div.withConfig({displayName:"Icon",componentId:"sc-yayglp"})(templateObject_3||(templateObject_3=__makeTemplateObject(["\n  position: absolute;\n  top: calc(50% - 10px);\n  ",";\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  text-align: center;\n  //@ts-ignore\n  background: ",";\n  cursor: pointer;\n  padding: 0;\n  font-size: 14px;\n  line-height: 20px;\n  border: 0;\n  z-index: 2;\n"],["\n  position: absolute;\n  top: calc(50% - 10px);\n  ",";\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  text-align: center;\n  //@ts-ignore\n  background: ",";\n  cursor: pointer;\n  padding: 0;\n  font-size: 14px;\n  line-height: 20px;\n  border: 0;\n  z-index: 2;\n"])),(function(_a){var dir=_a.dir;return dir===core_1.TopicDirection.RIGHT?styled_components_1.css(templateObject_1||(templateObject_1=__makeTemplateObject(["\n        right: -25px;\n      "],["\n        right: -25px;\n      "]))):dir===core_1.TopicDirection.LEFT?styled_components_1.css(templateObject_2||(templateObject_2=__makeTemplateObject(["\n        left: -25px;\n      "],["\n        left: -25px;\n      "]))):void 0}),(function(props){return props.background}));exports.TopicCollapseIcon=function TopicCollapseIcon(props){var _a,model=props.model,topicKey=props.topicKey,topicStyle=props.topicStyle,dir=props.dir,saveRef=props.saveRef,onClickCollapse=props.onClickCollapse,topic=model.getTopic(topicKey);return topic.subKeys.size>0?React.createElement(Icon,{ref:saveRef(utils_1.collapseRefKey(topicKey)),onClick:onClickCollapse,background:topicStyle.background,dir:dir,className:classnames_1.default((_a={icon:!0,iconfont:!0},_a["bm-"+(topic.collapse?"plus":"minus")]=!0,_a))}):null}},957:function(module,exports,__webpack_require__){"use strict";var __makeTemplateObject=this&&this.__makeTemplateObject||function(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked},__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var templateObject_1,templateObject_2,debug_1=__webpack_require__(16),React=__webpack_require__(0),resize_observer_polyfill_1=__webpack_require__(218),styled_components_1=__webpack_require__(13),log=debug_1.default("node:topic-content2"),EditingRoot=styled_components_1.default.div.withConfig({displayName:"EditingRoot",componentId:"sc-1tit99u"})(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  position: relative;\n"],["\n  position: relative;\n"]))),EditingWrapper=styled_components_1.default.div.withConfig({displayName:"EditingWrapper",componentId:"sc-1q2mp6y"})(templateObject_2||(templateObject_2=__makeTemplateObject(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: auto;\n  z-index: 10;\n  color: black;\n"],["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: auto;\n  z-index: 10;\n  color: black;\n"]))),cancelEvent=function(e){log("cancelEvent"),e.preventDefault(),e.stopPropagation()};exports.TopicContent=function TopicContent(props){var child,controller=props.controller,model=props.model,topicKey=props.topicKey,getRef=props.getRef,readOnly=model.editingContentKey!==topicKey,editor=controller.run("renderTopicContentEditor",__assign(__assign({},props),{readOnly:readOnly}));if(readOnly)child=editor;else{var wrapper_1,rect_1={width:50,height:40},editorDiv=getRef("content-editor-"+topicKey);editorDiv&&(rect_1=editorDiv.getBoundingClientRect());var contentResizeObserver_1=new resize_observer_polyfill_1.default((function(entries,observer){var r=entries[0].contentRect;wrapper_1.style.left=(rect_1.width-r.width)/2+"px",wrapper_1.style.top=(rect_1.height-r.height)/2+"px"}));log(rect_1),child=React.createElement(React.Fragment,null,React.createElement("div",{style:{width:rect_1.width,height:rect_1.height}}),React.createElement(EditingWrapper,{ref:function(ref){ref&&(wrapper_1=ref,contentResizeObserver_1.observe(wrapper_1))}},editor))}return React.createElement(EditingRoot,{onDragEnter:cancelEvent,onDragOver:cancelEvent},child)}},958:function(module,exports,__webpack_require__){"use strict";var extendStatics,__makeTemplateObject=this&&this.__makeTemplateObject||function(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked},__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:!0});var templateObject_1,templateObject_2,core_1=__webpack_require__(21),core_2=__webpack_require__(23),debug_1=__webpack_require__(16),React=__webpack_require__(0),styled_components_1=__webpack_require__(13),common_1=__webpack_require__(52),utils_1=__webpack_require__(38),log=debug_1.default("node:topic-content-widget"),TopicContent=styled_components_1.default.div.withConfig({displayName:"TopicContent",componentId:"sc-1oatw0b"})(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  //overflow: hidden;\n  position: relative;\n"],["\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  //overflow: hidden;\n  position: relative;\n"]))),TopicContentWithDropArea=styled_components_1.default.div.withConfig({displayName:"TopicContentWithDropArea",componentId:"sc-f2f4f5"})(templateObject_2||(templateObject_2=__makeTemplateObject(["\n  position: relative;\n"],["\n  position: relative;\n"]))),TopicContentWidget=function(_super){function TopicContentWidget(props){var _this=_super.call(this,props)||this;return _this.onDragStart=function(ev){_this.run("handleTopicDragStart",__assign(__assign({},_this.props),{ev:ev}))},_this.onDragOver=function(ev){ev.preventDefault()},_this.onDragEnter=function(ev){log("onDragEnter",_this.props.topicKey),_this.run("handleTopicDragEnter",__assign(__assign({},_this.props),{ev:ev,dropDir:"in"}))},_this.onDragLeave=function(ev){_this.run("handleTopicDragLeave",__assign(__assign({},_this.props),{ev:ev,dropDir:"in"}))},_this.onDrop=function(ev){log("onDrop"),_this.run("handleTopicDrop",__assign(__assign({},_this.props),{ev:ev,dropDir:"in"}))},_this.onClick=function(ev){_this.isDoubleClick=!1;var props=_this.props,controller=props.controller;setTimeout((function(){_this.isDoubleClick||controller.run("handleTopicClick",__assign(__assign({},props),{ev:ev}))}))},_this.onDoubleClick=function(ev){_this.isDoubleClick=!0,_this.props.controller.run("handleTopicDoubleClick",__assign(__assign({},_this.props),{ev:ev}))},_this.needRelocation=!1,_this.onClickCollapse=function(e){e.stopPropagation();var _a=_this.props,topicKey=_a.topicKey,getRef=_a.getRef;_a.controller;_this.needRelocation=!0;var rect=getRef(utils_1.collapseRefKey(topicKey)).getBoundingClientRect();log("oldRect",rect),_this.oldCollapseIconVector=[rect.left+rect.width/2,rect.top+rect.height/2],log("oldCollapseIconVector",_this.oldCollapseIconVector),_this.operation(core_1.OpType.TOGGLE_COLLAPSE,_this.props)},_this.state={dragEnter:!1},_this}return __extends(TopicContentWidget,_super),TopicContentWidget.prototype.renderContextMenu=function(){var controller=this.props.controller;return this.operation(core_1.OpType.FOCUS_TOPIC,__assign(__assign({},this.props),{focusMode:core_1.FocusMode.SHOW_POPUP})),controller.run("renderTopicContextMenu",this.props)},TopicContentWidget.prototype.onContextMenuClose=function(){},TopicContentWidget.prototype.componentDidUpdate=function(){if(this.needRelocation){var _a=this.props,getRef=_a.getRef,topicKey=_a.topicKey,setViewBoxScrollDelta=_a.setViewBoxScrollDelta,controller=_a.controller,newRect=getRef(utils_1.collapseRefKey(topicKey)).getBoundingClientRect(),newVector=[newRect.left+newRect.width/2,newRect.top+newRect.height/2];controller.run("getZoomFactor",__assign({},this.props));log("newVector:",newVector),log("oldVector:",this.oldCollapseIconVector);var vector=[newVector[0]-this.oldCollapseIconVector[0],newVector[1]-this.oldCollapseIconVector[1]];log("vector",vector),setViewBoxScrollDelta(vector[0],vector[1]),this.needRelocation=!1}},TopicContentWidget.prototype.render=function(){var props=this.props,saveRef=props.saveRef,topicKey=props.topicKey,model=props.model,controller=props.controller,topicStyle=props.topicStyle,dir=props.dir,draggable=model.editingContentKey!==topicKey,collapseIcon=controller.run("renderTopicCollapseIcon",__assign(__assign({},props),{onClickCollapse:this.onClickCollapse.bind(this)})),prevDropArea=controller.run("renderTopicDropArea",__assign(__assign({},props),{dropDir:"prev"})),nextDropArea=controller.run("renderTopicDropArea",__assign(__assign({},props),{dropDir:"next"})),dropEventHandlers={onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this.onDragOver,onDrop:this.onDrop};return log(topicKey,"style",topicStyle),React.createElement(TopicContentWithDropArea,null,prevDropArea,React.createElement(TopicContent,__assign({style:topicStyle,draggable:draggable,ref:saveRef(utils_1.contentRefKey(topicKey)),onDragStart:this.onDragStart,onClick:this.onClick,onDoubleClick:this.onDoubleClick},dropEventHandlers),controller.run("renderTopicBlocks",props)),nextDropArea,dir!==core_1.TopicDirection.MAIN&&collapseIcon)},TopicContentWidget=__decorate([core_2.ContextMenuTarget],TopicContentWidget)}(common_1.BaseWidget);exports.TopicContentWidget=TopicContentWidget},959:function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(23),React=__webpack_require__(0),TopicContextMenu=function(_super){function TopicContextMenu(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(TopicContextMenu,_super),TopicContextMenu.prototype.render=function(){var controller=this.props.controller;return React.createElement(core_1.Menu,null,controller.run("customizeTopicContextMenu",this.props))},TopicContextMenu}(__webpack_require__(52).BaseWidget);exports.TopicContextMenu=TopicContextMenu},96:function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(793)),__export(__webpack_require__(116))},960:function(module,exports,__webpack_require__){"use strict";var __makeTemplateObject=this&&this.__makeTemplateObject||function(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked},__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var templateObject_1,templateObject_2,templateObject_3,core_1=__webpack_require__(21),core_2=__webpack_require__(23),debug_1=__webpack_require__(16),React=__webpack_require__(0),styled_components_1=__webpack_require__(13),utils_1=__webpack_require__(38),log=debug_1.default("node:topic-desc"),DescIcon=styled_components_1.default.div.withConfig({displayName:"DescIcon",componentId:"sc-w78hpw"})(templateObject_1||(templateObject_1=__makeTemplateObject([""],[""]))),DescEditorWrapper=styled_components_1.default.div.withConfig({displayName:"DescEditorWrapper",componentId:"sc-1aemz16"})(templateObject_2||(templateObject_2=__makeTemplateObject(["\n  overflow: auto;\n  padding: 0px 0px 0px 20px;\n  background: #88888850;\n"],["\n  overflow: auto;\n  padding: 0px 0px 0px 20px;\n  background: #88888850;\n"]))),TooltipContentWrapper=styled_components_1.default.div.withConfig({displayName:"TooltipContentWrapper",componentId:"sc-1gfd1pu"})(templateObject_3||(templateObject_3=__makeTemplateObject(["\n  overflow: auto;\n"],["\n  overflow: auto;\n"])));exports.TopicDesc=function TopicDesc(props){var controller=props.controller,model=props.model,topicKey=props.topicKey,getRef=props.getRef,isEditing=model.editingDescKey===topicKey;log("isEditing",isEditing);var desc=model.getTopic(topicKey).getBlock(core_1.BlockType.DESC);if(!isEditing&&controller.run("isBlockEmpty",__assign(__assign({},props),{block:desc.block})))return null;var descEditor=controller.run("renderTopicDescEditor",props),diagramRoot=getRef(utils_1.RefKey.DIAGRAM_ROOT_KEY),style={maxWidth:"800px",maxHeight:"600px"};if(diagramRoot){var dRect=diagramRoot.getBoundingClientRect();style.maxWidth=.6*dRect.width+"px",style.maxHeight=.8*dRect.height+"px"}var tooltipProps={autoFocus:!1,content:React.createElement(TooltipContentWrapper,{onClick:utils_1.cancelEvent,classname:core_2.Classes.POPOVER_DISMISS,style:style},descEditor),target:React.createElement(DescIcon,{onClick:function(e){e.stopPropagation(),controller.run("operation",__assign(__assign({},props),{opType:core_1.OpType.START_EDITING_DESC}))},className:utils_1.iconClassName(utils_1.IconName.NOTES),tabIndex:-1}),interactionKind:core_2.PopoverInteractionKind.HOVER,hoverOpenDelay:500},descIcon=desc.block&&React.createElement(core_2.Popover,__assign({},tooltipProps));return React.createElement(React.Fragment,null,descIcon,React.createElement(core_2.Drawer,{title:"Edit Notes",icon:utils_1.Icon("note"),isOpen:isEditing,hasBackdrop:!0,isCloseButtonShown:!1,onClose:function(e){e.stopPropagation();var key="topic-desc-data-"+topicKey,descData=controller.run("deleteTempValue",{key:key});controller.run("operation",__assign(__assign({},props),{opArray:[{opType:core_1.OpType.SET_TOPIC_DESC,topicKey:topicKey,data:descData},{opType:core_1.OpType.FOCUS_TOPIC,topicKey:topicKey,focusMode:core_1.FocusMode.NORMAL}]}))},size:"70%"},React.createElement(DescEditorWrapper,null,descEditor)))}},961:function(module,exports,__webpack_require__){"use strict";var extendStatics,__makeTemplateObject=this&&this.__makeTemplateObject||function(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked},__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var templateObject_1,core_1=__webpack_require__(21),React=__webpack_require__(0),styled_components_1=__webpack_require__(13),common_1=__webpack_require__(52),utils_1=__webpack_require__(38),FocusHighlightSvg=styled_components_1.default.svg.withConfig({displayName:"FocusHighlightSvg",componentId:"sc-gqm9s8"})(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"],["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"]))),TopicHighlight=function(_super){function TopicHighlight(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.state={content:null},_this}return __extends(TopicHighlight,_super),TopicHighlight.prototype.layout=function(){var _a=this.props,getRef=_a.getRef,model=_a.model,zoomFactor=_a.zoomFactor,focusKey=model.focusKey,focusMode=model.focusMode;if(focusKey&&focusMode!==core_1.FocusMode.EDITING_CONTENT){var content=getRef(utils_1.contentRefKey(focusKey)),bigView=getRef(utils_1.RefKey.DRAG_SCROLL_WIDGET_KEY).bigView,svg=getRef(utils_1.RefKey.SVG_HIGHLIGHT_KEY),contentRect=utils_1.getRelativeRect(content,bigView,zoomFactor),svgRect=utils_1.getRelativeRect(svg,bigView,zoomFactor),x=contentRect.left-svgRect.left-3,y=contentRect.top-svgRect.top-3,width=contentRect.width+6,height=contentRect.height+6;this.setState({content:React.createElement("rect",{x:x,y:y,width:width,height:height,fill:"none",stroke:model.config.theme.highlightColor,strokeWidth:2})})}else this.setState({content:null})},TopicHighlight.prototype.render=function(){var saveRef=this.props.saveRef;return React.createElement(FocusHighlightSvg,{ref:saveRef(utils_1.RefKey.SVG_HIGHLIGHT_KEY)},this.state.content)},TopicHighlight}(common_1.BaseWidget);exports.TopicHighlight=TopicHighlight},962:function(module,exports,__webpack_require__){"use strict";var extendStatics,__makeTemplateObject=this&&this.__makeTemplateObject||function(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked},__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var templateObject_1,core_1=__webpack_require__(21),React=__webpack_require__(0),styled_components_1=__webpack_require__(13),common_1=__webpack_require__(52),utils_1=__webpack_require__(38),TopicLinksSvg=styled_components_1.default.svg.withConfig({displayName:"TopicLinksSvg",componentId:"sc-1fx818d"})(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"],["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"]))),log=__webpack_require__(16).default("node:topic-sub-links"),TopicSubLinks=function(_super){function TopicSubLinks(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.state={curves:[]},_this}return __extends(TopicSubLinks,_super),TopicSubLinks.prototype.layout=function(){var p1,p2,p3,props=this.props,model=props.model,getRef=props.getRef,topicKey=props.topicKey,dir=props.dir,controller=props.controller,z=controller.run("getZoomFactor",props),topic=model.getTopic(topicKey),content=getRef(utils_1.contentRefKey(topicKey)),svg=getRef(utils_1.linksSvgRefKey(topicKey)),collapseIcon=getRef(utils_1.collapseRefKey(topicKey)),bigView=getRef(utils_1.RefKey.DRAG_SCROLL_WIDGET_KEY).bigView,svgRect=utils_1.getRelativeRect(svg,bigView,z),collapseRect=utils_1.getRelativeRect(collapseIcon,bigView,z),contentRect=utils_1.getRelativeRect(content,bigView,z);log(topicKey),log("svgRect",svgRect),log("collapseRect",collapseRect),log("contentRect",contentRect),dir===core_1.TopicDirection.RIGHT?(p1={x:0,y:utils_1.centerY(contentRect)-svgRect.top},p2={x:collapseRect.right-svgRect.left+10,y:p1.y}):dir===core_1.TopicDirection.LEFT&&(p1={x:svgRect.right-svgRect.left,y:utils_1.centerY(contentRect)-svgRect.top},p2={x:collapseRect.left-svgRect.left-10,y:p1.y});var curves=[];topic.subKeys.forEach((function(key){var curve,linkStyle=controller.run("getLinkStyle",__assign(__assign({},props),{topicKey:key})),subContent=getRef(utils_1.contentRefKey(key)),rect=utils_1.getRelativeRect(subContent,bigView,z);dir===core_1.TopicDirection.RIGHT&&(p3={x:rect.left-svgRect.left,y:utils_1.centerY(rect)-svgRect.top}),dir===core_1.TopicDirection.LEFT&&(p3={x:rect.right-svgRect.left,y:utils_1.centerY(rect)-svgRect.top});var lineType=linkStyle.lineType;if("curve"===lineType)curve="M "+p1.x+" "+p1.y+" L "+p2.x+" "+p2.y+" C "+p2.x+" "+utils_1.centerPointY(p2,p3)+" "+utils_1.centerPointX(p2,p3)+" "+p3.y+" "+p3.x+" "+p3.y;else if("round"===lineType){var vDir=p3.y>p1.y?1:-1,hDir=p3.x>p1.x?1:-1,radius=linkStyle.lineRadius;curve=1===topic.subKeys.size||Math.abs(p3.y-p1.y)<=1?"M "+p1.x+" "+p1.y+" L "+p3.x+" "+p3.y:"M "+p1.x+" "+p1.y+" H "+p2.x+" V "+(p3.y-vDir*radius)+" A "+radius+" "+radius+" 0 0 "+(vDir*hDir==1?0:1)+" "+(p2.x+radius*hDir)+" "+p3.y+" H "+p3.x}else"line"===lineType&&(curve="M "+p1.x+" "+p1.y+" H "+p2.x+" L "+p3.x+" "+p3.y);curves.push(React.createElement("path",{key:"link-"+key,d:curve,strokeWidth:linkStyle.lineWidth,stroke:linkStyle.lineColor,fill:"none"}))})),this.setState({curves:curves})},TopicSubLinks.prototype.render=function(){var _a=this.props,topicKey=_a.topicKey,saveRef=_a.saveRef;_a.model.zoomFactor;return React.createElement(TopicLinksSvg,{ref:saveRef(utils_1.linksSvgRefKey(topicKey))},React.createElement("g",null,this.state.curves))},TopicSubLinks}(common_1.BaseWidget);exports.TopicSubLinks=TopicSubLinks},963:function(module,exports,__webpack_require__){"use strict";var extendStatics,__makeTemplateObject=this&&this.__makeTemplateObject||function(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked},__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var templateObject_1,templateObject_2,templateObject_3,core_1=__webpack_require__(21),debug_1=__webpack_require__(16),React=__webpack_require__(0),styled_components_1=__webpack_require__(13),utils_1=__webpack_require__(38),log=debug_1.default("node:topic-widget"),Node=styled_components_1.default.div.withConfig({displayName:"Node",componentId:"sc-ighcvl"})(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  display: flex;\n  align-items: center;\n  flex-direction: ",";\n"],["\n  display: flex;\n  align-items: center;\n  flex-direction: ",";\n"])),(function(props){return props.topicDirection===core_1.TopicDirection.RIGHT?"row":"row-reverse"})),NodeChildren=styled_components_1.default.div.withConfig({displayName:"NodeChildren",componentId:"sc-9mo9vu"})(templateObject_2||(templateObject_2=__makeTemplateObject(["\n  position: relative;\n  padding: ",";\n"],["\n  position: relative;\n  padding: ",";\n"])),(function(props){return props.dir===core_1.TopicDirection.RIGHT?"0 0 0 "+props.marginH+"px":"0 "+props.marginH+"px 0 0"})),NodeTopic=styled_components_1.default.div.withConfig({displayName:"NodeTopic",componentId:"sc-b82lp8"})(templateObject_3||(templateObject_3=__makeTemplateObject(["\n  display: flex;\n  position: relative;\n  align-items: center;\n\n  flex-direction: ",";\n"],["\n  display: flex;\n  position: relative;\n  align-items: center;\n\n  flex-direction: ",";\n"])),(function(props){return props.topicDirection===core_1.TopicDirection.RIGHT?"row":"row-reverse"})),TopicWidget=function(_super){function TopicWidget(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(TopicWidget,_super),TopicWidget.prototype.renderSubTopics=function(){var props=this.props,controller=props.controller,model=props.model,topicKey=props.topicKey,dir=props.dir,topics=model.getTopic(topicKey).subKeys.toArray(),res=controller.run("createSubTopics",__assign(__assign({},props),{topics:topics}));if(!res)return null;var subTopics=res.subTopics,subLinks=controller.run("renderSubLinks",props);return React.createElement(NodeChildren,{dir:dir,marginH:model.config.theme.marginH},subTopics," ",subLinks)},TopicWidget.prototype.layoutLinks=function(){log("layoutLinks");var _a=this.props,getRef=_a.getRef,topicKey=_a.topicKey,links=getRef(utils_1.linksRefKey(topicKey));links&&links.layout()},TopicWidget.prototype.render=function(){log("render");var props=this.props,controller=props.controller,topicKey=props.topicKey,dir=props.dir,saveRef=props.saveRef,topicStyle=controller.run("getTopicContentStyle",props),propsMore=__assign(__assign({},props),{topicStyle:topicStyle}),topicContent=controller.run("renderTopicContent",propsMore);return React.createElement(Node,{topicDirection:dir},React.createElement(NodeTopic,{topicDirection:dir,ref:saveRef(utils_1.topicRefKey(topicKey))},topicContent),this.renderSubTopics())},TopicWidget}(React.Component);exports.TopicWidget=TopicWidget},964:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(965))},965:function(module,exports,__webpack_require__){"use strict";var extendStatics,__makeTemplateObject=this&&this.__makeTemplateObject||function(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked},__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var templateObject_1,templateObject_2,templateObject_3,core_1=__webpack_require__(21),core_2=__webpack_require__(23),debug_1=__webpack_require__(16),React=__webpack_require__(0),styled_components_1=__webpack_require__(13),common_1=__webpack_require__(52),utils_1=__webpack_require__(38),log=debug_1.default("node:view-port-viewer"),ViewerRoot=styled_components_1.default.div.withConfig({displayName:"ViewerRoot",componentId:"sc-im9y1p"})(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  position: absolute;\n  background: white;\n  right: 30px;\n  bottom: 20px;\n  border-radius: 2px;\n  z-index: 3;\n  display: flex;\n  flex-direction: row;\n  user-select: none;\n"],["\n  position: absolute;\n  background: white;\n  right: 30px;\n  bottom: 20px;\n  border-radius: 2px;\n  z-index: 3;\n  display: flex;\n  flex-direction: row;\n  user-select: none;\n"]))),Item_=styled_components_1.default(common_1.Btn).withConfig({displayName:"Item_",componentId:"sc-yx9jbt"})(templateObject_2||(templateObject_2=__makeTemplateObject(["\n  margin: 10px;\n"],["\n  margin: 10px;\n"]))),ZoomFactorSpan=styled_components_1.default.span.withConfig({displayName:"ZoomFactorSpan",componentId:"sc-10433xc"})(templateObject_3||(templateObject_3=__makeTemplateObject(["\n  width: 80px;\n  height: 18px;\n"],["\n  width: 80px;\n  height: 18px;\n"]))),Item=function(props){return React.createElement(core_2.Tooltip,{content:props.tooltip,position:core_2.Position.TOP,className:core_2.Classes.ICON},React.createElement(Item_,{onClick:props.onClick},props.children))},ViewPortViewer=function(_super){function ViewPortViewer(props){var _this=_super.call(this,props)||this;return _this.zoomFactorChange=function(zoomFactor){log("zoomFactorChange",zoomFactor),_this.setState({zoomFactor:zoomFactor})},_this.onClickResetZoom=function(e){var props=_this.props;props.controller.run("setZoomFactor",__assign(__assign({},props),{zoomFactor:1}))},_this.onClickAddZoom=function(e){var props=_this.props,controller=props.controller,zoomFactor=controller.run("getZoomFactor",props);controller.run("setZoomFactor",__assign(__assign({},props),{zoomFactor:zoomFactor+.1}))},_this.onClickMinusZoom=function(e){var props=_this.props,controller=props.controller,zoomFactor=controller.run("getZoomFactor",props);controller.run("setZoomFactor",__assign(__assign({},props),{zoomFactor:zoomFactor-.1}))},_this.onClickCollapseAll=function(e){var props=_this.props,controller=props.controller;controller.run("addEventListener",__assign(__assign({},props),{key:utils_1.EventKey.CENTER_ROOT_TOPIC,listener:_this.centerRootTopic,once:!0})),controller.run("operation",__assign(__assign({},props),{opType:core_1.OpType.COLLAPSE_ALL}))},_this.onClickExpandAll=function(e){var props=_this.props,controller=props.controller;controller.run("addEventListener",__assign(__assign({},props),{key:utils_1.EventKey.CENTER_ROOT_TOPIC,listener:_this.centerRootTopic,once:!0})),controller.run("operation",__assign(__assign({},props),{opType:core_1.OpType.EXPAND_ALL}))},_this.centerRootTopic=function(){var _a=_this.props,getRef=_a.getRef,model=_a.model,rootTopic=(_a.controller,getRef(utils_1.topicRefKey(model.editorRootTopicKey))),dragScroll=getRef(utils_1.RefKey.DRAG_SCROLL_WIDGET_KEY),viewBox=dragScroll.viewBox,vector=utils_1.getRelativeVector(rootTopic,viewBox);dragScroll.setViewBoxScrollDelta(vector[0],vector[1])},_this}return __extends(ViewPortViewer,_super),ViewPortViewer.prototype.componentDidMount=function(){var props=this.props;props.controller.run("addZoomFactorChangeEventListener",__assign(__assign({},props),{listener:this.zoomFactorChange}))},ViewPortViewer.prototype.componentWillUnmount=function(){var props=this.props;props.controller.run("removeZoomFactorChangeEventListener",__assign(__assign({},props),{listener:this.zoomFactorChange}))},ViewPortViewer.prototype.render=function(){log("render");var props=this.props,zoomFactor=props.controller.run("getZoomFactor",props);return React.createElement(ViewerRoot,null,React.createElement(Item,{onClick:this.onClickCollapseAll,tooltip:"collapse all"},utils_1.Icon(utils_1.IconName.COLLAPSE_ALL)),React.createElement(Item,{onClick:this.onClickExpandAll,tooltip:"expand all"},utils_1.Icon(utils_1.IconName.EXPAND_ALL)),React.createElement(Item,{onClick:this.centerRootTopic,tooltip:"center root topic"},utils_1.Icon(utils_1.IconName.CENTER)),React.createElement(Item,{onClick:this.onClickMinusZoom,tooltip:"zoom in"},utils_1.Icon(utils_1.IconName.MINUS)),React.createElement(Item,{onClick:this.onClickResetZoom,tooltip:"reset zoom"},React.createElement(ZoomFactorSpan,null,"zoom:"+Math.floor(100*zoomFactor)+"%")),React.createElement(Item,{onClick:this.onClickAddZoom,tooltip:"zoom out"},utils_1.Icon(utils_1.IconName.PLUS)))},ViewPortViewer}(common_1.BaseWidget);exports.ViewPortViewer=ViewPortViewer},966:function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(21),core_2=__webpack_require__(23),React=__webpack_require__(0),utils_1=__webpack_require__(38),items=[{icon:"edit",label:"edit",shortcut:"Space",rootCanUse:!0,opType:core_1.OpType.START_EDITING_CONTENT},{icon:"add-sibling",label:"add sibling",shortcut:"Enter",opType:core_1.OpType.ADD_SIBLING},{icon:"add-child",label:"add child",shortcut:"Tab",rootCanUse:!0,opType:core_1.OpType.ADD_CHILD},{icon:"notes",label:"edit notes",shortcut:"Alt + D",rootCanUse:!0,opType:core_1.OpType.START_EDITING_DESC},{icon:"delete-node",label:"delete node",shortcut:"Del",opType:core_1.OpType.DELETE_TOPIC},{icon:"root",label:"set as editor root",shortcut:"Alt + Shift + F",opType:core_1.OpType.SET_EDITOR_ROOT}];exports.customizeTopicContextMenu=function customizeTopicContextMenu(props){var topicKey=props.topicKey,model=props.model,controller=props.controller,isRoot=topicKey===model.editorRootTopicKey;function onClickItem(item){return function(e){item.opType&&controller.run("operation",__assign(__assign({},props),{opType:item.opType}))}}return items.map((function(item){return isRoot&&!item.rootCanUse?null:React.createElement(core_2.MenuItem,{key:item.label,icon:utils_1.Icon(item.icon),text:item.label,labelElement:React.createElement("kbd",null,item.shortcut),onClick:onClickItem(item)})}))}},967:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var React=__webpack_require__(0),styled_components_1=__webpack_require__(13);exports.default=function Theme(_a){var theme=_a.theme,children=_a.children;return(React.createElement(styled_components_1.ThemeProvider,{theme:theme},React.createElement(React.Fragment,null,children)))}},968:function(module,exports,__webpack_require__){"use strict";var __values=this&&this.__values||function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0});var log=__webpack_require__(16).default("plugin:utils");exports.UtilsPlugin=function UtilsPlugin(){var tempValueMap=new Map,eventListenerMap=new Map;return{addTempValueChangeListener:function(props){var key=props.key,listener=props.listener;eventListenerMap.has(key)||eventListenerMap.set(key,[]),eventListenerMap.get(key).push(listener)},removeTempValueChangeListener:function(props){var key=props.key,listener=props.listener;eventListenerMap.has(key)&&(eventListenerMap[key]=eventListenerMap.get(key).filter((function(l){return l!==listener})))},getTempValue:function(props){var key=props.key;return log("getTempValue",key),tempValueMap.get(key)},setTempValue:function(props){var e_1,_a,key=props.key,value=props.value;if(log("setTempValue",key),tempValueMap.set(key,value),eventListenerMap.has(key)){var listeners=eventListenerMap.get(key);try{for(var listeners_1=__values(listeners),listeners_1_1=listeners_1.next();!listeners_1_1.done;listeners_1_1=listeners_1.next()){(0,listeners_1_1.value)(value)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{listeners_1_1&&!listeners_1_1.done&&(_a=listeners_1.return)&&_a.call(listeners_1)}finally{if(e_1)throw e_1.error}}}},deleteTempValue:function(props){var key=props.key;log("deleteTempValue",key);var value=tempValueMap.get(key);return tempValueMap.delete(key),value}}}},969:function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(21),debug_1=__webpack_require__(16),lodash_1=__webpack_require__(970),log=debug_1.default("plugin:StylePlugin");exports.StylePlugin=function StylePlugin(){var colorMap=new Map,colorIndex=0;return{getTopicStyle:function(props){var controller=props.controller;return{contentStyle:controller.run("getTopicContentStyle",props),linkStyle:controller.run("getLinkStyle",props),subLinkStyle:controller.run("getSubLinkStyle",props)}},getTopicContentStyle:function(props){var topicKey=props.topicKey,model=props.model,controller=props.controller;log("getTopicContentStyle:",topicKey,model);var themeStyle,visualLevel=model.getTopicVisualLevel(topicKey),theme=model.config.theme;if(themeStyle=visualLevel===core_1.TopicVisualLevel.ROOT?theme.rootTopic:visualLevel===core_1.TopicVisualLevel.PRIMARY?theme.primaryTopic:theme.normalTopic,themeStyle=__assign(__assign({},theme.contentStyle),themeStyle.contentStyle),theme.randomColor){var randomColor=controller.run("getRandomColor",props);themeStyle=__assign(__assign({},themeStyle),{background:randomColor,borderColor:randomColor,subLinkStyle:__assign(__assign({},themeStyle.subLinkStyle),{lineColor:randomColor})})}var topic=model.getTopic(topicKey);if(!topic.style)return themeStyle;var customStyle=JSON.parse(topic.style);return __assign(__assign({},themeStyle),customStyle.contentStyle)},getLinkStyle:function(props){var topicKey=props.topicKey,model=props.model,controller=props.controller;log("getLinkStyle",topicKey);var presetStyle,visualLevel=model.getTopicVisualLevel(topicKey),theme=model.config.theme,linkStyle=theme.linkStyle;presetStyle=visualLevel===core_1.TopicVisualLevel.ROOT?theme.rootTopic.linkStyle:visualLevel===core_1.TopicVisualLevel.PRIMARY?theme.primaryTopic.linkStyle:theme.normalTopic.linkStyle,linkStyle=__assign(__assign({},linkStyle),presetStyle);var topic=model.getTopic(topicKey);if(null!=topic.parentKey){var parentSubLinkStyle=controller.run("getSubLinkStyle",__assign(__assign({},props),{topicKey:topic.parentKey}));linkStyle=__assign(__assign({},linkStyle),parentSubLinkStyle)}if(!topic.style)return linkStyle;var customStyle=JSON.parse(topic.style);return __assign(__assign({},linkStyle),customStyle.linkStyle)},getSubLinkStyle:function(props){var topicKey=props.topicKey,model=props.model,controller=props.controller;log("getLinkStyle",topicKey);var presetStyle,visualLevel=model.getTopicVisualLevel(topicKey),theme=model.config.theme,subLinkStyle=theme.linkStyle;presetStyle=visualLevel===core_1.TopicVisualLevel.ROOT?theme.rootTopic.subLinkStyle:visualLevel===core_1.TopicVisualLevel.PRIMARY?theme.primaryTopic.subLinkStyle:theme.normalTopic.subLinkStyle,subLinkStyle=__assign(__assign({},subLinkStyle),presetStyle);var topic=model.getTopic(topicKey);if(theme.randomColor){var randomColor=controller.run("getRandomColor",props);log(randomColor),subLinkStyle=__assign(__assign({},subLinkStyle),{lineColor:randomColor})}if(!topic.style)return subLinkStyle;var customStyle=JSON.parse(topic.style);return __assign(__assign({},subLinkStyle),customStyle.subLinkStyle)},setTopicContentStyle:function(props){var topicKey=props.topicKey,controller=props.controller,style=props.style,topicStyle=props.model.getTopic(topicKey).style,styleObj=topicStyle?JSON.parse(topicStyle):{},newStyleObj=__assign(__assign({},styleObj),{contentStyle:__assign(__assign({},styleObj.contentStyle),style)});if(!lodash_1.isEqual(styleObj,newStyleObj)){var newStyleStr=JSON.stringify(newStyleObj);controller.run("operation",__assign(__assign({},props),{opType:core_1.OpType.SET_STYLE,style:newStyleStr}))}},setLinkStyle:function(props){var topicKey=props.topicKey,controller=props.controller,linkStyle=props.linkStyle,style=props.model.getTopic(topicKey).style,styleObj=style?JSON.parse(style):{},newStyleObj=__assign(__assign({},styleObj),{linkStyle:__assign(__assign({},styleObj.linkStyle),linkStyle)});if(!lodash_1.isEqual(styleObj,newStyleObj)){var newStyleStr=JSON.stringify(newStyleObj);controller.run("operation",__assign(__assign({},props),{opType:core_1.OpType.SET_STYLE,style:newStyleStr}))}},setSubLinkStyle:function(props){var topicKey=props.topicKey,controller=props.controller,subLinkStyle=props.subLinkStyle,style=props.model.getTopic(topicKey).style,styleObj=style?JSON.parse(style):{},newStyleObj=__assign(__assign({},styleObj),{subLinkStyle:__assign(__assign({},styleObj.subLinkStyle),subLinkStyle)});if(!lodash_1.isEqual(styleObj,newStyleObj)){var newStyleStr=JSON.stringify(newStyleObj);controller.run("operation",__assign(__assign({},props),{opType:core_1.OpType.SET_STYLE,style:newStyleStr}))}},getTopicThemeStyle:function(props){var topicKey=props.topicKey,model=props.model,visualLevel=model.getTopicVisualLevel(topicKey),theme=model.config.theme;return visualLevel===core_1.TopicVisualLevel.ROOT?theme.rootTopic:visualLevel===core_1.TopicVisualLevel.PRIMARY?theme.primaryTopic:theme.normalTopic},getRandomColor:function(props){var topicKey=props.topicKey;if(colorMap.has(topicKey))return colorMap.get(topicKey);var colors=["#00CC99","#FFEE88","#A167A5","#E5F993","#F5C396","#DB995A","#83BCFF","#ED7B84","#739E82","#D3BCC0","#FFA0FD","#EFD3D7","#C6878F"],color=colors[++colorIndex%colors.length];return colorMap.set(topicKey,color),log("getRandomColor",topicKey,color),color},clearAllCustomStyle:function(props){var model=props.model,controller=props.controller,newModel=model.withMutations((function(model){model.topics.keySeq().forEach((function(key){model.setIn(["topics",key,"style"],null)}))}));controller.change(newModel)}}}},971:function(module,exports,__webpack_require__){var content=__webpack_require__(972);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0,insertInto:void 0};__webpack_require__(213)(content,options);content.locals&&(module.exports=content.locals)},972:function(module,exports,__webpack_require__){(module.exports=__webpack_require__(212)(!1)).push([module.i,"/*@import url('//at.alicdn.com/t/font_1280682_zy0qrgbgwlf.css');*/\n.iconfont {\n  vertical-align: middle;\n}\n\n.fXedfB {\n  background: transparent !important;\n}\n",""])},973:function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(21),debug_1=__webpack_require__(16),immutable_1=__webpack_require__(3),log=debug_1.default("plugin:json-serializer"),DATA_VERSION="0.0";exports.JsonSerializerPlugin=function JsonSerializerPlugin(){return{serializeModel:function(props){var model=props.model,controller=props.controller;return{rootTopicKey:model.rootTopicKey,topics:model.topics.valueSeq().toArray().map((function(topic){return controller.run("serializeTopic",__assign(__assign({},props),{topic:topic}))})),config:controller.run("serializeConfig",__assign(__assign({},props),{config:model.config})),formatVersion:model.formatVersion}},deserializeModel:function(props){var obj=props.obj,controller=props.controller;null==obj.formatVersion&&(obj.formatVersion="0.0");var rootTopicKey=obj.rootTopicKey,topics=obj.topics,config=obj.config,formatVersion=obj.formatVersion,model=new core_1.Model;return model=model.merge({rootTopicKey:rootTopicKey,editorRootTopicKey:rootTopicKey,config:controller.run("deserializeConfig",__assign(__assign({},props),{obj:config,formatVersion:formatVersion})),topics:controller.run("deserializeTopics",__assign(__assign({},props),{obj:topics,formatVersion:formatVersion})),formatVersion:DATA_VERSION}),log("deserializeModel",model),model},serializeConfig:function(props){return props.config.toJS()},deserializeConfig:function(props){var obj=props.obj;return new core_1.Config(obj)},serializeTopic:function(props){var topic=props.topic,controller=props.controller;return{key:topic.key,parentKey:topic.parentKey,subKeys:topic.subKeys.toArray(),collapse:topic.collapse,style:topic.style,blocks:topic.blocks.map((function(block){return controller.run("serializeBlock",__assign(__assign({},props),{block:block}))}))}},deserializeTopic:function(props){var obj=props.obj,controller=props.controller,key=obj.key,parentKey=obj.parentKey,subKeys=obj.subKeys,blocks=obj.blocks,style=obj.style,collapse=obj.collapse,topic=new core_1.Topic;return topic=topic.merge({key:key,parentKey:parentKey,subKeys:immutable_1.List(subKeys),style:style,collapse:collapse,blocks:controller.run("deserializeBlocks",__assign(__assign({},props),{obj:blocks}))})},deserializeTopics:function(props){var obj=props.obj,controller=props.controller,topics=immutable_1.Map();return topics=topics.withMutations((function(topics){obj.forEach((function(topic){return topics.set(topic.key,controller.run("deserializeTopic",__assign(__assign({},props),{obj:topic})))}))}))},serializeBlock:function(props){return props.block.toJS()},deserializeBlock:function(props){var obj=props.obj;return new core_1.Block(obj)},deserializeBlocks:function(props){var obj=props.obj,controller=props.controller,blocks=immutable_1.List();return blocks=blocks.withMutations((function(blocks){obj.forEach((function(block){return blocks.push(controller.run("deserializeBlock",__assign(__assign({},props),{obj:block})))}))}))}}}},974:function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(21),React=__webpack_require__(0),topic_desc_editor_1=__webpack_require__(975),markdown_serializer_1=__webpack_require__(1171);exports.default=function RichTextEditorPlugin(){return{renderTopicDescEditor:function(props){return React.createElement(topic_desc_editor_1.TopicDescEditor,__assign({},props))},isBlockEmpty:function(props,next){var block=props.block,controller=props.controller;return block.type===core_1.BlockType.CONTENT||block.type===core_1.BlockType.DESC?null==block.data||""===controller.run("serializeBlockData",props):next()},serializeBlockData:function(props,next){var block=props.block;return block.type===core_1.BlockType.DESC?"string"==typeof block.data?block.data:markdown_serializer_1.default.serialize(block.data):next()},serializeBlock:function(props,next){var block=props.block,controller=props.controller;return block.type===core_1.BlockType.CONTENT||block.type===core_1.BlockType.DESC?{type:block.type,data:controller.run("serializeBlockData",props)}:next()},deserializeBlock:function(props,next){return next()}}}},975:function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(21),TopicDescEditor=function(_super){function TopicDescEditor(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(TopicDescEditor,_super),TopicDescEditor.prototype.initState=function(){_super.prototype.initState.call(this);var _a=this.props,controller=_a.controller,key="topic-desc-data-"+_a.topicKey,value=this.state.content;controller.run("setTempValue",{key:key,value:value})},TopicDescEditor.prototype.getCustomizeProps=function(){var _a=this.props,model=_a.model,topicKey=_a.topicKey;return{block:model.getTopic(topicKey).getBlock(core_1.BlockType.DESC).block,readOnly:model.editingDescKey!==topicKey,refKeyPrefix:"desc-editor",placeholder:"write topic notes here"}},TopicDescEditor.prototype.onChange=function(value){var _a=this.props,controller=_a.controller,key="topic-desc-data-"+_a.topicKey;controller.run("setTempValue",{key:key,value:value}),this.setState({content:value})},TopicDescEditor}(__webpack_require__(976).RichTextEditor);exports.TopicDescEditor=TopicDescEditor},976:function(module,exports,__webpack_require__){"use strict";var extendStatics,__makeTemplateObject=this&&this.__makeTemplateObject||function(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked},__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var templateObject_1,renderer_react_1=__webpack_require__(59),awehook_rich_markdown_editor_1=__webpack_require__(977),debug_1=__webpack_require__(16),React=__webpack_require__(0),styled_components_1=__webpack_require__(13),log=debug_1.default("node:topic-content-editor"),NodeContent=styled_components_1.default.div.withConfig({displayName:"NodeContent",componentId:"sc-hn5w8m"})(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  ",";\n"],["\n  ",";\n"])),(function(props){return!props.readOnly&&"\n    // padding: 75px\n    // min-width: 150px\n    // min-height: 150px\n  "})),RichTextEditor=function(_super){function RichTextEditor(props){var _this=_super.call(this,props)||this;return _this.onMouseDown=function(e){e.stopPropagation()},_this.onMouseMove=function(e){e.stopPropagation()},_this.rootRef=function(saveRef){return function(ref){saveRef(ref),_this.root=ref}},_this._handleClick=function(event){!_this.root.contains(event.target)&&_this.onClickOutSide(event)},_this.initState(),_this}return __extends(RichTextEditor,_super),RichTextEditor.prototype.initState=function(){this.state={content:this.getContent()}},RichTextEditor.prototype.getContent=function(){return this.getCustomizeProps().block.data},RichTextEditor.prototype.onChange=function(value){this.setState({content:value})},RichTextEditor.prototype.getCustomizeProps=function(){return null},RichTextEditor.prototype.componentDidMount=function(){document.addEventListener("click",this._handleClick)},RichTextEditor.prototype.componentWillUnmount=function(){document.removeEventListener("click",this._handleClick)},RichTextEditor.prototype.onClickOutSide=function(e){},RichTextEditor.prototype.render=function(){var _a=this.props,topicKey=_a.topicKey,saveRef=_a.saveRef,_b=this.getCustomizeProps(),readOnly=_b.readOnly,refKeyPrefix=_b.refKeyPrefix,placeholder=_b.placeholder;log("readOnly:",readOnly);var content=readOnly?this.getContent():this.state.content;if(null==content)return null;var key=refKeyPrefix+"-"+topicKey,onMouseDown=this.onMouseDown,onMouseMove=this.onMouseMove,richEditorProps={editorValue:content,readOnly:readOnly,onChange:this.onChange.bind(this),placeholder:placeholder},nodeContentProps={key:key,ref:this.rootRef(saveRef(key)),readOnly:readOnly,onMouseDown:onMouseDown,onMouseMove:onMouseMove};return React.createElement(NodeContent,__assign({},nodeContentProps),React.createElement(awehook_rich_markdown_editor_1.default,__assign({},richEditorProps)))},RichTextEditor}(renderer_react_1.BaseWidget);exports.RichTextEditor=RichTextEditor}},[[501,1,2]]]);
//# sourceMappingURL=main.798159ad0cd3b3f66df6.bundle.js.map